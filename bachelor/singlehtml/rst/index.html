

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bachelorarbeit</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="None" href="../index.html"/>

<!-- Include all CSS and JS files, let's you use your own theme. -->

<link rel="stylesheet" type="text/css" href="../_static/custom.css" />
<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '95%',
    		'height': '95%',
    		'photo': true});
    });
</script>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html#document-rst/index" class="fa fa-home"> Bachelorarbeit</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/abstract">Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/acknowledgements">Danksagung</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/dedication">Widmung</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/1_intro/index">1 Einleitung</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/1_intro/index#das-allgemeine-problem">1.1 Das allgemeine Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/1_intro/index#das-konkrete-problem">1.2 Das konkrete Problem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index">2 Allgemeine Entwicklerhinweise</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#zusammenfassung-des-aktuellen-stands">2.1 Zusammenfassung des aktuellen Stands</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#zur-nuztung-von-libmunin">2.2 Zur Nuztung von <em>libmunin</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#der-begriff-der-distanzfunktion">2.3 Der Begriff der Distanzfunktion</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#zur-erweiterung-von-libmunin">2.4 Zur Erweiterung von <em>libmunin</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#vergleich-verschiedener-playlisten">2.5 Vergleich verschiedener Playlisten</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/2_einleitung/index#ressourcenverbrauch">2.6 Ressourcenverbrauch</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/3_graphops/index">3 Graphenoperationen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/3_graphops/index#einleitung">3.1 Einleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/3_graphops/index#graphentraversierung">3.2 Graphentraversierung</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/4_provider/index">4 Algorithmen bei Providern</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/4_provider/index#einleitung">4.1 Einleitung</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/4_provider/index#genrenormalisierung-und-vergleich-von-genres">4.2 Genrenormalisierung und Vergleich von Genres</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/4_provider/index#schlusselwortextraktion">4.3 Schlüsselwortextraktion</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/4_provider/index#moodbar-analyse">4.4 Moodbar&ndash;Analyse</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/5_learning/index">5 Implizites Lernen vom Nutzer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/5_learning/index#generierung-von-regeln">5.1 Generierung von Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/5_learning/index#anwendung-von-regeln">5.2 Anwendung von Regeln</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/5_learning/index#lernerfolg">5.3 Lernerfolg</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/5_learning/index#explizites-lernen">5.4 Explizites Lernen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/6_outro/index">6 Ausblick</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/6_outro/index#verbesserung-der-algorithmik">6.1 Verbesserung der Algorithmik</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/6_outro/index#erweiterungen">6.2 Erweiterungen</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst/index.html#document-rst/6_outro/index#fazit">6.3 Fazit</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix">Bilder des Song&ndash;Graphen</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix#bilder-des-genregraphen">Bilder des Genregraphen</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/appendix#medien">Medien</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/zzz_bibliography">Bibliographie</a></li>
<li class="toctree-l1"><a class="reference internal" href="rst/index.html#document-rst/zzz_bibliography#weblink-verzeichnis">Weblink Verzeichnis</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html#document-rst/index">Bachelorarbeit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html#document-rst/index">Docs</a> &raquo;</li>
      
    <li>Bachelorarbeit</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="libmunin-br-bachelorarbeit">
<span id="doc-title"></span><h1>libmunin: <br /> Bachelorarbeit<a class="headerlink" href="#libmunin-br-bachelorarbeit" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-rst/abstract"></span><div class="section" id="abstract">
<h2>Abstract<a class="headerlink" href="#abstract" title="Permalink to this headline">¶</a></h2>
</div>
<p><strong>English:</strong></p>
<p>This paper shows the algorithms of the previously developed music recommendation
system <em>libmunin</em>. Apart from the construction of the internal graph data
structure, some selected, so called providers and distance functions are
explained. Additionally, <em>libmunin's</em> mechanism for learning from the user, in an
implicit or explicit way, is shown in detail. Users of the library are supposed
to read this paper in order to maximize their understanding of <em>libmunin</em>. For
this purpose, some helpful tips for developing with and on <em>libmunin</em> are given
in the first chapters. At the end of the paper, some graphs and other
visualizations are shown which were developed during the project.  In order to
understand the context, it is advisable to read the project report
before reading this paper. To be useful for interested
developers, the topics in every chapter are reflected and potential improvements
are listed.</p>
<p><strong>Deutsch:</strong></p>
<p>Diese Arbeit zeigt die Algorithmik hinter der vorgestellten
Musikempfehlungsbibliothek <em>libmunin</em>. Neben dem Aufbau des intern genutzten
Graphen, werden auch einige ausgewählte Provider und Distanzfunktionen erklärt.
Zusätzlich wird detailliert auf <em>libmunin's</em> Mechanismus zum impliziten und
expliziten Lernen vom Nutzer eingegangen. Anwendungsentwickler sollten
diese Arbeit lesen, um ihr Verständnis von <em>libmunin</em> zu vertiefen. Zu diesem Zwecke
werden anfangs einige hilfreiche Tipps für die Entwicklung von und mit
<em>libmunin</em> gegeben. Am Ende der Arbeit werden einige Graphen und
Visualisierungen gezeigt, die während der Arbeit an dem Projekt entstanden sind.
Es wird dringend empfohlen, vor der Lektüre die Projektarbeit
zu lesen, um eine grobe Übersicht zu bekommen und den Kontext zu verstehen.
Damit die Arbeit
nützlich für interessierte Entwickler ist, werden in jedem Kapitel die
vorgestellten Themen noch einmal reflektiert und potenzielle Verbesserungen
aufgezeigt.</p>
<span id="document-rst/acknowledgements"></span><div class="section" id="danksagung">
<h2>Danksagung<a class="headerlink" href="#danksagung" title="Permalink to this headline">¶</a></h2>
</div>
<p>Dank sei an folgende Personen und Dinge gerichtet: Die Gattungen Felis
silvestris und Ursus arctos, sowie der Obergattung der Aves, Espressohersteller
aller Länder, Herrn Prof.  Dr. Jörg Scheidt (für die Zelle), Herrn Prof. Dr.
Günther Köhler (für die Freiheit) und meiner Familie.</p>
<p>Ihr wisst schon warum.</p>
<span id="document-rst/dedication"></span><div class="section" id="widmung">
<h2>Widmung<a class="headerlink" href="#widmung" title="Permalink to this headline">¶</a></h2>
</div>
<p><em>Für meine Katzen.</em></p>
</div>
<div class="toctree-wrapper compound">
<span id="document-rst/abbrevs"></span><p><strong>Abkürzungsverzeichnis</strong></p>
<div class="figure align-center">
<center><table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head align-top">Abkürzung</th>
<th class="head align-top">Bedeutung</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-top">API</td>
<td class="align-top"><em>Application Programming Interface</em></td>
</tr>
<tr class="row-odd"><td class="align-top">BPM</td>
<td class="align-top"><em>Beats per Minute</em></td>
</tr>
<tr class="row-even"><td class="align-top">FAQ</td>
<td class="align-top"><em>Frequently Asked Questions</em></td>
</tr>
<tr class="row-odd"><td class="align-top">URL</td>
<td class="align-top"><em>Uniform Resource Locator</em></td>
</tr>
<tr class="row-even"><td class="align-top">MP3</td>
<td class="align-top"><em>MPEG-2 Audio Layer III</em></td>
</tr>
<tr class="row-odd"><td class="align-top">FLAC</td>
<td class="align-top"><em>Free Lossless Audio Codec</em></td>
</tr>
</tbody>
</table>
</center></div><span id="document-rst/1_intro/index"></span><div class="section" id="einleitung">
<h2>1 Einleitung<a class="headerlink" href="#einleitung" title="Permalink to this headline">¶</a></h2>
<div class="section" id="das-allgemeine-problem">
<h3>1.1 Das allgemeine Problem<a class="headerlink" href="#das-allgemeine-problem" title="Permalink to this headline">¶</a></h3>
<p>In der, zu dieser Arbeit vorangegangenen, Projektarbeit
<a class="reference internal" href="rst/index.html#aaa-cpahl" id="id1">[1]</a> wurde das Musikempfehlungssystems <em>libmunin</em> implementiert.
Um Musikempfehlungen auszusprechen, muss ein solches System die Ähnlichkeit
zwischen zwei Liedern feststellen können.  Dies ist das
grundsätzliche Problem: Musik ist nur schwer vergleichbar. Fragt man mehrere
Menschen, wie <em>ähnlich</em> ein Musikstück zu einem anderem ist, so erhält man
genauso viele Antworten, wie man Fragen gestellt hat. Die Einschätzung von Musik
ist eine sehr subjektive Angelegenheit, die auch häufig zwischen Menschen
Diskussionen auslöst.  Stuft man den Künstler <em>Status Quo</em> als <em>Rock</em> ein? Oder
doch eher als <em>Pop?</em> Was zählt überhaupt noch als <em>Rock</em>? Gibt es eine, für den
Computer verständliche, Definition von <em>Rock</em>?</p>
<p>Wenn man jetzt noch versucht, einem Computer den Begriff der <em>Musikähnlichkeit</em>
beizubringen, so wird es noch weitaus komplizierter. Dieser kann nur objektiv
nach bestimmten Metriken entscheiden. Diese Metriken zu definieren, muss dann
wiederum die Aufgabe eines Menschen sein &ndash;- also sind auch diese wiederum
subjektiv, da sie die Vorlieben des Autors widerspiegeln. Auch können diese
Metriken nie für alle Fälle funktionieren. Ein gutes Stück
<em>,,Kaffeesatzleserei&quot;</em> lässt sich leider nie ganz vermeiden. Daher werden in
dieser Arbeit einige Annahmen getroffen, die sich aufgrund ihrer Natur nur
schwer empirisch nachweisen lassen.  An den entsprechenden Stellen wird auf die
gemachten Annahmen hingewiesen.</p>
</div>
<div class="section" id="das-konkrete-problem">
<h3>1.2 Das konkrete Problem<a class="headerlink" href="#das-konkrete-problem" title="Permalink to this headline">¶</a></h3>
<p>Erschwerend kommt hinzu, dass jeder Nutzer andere Vorlieben und Gewohnheiten
hat.  So gesehen, ist <em>libmunin</em> in der <em>,,Standardeinstellung&quot;</em> ein
Musikempfehlungssystem, das genau auf einen Nutzer und dessen Vorlieben
zugeschnitten ist: Seinem Entwickler. Bibliotheksanwender können jedoch die
Bibliothek an ihre Präferenzen anpassen oder ihren Endnutzern eine Möglichkeit
geben, selbst Einstellungen vorzunehmen.
Damit die Bibliotheksanwender diese Anpassungen vornehmen können, sollten sie
verstehen was intern vor sich geht. Genau darum soll es in dieser
Arbeit gehen.  Hauptsächlich wird diskutiert, wie <em>libmunin</em> die Ähnlichkeit
zwischen den Attributen eines Liedes berechnet und wie aus diesen Ähnlichkeiten
ein Graph aufgebaut wird. Auch auf <em>libmunin's</em> Möglichkeit vom Nutzer zu lernen
wird eingegangen.
Zu jedem vorgestellten Thema werden auch
Überlegungen angestellt, welche Verbesserungen in zukünftigen Versionen gemacht
werden können.</p>
</div>
</div>
<span id="document-rst/2_einleitung/index"></span><div class="section" id="allgemeine-entwicklerhinweise">
<h2>2 Allgemeine Entwicklerhinweise<a class="headerlink" href="#allgemeine-entwicklerhinweise" title="Permalink to this headline">¶</a></h2>
<p>In diesem Kapitel werden einleitend einige allgemeine Hinweise
gegeben, die man bei der Entwicklung mit und von <em>libmunin</em> beachten sollte.
Statt wie in der API&ndash;Referenz <a class="reference internal" href="rst/index.html#lx" id="id1">[Link&ndash;1]</a> auf die einzelnen Methoden und
Klassen von <em>libmunin</em> einzugehen, sollen hier ,,Best Practices&quot; vermittelt
werden.  Zuvor wird noch eine kurze Zusammenfassung gegeben, um den Leser an die
in <a class="reference internal" href="rst/index.html#aaa-cpahl" id="id2">[1]</a> eingeführten Begriffe heranzuführen.</p>
<div class="section" id="zusammenfassung-des-aktuellen-stands">
<h3>2.1 Zusammenfassung des aktuellen Stands<a class="headerlink" href="#zusammenfassung-des-aktuellen-stands" title="Permalink to this headline">¶</a></h3>
<p><em>Libmunin</em> ist eine in der Programmiersprache Python geschriebene Bibliothek und
implementiert ein Musikempfehlungssystems auf Graphen&ndash;Basis. Der
dahinterstehende Graph bildet die Nachbarschaftsbeziehungen zwischen den
einzelnen Musikstücken ab. Um den Graphen aufbauen zu können, müssen, während
des sogenannten Kaltstartes, vom Nutzer der Bibliothek alle Songs aus denen
Empfehlungen gebildet werden soll, mit allen relevanten Attributen eingegeben
werden. Damit <em>libmunin</em> weiß, wie die einzelnen Werte zu behandeln sind, wird
jedem Attribut (Künstler, Titel, Genre...) ein sogenannter <em>Provider</em> und eine
<em>Distanzfunktion</em> zugeordnet.</p>
<p>Ein Provider normalisiert einen Wert anhand verschiedener Charakteristiken.
Sein Ziel ist es, für die Distanzfunktion einfache und effizient vergleichbare
Werte zu erzeugen, da die Distanzfunktion sehr viel öfters aufgerufen wird als
der Provider. Die Distanzfunktion erzeugt dann aus diesen normalisierten Werten
eine Distanz, also ein Maß dafür, wie ähnlich diese Werte sind. Die Distanzen
gehen dabei von <span class="math">\(0\)</span> (vollkommen ähnlich) bis <span class="math">\(1\)</span> (absolut
unähnhlich). <em>Libmunin</em> implementiert eine große Anzahl von vorgefertigten
Providern und Distanzfunktionen für gängige Attribute, wie dem Genre, den
Audiodaten oder den aus den Liedtext extrahierten Schlüsselwörtern.</p>
<p>Aus den einzelnen Distanzen wird dann der obige Graph aufgebaut. Um aus diesen
Graphen dann Empfehlungen abzuleiten, werden einzelne Knoten, sogenannte
Seedsongs, nach bestimmten Kriterien ausgewählt. Beginnend von diesen wird eine
Breitensuche gestartet, also eine sich kreisförmig vom Seedsong ausbreitende
Traversierungstrategie. Bereits besuchte Knoten werden dabei nicht nochmal besucht.
Die einzelnen besuchten Knoten werden, nach dem Filtern von doppelten Künstlern
und Alben, dann als Empfehlungen angenommen</p>
<p>Zudem lernt <em>libmunin</em> während einer Sitzung vom Nutzer, indem es die
Gewohnheiten des Nutzers beobachtet und daraus Regeln ableitet. Alle gehörten
Songs werden in einer Historie abgespeichert.  Im Vergleich zu bestehenden
Systemen ist <em>libmunin</em> nicht von den Audiodaten abhängig, sondern kann durch
seine flexible Schnittstelle auch alleine auf den Metadaten eines Stückes, wie
den Tags eines Musikstückes, operieren. Ein Tag ist eine direkt in der
Audiodatei hinterlegte Information um bestimmte Werte wie den Künstler des
Stückes zu beschreiben. Das erklärte Ziel der Bibliothek ist es, eine freie
Bibliothek zu schaffen, die sowohl offline (in Musicplayern) als auch online (in
Streamingdiensten) funktioniert und mit großen Datenmengen umgehen kann.  Durch
die GPLv3&ndash;Lizenz <a class="reference internal" href="rst/index.html#gplv3" id="id3">[Link&ndash;2]</a> ist ein libertärer, weitläufiger Einsatz
möglich.</p>
</div>
<div class="section" id="zur-nuztung-von-libmunin">
<h3>2.2 Zur Nuztung von <em>libmunin</em><a class="headerlink" href="#zur-nuztung-von-libmunin" title="Permalink to this headline">¶</a></h3>
<p>Die Qualität der Empfehlungen kann nur so gut sein, wie die Qualität der
Eingabedaten. Da in den meisten Fällen die Metadaten zu den einzelnen Liedern
aus den Tags der Audiodateien kommen, empfiehlt es sich, diese vorher
mit Musiktaggern einheitlich zu pflegen. Der Autor empfiehlt hierfür <em>Picard</em>
<a class="reference internal" href="rst/index.html#picard" id="id4">[Link&ndash;3]</a>, welches im Hintergrund auf <em>Musicbrainz</em> <a class="reference internal" href="rst/index.html#a3" id="id5">[Link&ndash;4]</a> zugreift.
Für schwerer zu besorgende Daten, wie Liedtexte, kann unter anderem auf
libglyr <a class="reference internal" href="rst/index.html#xu" id="id6">[Link&ndash;5]</a>, beets <a class="reference internal" href="rst/index.html#xaj" id="id7">[Link&ndash;6]</a> oder dem eingebauten
<tt class="docutils literal"><span class="pre">PlyrLyricsProvider</span></tt> (sucht im Web nach Liedtexten) und
<tt class="docutils literal"><span class="pre">DiscogsGenreProvider</span></tt> (sucht bei Discogs <a class="reference internal" href="rst/index.html#discogs" id="id8">[Link&ndash;7]</a> nach der
Genrebezeichnung) zurückgegriffen werden.</p>
<p>Welche Lieder man zu <em>libmunin's Historie</em> hinzufügt, sollte
abgewogen werden. Fügt man auch Lieder ein, welche vom Nutzer einfach
übersprungen worden sind, so sind die erstellten Regeln nicht repräsentativ.
Es sollten nur Lieder hinzugefügt werden, welche mehr als <span class="math">\(50\%\)</span>
angehört worden sind.</p>
<p>Um das Format der Musiksammlung zu spezifizieren, muss der Nutzer der
Bibliothek bei einer neuen Sitzung eine Maske angeben. In dieser werden die
Provider und Distanzfunktionen für die einzelnen Attribute eines Songs
festgelegt. Mit der <tt class="docutils literal"><span class="pre">EasySession</span></tt> bietet <em>libmunin</em> aber eine Sitzung mit
vorgefertigter Maske. Anwendungsentwickler sollten aber nach Möglichkeit eine
eigene, für ihre Zwecke konfigurierte, Session&ndash;Maske verwenden. Zwar ist der
Einsatz der vorgefertigten <tt class="docutils literal"><span class="pre">EasySession</span></tt> deutlich einfacher, doch ist diese
mehr für den schnellen Einsatz gedacht.  Zudem sollte es dem Endanwender möglich
gemacht werden, die Gewichtungen der einzelnen Attribute zu ändern.</p>
</div>
<div class="section" id="der-begriff-der-distanzfunktion">
<h3>2.3 Der Begriff der Distanzfunktion<a class="headerlink" href="#der-begriff-der-distanzfunktion" title="Permalink to this headline">¶</a></h3>
<p>Eine Distanzfunktion ist im Kontext von <em>libmunin</em> eine Funktion, die zwei
Songs als Eingabe nimmt und die Distanz zwischen diesen berechnet. <br />
Dabei wird jedes Attribut betracht, welches in beiden Songs vorkommt. Für
diese wird von der Maske eine spezialisierte Distanzfunktion festgelegt,
die weiß wie diese zwei bestimmten Werte sinnvoll verglichen werden
können. Die so errechneten Werte werden, gemäß der Gewichtung in der
Maske, zu einem Wert verschmolzen. <br /> Fehlen Attribute in einen der
beiden Songs, wird für diese jeweils eine <em>,,Straf&quot;</em>&ndash;Distanz von
<span class="math">\(1\)</span> angenommen. Diese wird dann ebenfalls in die gewichtete
Oberdistanz eingerechnet.
Die folgenden Bedingungen müssen sowohl für die allgemeine
Distanzfunktion als auch für die speziellen Distanzfunktionen gelten.
<span class="math">\(D\)</span> ist dabei die Menge aller Songs, <span class="math">\(d\)</span> eine Distanzfunktion.
Beim Schreiben von Distanzfunktionen sollte versucht werden, alle dieser
Eigenschaften zu erfüllen. Technisch nötig sind dabei nur die Bedingungen
1&ndash;3.</p>
<div class="figure compound align-center" id="fig-trineqs">
<div style="width: 49%" class="subfigure align-center" id="fig-trineq">
<a class="reference internal image-reference" href="../../_images/trineq.svg"><img src="../../_images/trineq.svg" width="95%" /></a>
<p class="caption">Ohne Einhaltung der Dreiecksungleichung.</p>
</div>
<div style="width: 49%" class="subfigure align-center" id="fig-trineq-fixed">
<a class="reference internal image-reference" href="../../_images/trineq_fixed.svg"><img src="../../_images/trineq_fixed.svg" width="95%" /></a>
<p class="caption">Mit Einhaltung der Dreiecksungleichung.</p>
</div>
<p class="caption">Die Beziehung dreier Songs untereinander. Die Dreiecksungleichung
besagt, dass der direkte Weg von A nach B kürzer oder gleich lang sein
sollte als der Umweg über C. Die einzelnen Attribute ,,a“ und ,,b“
sind gleich stark gewichtet.  Wenn keine Straftwertung für leere Werte
gegeben wird, so sind die Umwege manchmal kürzer.</p>
</div><ol class="upperroman" id="fig-trineqs">
<li><p class="first"><em>Uniformität:</em> <span class="math">\(\;0 \leq d(i, j) \leq 1 \;\;\forall\;\; i,j \in D\)</span></p>
<p><em>Aussage:</em> Die errechneten Werte sollten sich immer zwischen und
einschließlich <span class="math">\(0\)</span> und <span class="math">\(1\)</span> befinden. <em>libmunin</em> schneidet
Werte auf diesen Bereich zu.</p>
</li>
<li><p class="first"><em>Symmetrie:</em> <span class="math">\(\;d(i, j) = d(j, i) \;\;\forall\;\; i,j \in D\)</span></p>
</li>
</ol>
<blockquote>
<div><em>Aussage:</em> Die Reihenfolge, in der die Songs der Distanzfunktion
übergeben werden, darf keine Auswirkung auf das Ergebnis haben.
Diese Eigenschaft wird von <em>libmunin</em> nicht überprüft &ndash;- eine
Nichteinhaltung würde zu falschen Kanten im Graphen führen.</div></blockquote>
<ol class="upperroman" start="3">
<li><p class="first"><em>Identität:</em> <span class="math">\(\;d(i, i) = 0 \;\;\forall\;\; i \in D\)</span></p>
<p><em>Aussage:</em> Wird zweimal der selbe Song übergeben, so muss die Distanz
immer <span class="math">\(0\)</span> betragen. Autoren von Distanzfunktionen sollten dies
testen.  Werte <span class="math">\(\neq 0\)</span> deuten auf fehlerhafte Distanzfunktionen
hin.</p>
</li>
<li><p class="first"><em>Dreiecksungleichung:</em> <span class="math">\(\;d(i, j) \leq d(i, x) + d(x, j) \;\;\forall\;\; i,j,x \in D, i \neq j \neq x\)</span></p>
<p><em>Aussage:</em> In einer Dreiecksbeziehung zwischen drei Songs muss der direkte Weg
zwischen zwei Songs immer kürzer oder gleich lang wie der Umweg über
den dritten Song sein. Dies ist in Abbildung  gezeigt.
Diese Eigenschaft ist nötig, damit man annehmen kann, dass direkte
Nachbarn ähnlicher sind als indirekte Nachbarn.</p>
</li>
</ol>
</div>
<div class="section" id="zur-erweiterung-von-libmunin">
<h3>2.4 Zur Erweiterung von <em>libmunin</em><a class="headerlink" href="#zur-erweiterung-von-libmunin" title="Permalink to this headline">¶</a></h3>
<p>Oft ist es von Interesse neue Distanzfunktionen und Provider für eigene Zwecke
zu schreiben. Beispielsweise könnte man ein Paar aus Provider und
Distanzfunktion verfassen um die einzelnen Mitglieder einer Band automatisch aus
dem Netz zu besorgen und mit anderen Bands zu vergleichen, um Relationen zu
finden.  Im Folgenden werden einige Beispiele gegeben und Stolperfallen
aufgelistet.</p>
<div class="section" id="hinweise-zum-schreiben-von-distanzfunktionen">
<h4>2.4.1 Hinweise zum Schreiben von Distanzfunktionen<a class="headerlink" href="#hinweise-zum-schreiben-von-distanzfunktionen" title="Permalink to this headline">¶</a></h4>
<p>Wenn eine Distanzfunktion eine Menge von Elementen vergleichen muss,
so besteht dieselbe oft aus einem <em>Fusionierungsverfahren</em> und einer weiteren
Metrik, die die einzelnen Elemente untereinander vergleicht. Ein
Fusionierungsverfahren verschmilzt mehrere Teildistanzen auf definierte Weise
zu einer Gesamtdistanz.  Als Beispiel kann man hier den Vergleich von zwei
Mengen von Wörtern nennen.  Einzelne Wörter kann man relativ einfach auf
Ähnlichkeit untersuchen <a class="footnote-reference" href="#f1" id="id9"><sup>1</sup></a>.  Ein
simples Fusionierungsverfahren wäre hier, jedes Wort aus der einen Menge mit
jedem Wort aus der anderen Menge zu vergleichen und den Durchschnitt der
Einzeldistanzen als Ergebnis anzunehmen. Ein anderes Fusionierungsverfahren
nimmt statt dem Durchschnitt die kleinste gefundene Distanz. Hier gibt
es kein richtig oder falsch. Je nach Einsatzzweck, muss ein passendes Verfahren
gewählt werden.  Der dazugehörige Wikipedia&ndash;Artikel bietet, unter dem Punkt
Fusionierungsalgorithmen, einen guten Überblick über weitere Verfahren:
<a class="reference internal" href="rst/index.html#wiki-fusion" id="id10">[Link&ndash;8]</a>.</p>
<p>Distanzfunktionen sollten schlechte Werte abstrafen und gute belohnen. Während
der Entwicklung hat sich gezeigt, dass simple Distanzfunktionen, die auch für
gar nicht mehr ähnliche Werte eine Distanz errechnen, die <span class="math">\(\neq 1,0\)</span>
ist, zu qualitativ schlechten Verbindungen im Graphen führen. Man sollte daher
den Bereich, in denen man eine Distanz <span class="math">\(&lt; 1,0\)</span> vergibt, einschränken.</p>
<div class="figure align-center" id="fig-stretch">
<a class="reference internal image-reference" href="../../_images/scale.svg"><img alt="Skalierungsfunktion der Distanzfunktion" src="../../_images/scale.svg" width="70%" /></a>
<p class="caption">Die blaue Kurve zeigt die skalierten Werte der Distanzfunktion in Blau.
Werte unter 0,5 werden etwas herabgesetzt, schlechtere Werte über 0,5
werden erhöht.  Zur Referenz ist die ursprüngliche Gerade in Grün gegeben.</p>
</div>
<p>Im folgendem Beispiel wird dies nicht getan und in der nachfolgenden
Version verbessert:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">munin.distance</span> <span class="kn">import</span> <span class="n">DistanceFunction</span>

<span class="c"># Eine Distanzfunktion, die beispielsweise ein Rating von 1-5 vergleicht.</span>
<span class="c"># Leite von der Distanzfunktions-Oberklasse ab:</span>
<span class="k">class</span> <span class="nc">WrongDistanceFuntion</span><span class="p">(</span><span class="n">DistanceFunction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
        <span class="c"># A und B sind, der Konsistenz halber auch bei einzelnen Werten immer Tupel</span>
        <span class="c"># Daher müssen wir diese erst &quot;entpacken&quot;.</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <span class="c"># Teile Differenz durch Maximum aus beiden:</span>

<span class="k">class</span> <span class="nc">CorrectDistanceFuntion</span><span class="p">(</span><span class="n">DistanceFunction</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">B</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">diff</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
           <span class="k">return</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span>    <span class="c"># Zu unterschiedlich.</span>
        <span class="k">return</span> <span class="n">diff</span> <span class="o">/</span> <span class="mi">4</span>  <span class="c"># Verteile auf [0, 0.25, 0.5, 0.75]</span>
</pre></div>
</div>
<p>Manchmal ist eine Eingrenzung des Bereichs nicht so einfach möglich, vor allem
wenn komplexere Daten im Spiel sind. Dann empfiehlt es sich, die Verteilung der
Distanz auf den Bereich zwischen <span class="math">\(0,0\)</span> und <span class="math">\(1,0\)</span> zu untersuchen.
Sollte sich die Distanz beispielsweise gehäuft im Bereich zwischen <span class="math">\(0,3\)</span>
und <span class="math">\(0,7\)</span> bewegen, so ist es empfehlenswert diesen Bereich zu dehnen.
In Abbildung  werden mit der Funktion <a class="footnote-reference" href="#f2" id="id11"><sup>2</sup></a>  <span class="math">\(f(x) =
-2\frac{2}{3}x^{3} + 4x^{2} - \frac{1}{3}x\)</span> Distanzen unter <span class="math">\(0,5\)</span>
verbessert und darüber verschlechtert.</p>
</div>
<div class="section" id="hinweise-zum-schreiben-von-neuen-providern">
<h4>2.4.2 Hinweise zum Schreiben von neuen Providern<a class="headerlink" href="#hinweise-zum-schreiben-von-neuen-providern" title="Permalink to this headline">¶</a></h4>
<p>Provider laufen im Gegensatz zu Distanzfunktionen nur einmal. Sie sind als
Präprozessor zu verstehen, der die vom Nutzer eingegebenen Daten auf möglichst
einfache und effiziente Vergleichbarkeit optimiert. Die Laufzeit, die er dafür
braucht, ist daher im Vergleich zur Distanzfunktion vernachlässigbar.  Daher
sollte gut abgewogen werden, wieviele Daten man dem Provider produzieren lässt.
Im Zweifelsfall, empfiehlt es sich, Unnötiges wegzulassen. Ist zu erwarten,
dass stark redundante Daten eingepflegt werden, dann sollte die
provider&ndash;interne Kompression genutzt werden. Ein typisches Beispiel dafür ist
der Künstlername. Dieser ist für sehr viele Songs gleich. Daher wäre eine
separate Speicherung desselben nicht sinnvoll. Intern bildet eine
bidirektionale Hashtabelle <a class="footnote-reference" href="#f3" id="id12"><sup>3</sup></a> (mittels des Python&ndash;Pakets <tt class="docutils literal"><span class="pre">bidict</span></tt>
<a class="reference internal" href="rst/index.html#bidict" id="id13">[Link&ndash;9]</a>) gleiche Werte auf einen Integer&ndash;Schlüssel ab.
Dies wird im folgenden Python&ndash;Beispiel gezeigt:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">munin.provider</span> <span class="kn">import</span> <span class="n">Provider</span>

<span class="k">class</span> <span class="nc">DoublingProvider</span><span class="p">(</span><span class="n">Provider</span><span class="p">):</span>   <span class="c"># Leite von der Provider-Oberklasse ab.</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Kompression anschalten, ansonsten muss auf nichts geachtet werden.</span>
        <span class="n">Provider</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">compress</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">do_compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_value</span><span class="p">):</span>  <span class="c"># Wird bei jeder Eingabe aufgerufen.</span>
        <span class="k">return</span> <span class="n">input_value</span> <span class="o">*</span> <span class="mi">2</span>  <span class="c"># Tue irgendwas mit dem Input.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="vergleich-verschiedener-playlisten">
<span id="ref-playlist-compare"></span><h3>2.5 Vergleich verschiedener Playlisten<a class="headerlink" href="#vergleich-verschiedener-playlisten" title="Permalink to this headline">¶</a></h3>
<p>Eine <em>Playlist,</em> zu deutsch <em>Wiedergabeliste</em>, ist eine Liste einzelner
Lieder, die nacheinander abgespielt werden. Die Zusammstellung einer
Playlist erfüllt oft einen gewissen Zweck. So stellt man für gewöhnlich
Lieder in einer <em>Playlist</em> zusammen, die eine gemeinsame Stimmung oder
eine andere Gemeinsamkeit <em>(,,Favorit&quot;)</em> besitzen. Im Folgenden wird die
subjektive Qualität der Playlisten bezüglich der Ähnlichkeit der einzelnen
Stücke beurteilt.</p>
<p>In Abbildung  wird eine Auflistung verschiedener, mit
unterschiedlichen Methoden erstellter  Playlisten gegeben. Dies ist
interessant, da die Struktur der von <em>libmunin</em> gegebenen Empfehlungen gewissen
Regeln unterliegt, die man als Anwendungsentwickler kennen sollte. Zudem ist der
subjektive Vergleich mit anderen Systemen interessant.</p>
<p>Der ursprüngliche Plan, hier auch eine von <tt class="docutils literal"><span class="pre">last.fm</span></tt> <a class="reference internal" href="rst/index.html#nt" id="id14">[Link&ndash;10]</a> erstellte
Playlist zu zeigen wurde eingestellt, da man dort die Empfehlungen nicht
auf die hier verwendete Testmusiksammlung aus 666 Songs einschränken konnte.
Stattdessen wurde eine Alternative zu <em>libmunin</em> getestet: <em>Mirage</em>
<a class="reference internal" href="rst/index.html#schnitzer2007high" id="id15">[2]</a>. Da <em>Mirage</em> momentan nur als Plugin für Banshee
vorhanden ist und nicht als allgemeine Bibliothek verfügbar, wurde die
Testmusikdatenbank auch in Banshee importiert.
Die Testmusikdatenbank selbst besteht aus einigen ausgewählten Alben des Autors.
Viele allgemein gebräuchliche Genres werden dabei abgedeckt, obwohl der
Schwerpunkt beim Genre <em>Rock</em> und <em>Metal</em> liegt.
Die einzelnen Playlisten wurden auf jeweils 15 Songs begrenzt. Darin enthalten
ist an erster Stelle der willkürlich ausgewählte Seedsong, der zum
Generieren der Playlist genutzt wurde (<em>Knorkator &ndash;- Böse</em>). Die zufällig
erstellte Playlist wurde als Referenz abgedruckt, damit man die dort fehlende
Struktur sehen kann.</p>
<p><strong>Auffälligkeiten:</strong></p>
<p>Bei <em>libmunin</em> wiederholt sich der Künstler <em>Knorkator</em> alle 3&ndash;5 Stücke,
da der <em>Filter</em> entsprechend eingestellt ist. Daher ist eine Wiederholung des
Künstlers nur alle drei und eine Wiederholung des Albums nur alle fünf Stücke
erlaubt. Bei Mirage scheint lediglich eine direkte Wiederholung des Künstlers
ausgeschlossen zu sein. Ansonsten wiederholen sich die Künstler
beliebig. Die zufällige Playlist hat zwar auch keinerlei
Wiederholungen, aber entbehrt dafür auch jeglicher Struktur.</p>
<p><em>Mirage</em> leistet gute Arbeit dabei, ähnlich klingende Stücke auszuwählen. Der
tempomäßig vergleichsweise langsame Seedsong (<em>Mirage</em> besitzt hier tatsächlich ein
ähnliches Konzept) besitzt eine dunkle Stimmung und harte E&ndash;Gitarren. Die von
<em>Mirage</em> vorgeschlagenen Songs sind hier tatsächlich sehr passend zu dieser
Stimmung. Die von <em>libmunin</em> vorgeschlagenen Songs sind in Punkt
Audiodaten, bei weitem nicht so übereinstimmend. Was aber auffällig ist, ist
dass größtenteils deutsche Titel (wie der Seedsong) vorgeschlagen werden. Auch
führt das <em>Parody</em> in der Genre&ndash;Beschreibung dazu, dass ebenfalls lustig oder
ironisch gemeinte Lieder vorgeschlagen werden. Zwar ist die Stimmung im
Seedsong düster, doch wird textlich ein Thema ironisch behandelt &ndash;- was
<em>Mirage</em> an den Audiodaten natürlich nicht erkennen kann.  Hier zeigt sich
<em>libmunin's</em> (momentaner) Fokus auf Metadaten.  Bei der zufälligen Playlist
stimmen die Genres einigermaßen überein, doch liegt das eher an dem
sehr dehnbaren Begriff <em>Rock</em>, der bei
Discogs <a class="reference internal" href="rst/index.html#discogs" id="id16">[Link&ndash;7]</a> für sehr viele Lieder eingepflegt ist.</p>
<p>Der Kaltstart bei <em>Mirage</em> verlief in wenigen Minuten, während der Kaltstart
bei <em>libmunin</em> beim ersten Mal für die 666 Songs im Vergleich dazu sehr lange
(etwa 53 Minuten) benötigte. Größtenteils liegt das daran, dass für jedes Lied
ein Liedtext sequentiell automatisch besorgt wird. Siehe dazu auch
Tabelle .  Bei der Ausgabe der Empfehlungen selber, war bei
allen Methoden keinerlei Verzögerung zu beobachten.</p>
</div>
<div class="section" id="ressourcenverbrauch">
<h3>2.6 Ressourcenverbrauch<a class="headerlink" href="#ressourcenverbrauch" title="Permalink to this headline">¶</a></h3>
<p>Damit Anwendungsentwickler die Aufwändigkeit einzelner Operation einschätzen
können, wird in Tabelle  eine kurze Übersicht über den
Ressourcenverbrauch einzelner Aspekte gegeben.
Die gemessenen Werte beziehen sich stets auf die Testumgebung mit 666 Songs.</p>
<div class="figure align-center" id="table-specs">
<center><table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Operation</strong></th>
<th class="head"><strong>Ressourcenverbrauch</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>Speicherverbrauch</em></td>
<td>77,5 MB</td>
</tr>
<tr class="row-odd"><td><em>Speicherplatz der Session  (gzip&ndash;gepackt)</em></td>
<td>0,9 MB</td>
</tr>
<tr class="row-even"><td><em>Speicherplatz der Session (ungepackt)</em></td>
<td>2,5 MB</td>
</tr>
<tr class="row-odd"><td><em>Zeit für den Kaltstart</em></td>
<td>53 Minuten <em>(63% Liedtextsuche + 37% Audioanalyse)</em></td>
</tr>
<tr class="row-even"><td> <tt class="docutils literal"><span class="pre">rebuild</span></tt></td>
<td>44 Sekunden</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">add</span></tt></td>
<td>87ms</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">insert</span></tt></td>
<td>164ms</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">remove</span></tt></td>
<td>54ms</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">modify</span></tt></td>
<td>219ms</td>
</tr>
</tbody>
</table>
<p class="caption">Auflistung des Ressourcenverbrauchs verschiedener Operationen.</p>
</center></div><p id="table-specs">Wie man sieht, sollte noch unbedingt Zeit investiert werden um den <em>Kaltstart</em>
zu beschleunigen. Auch die <tt class="docutils literal"><span class="pre">modify</span></tt>&ndash;Operation könnte durchaus noch optimiert
werden. Wie allen anderen Geschwindigkeitsangaben in dieser Arbeit, beziehen
sich diese auf den Rechner des Entwicklers und sind daher nur untereinander
vergleichbar.</p>
<div class="figure align-center" id="table-playlists">
<center><table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="22%" />
<col width="23%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Nummer</strong></th>
<th class="head"><strong>Künstler</strong></th>
<th class="head"><strong>Titel</strong></th>
<th class="head"><strong>Genre</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>libmunin:</strong></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td> <em>01</em></td>
<td><em>Knorkator</em></td>
<td><em>Böse</em></td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td> <em>02</em></td>
<td>Letzte Instanz</td>
<td>Egotrip</td>
<td><em>Rock/Folk Rock, Goth Rock</em></td>
</tr>
<tr class="row-odd"><td><em>03</em></td>
<td>Nachtgeschrei</td>
<td>Lass mich raus</td>
<td><em>Rock/Folk Rock</em></td>
</tr>
<tr class="row-even"><td><em>04</em></td>
<td>Knorkator</td>
<td>Ick wer zun Schwein</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-odd"><td><em>05</em></td>
<td>Finntroll</td>
<td>Svart djup</td>
<td><em>Rock/Folk Metal, Black Metal</em></td>
</tr>
<tr class="row-even"><td><em>06</em></td>
<td>Heaven Shall Burn</td>
<td>Endzeit</td>
<td><em>Rock/Hardcore, Death Metal</em></td>
</tr>
<tr class="row-odd"><td><em>07</em></td>
<td>In Extremo</td>
<td>Liam</td>
<td><em>Rock/Medieval, Hard Rock</em></td>
</tr>
<tr class="row-even"><td><em>08</em></td>
<td>Knorkator</td>
<td>Konflikt</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-odd"><td><em>09</em></td>
<td>Letzte Instanz</td>
<td>Schlangentanz</td>
<td><em>Rock/Folk Rock, Goth Rock</em></td>
</tr>
<tr class="row-even"><td><em>10</em></td>
<td>Marc-Uwe Kling</td>
<td>Scheißverein</td>
<td><em>Folk/Parody</em></td>
</tr>
<tr class="row-odd"><td><em>11</em></td>
<td>Johnny Cash</td>
<td>Heart of Gold</td>
<td><em>Folk/Country, Rockabilly</em></td>
</tr>
<tr class="row-even"><td><em>12</em></td>
<td>Knorkator</td>
<td>Geh zu ihr</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-odd"><td><em>13</em></td>
<td>In Extremo</td>
<td>Erdbeermund</td>
<td><em>Rock/Medieval, Hard Rock</em></td>
</tr>
<tr class="row-even"><td><em>14</em></td>
<td>The Rolling Stones</td>
<td>Stealing My Heart</td>
<td><em>Rock/Pop Rock, Rock &amp; Roll</em></td>
</tr>
<tr class="row-odd"><td><em>15</em></td>
<td>Knorkator</td>
<td>Klartext</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td> <strong>Mirage:</strong></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td> <em>02</em></td>
<td>Knorkator</td>
<td>Ganz besond'rer Mann</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td><em>03</em></td>
<td>Coppelius</td>
<td>Operation</td>
<td><em>Rock/Classic, Medieval Metal</em></td>
</tr>
<tr class="row-odd"><td><em>04</em></td>
<td>Letzte Instanz</td>
<td>Salve Te</td>
<td><em>Rock/Folk Rock, Goth Rock</em></td>
</tr>
<tr class="row-even"><td><em>05</em></td>
<td>Apocalyptica</td>
<td>Fisheye</td>
<td><em>Rock/Symphonic Rock</em></td>
</tr>
<tr class="row-odd"><td><em>06</em></td>
<td>Coppelius</td>
<td>I Told You So!</td>
<td><em>Rock/Classic, Medieval Metal</em></td>
</tr>
<tr class="row-even"><td><em>07</em></td>
<td>Apocalyptica</td>
<td>Pray!</td>
<td><em>Rock/Symphonic Rock</em></td>
</tr>
<tr class="row-odd"><td><em>08</em></td>
<td>Knorkator</td>
<td>Klartext</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td><em>09</em></td>
<td>Devildriver</td>
<td>Black Soul Choir</td>
<td><em>Rock/Death Metal</em></td>
</tr>
<tr class="row-odd"><td><em>10</em></td>
<td>Finntroll</td>
<td>Fiskarens Fiende</td>
<td><em>Rock/Folk Metal, Black Metal</em></td>
</tr>
<tr class="row-even"><td><em>11</em></td>
<td>Devildriver</td>
<td>Swinging the Dead</td>
<td><em>Rock/Death Metal</em></td>
</tr>
<tr class="row-odd"><td><em>12</em></td>
<td>Knorkator</td>
<td>Es kotzt mich an</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td><em>13</em></td>
<td>Heaven Shall Burn</td>
<td>Forlorn Skies</td>
<td><em>Rock/Hardcore, Death Metal</em></td>
</tr>
<tr class="row-odd"><td><em>14</em></td>
<td>Knorkator</td>
<td>Hardcore</td>
<td><em>Rock/Parody, Heavy Metal</em></td>
</tr>
<tr class="row-even"><td><em>15</em></td>
<td>Rammstein</td>
<td>Roter Sand</td>
<td><em>Rock/Industrial, Hard Rock</em></td>
</tr>
<tr class="row-odd"><td> <strong>Zufall:</strong></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td> <em>02</em></td>
<td>Schandmaul</td>
<td>Drei Lieder</td>
<td><em>Rock/Folk Rock</em></td>
</tr>
<tr class="row-odd"><td><em>03</em></td>
<td>Tanzwut</td>
<td>Götterfunken</td>
<td><em>Electronic, Industrial</em></td>
</tr>
<tr class="row-even"><td><em>04</em></td>
<td>Finntroll</td>
<td>Suohengen sija</td>
<td><em>Ambient</em></td>
</tr>
<tr class="row-odd"><td><em>05</em></td>
<td>Biermösl Blosn</td>
<td>Anno Domini</td>
<td><em>Brass Band, Parody</em></td>
</tr>
<tr class="row-even"><td><em>06</em></td>
<td>Finntroll</td>
<td>Mordminnen</td>
<td><em>Rock/Folk Metal, Black Metal</em></td>
</tr>
<tr class="row-odd"><td><em>07</em></td>
<td>The Rolling Stones</td>
<td>Stealing My Heart</td>
<td><em>Rock/Pop Rock, Rock &amp; Roll</em></td>
</tr>
<tr class="row-even"><td><em>08</em></td>
<td>Die Ärzte</td>
<td>Ein Mann</td>
<td><em>Rock/Punk, Pop Rock</em></td>
</tr>
<tr class="row-odd"><td><em>09</em></td>
<td>Letzte Instanz</td>
<td>Regenbogen</td>
<td><em>Rock/Folk Rock, Goth Rock</em></td>
</tr>
<tr class="row-even"><td><em>10</em></td>
<td>Billy Talent</td>
<td>White Sparrows</td>
<td><em>Rock/Punk, Alternative Rock</em></td>
</tr>
<tr class="row-odd"><td><em>11</em></td>
<td>Letzte Instanz</td>
<td>Schlangentanz</td>
<td><em>Rock/Folk Rock, Goth Rock</em></td>
</tr>
<tr class="row-even"><td><em>12</em></td>
<td>Christopher Rhyne</td>
<td>Shadows of the Forest</td>
<td><em>Classical, Ambient</em></td>
</tr>
<tr class="row-odd"><td><em>13</em></td>
<td>The Beatles</td>
<td>Eight Days a Week</td>
<td><em>Pop/Rock &amp; Roll</em></td>
</tr>
<tr class="row-even"><td><em>14</em></td>
<td>Of Monsters and Men</td>
<td>From Finner</td>
<td><em>Pop/Folk, Indie Rock</em></td>
</tr>
<tr class="row-odd"><td><em>15</em></td>
<td>The Cranberries</td>
<td>Dreaming My Dreams</td>
<td><em>Rock/Alternative Rock</em></td>
</tr>
</tbody>
</table>
<p class="caption">Vergleich verschiedener, je 15 Lieder langen Playlisten.
Die Playlist im oberen Drittel wurde mittels des Seedsongs (01)
erstellt. Die im zweitem Drittel wurde mittels Mirage/Banshee
erstellt, die letzte wurde komplett zufällig generiert.</p>
</center></div><p class="rubric" id="table-playlists">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[1]</a></td><td>Etwa mit der Levenshtein&ndash;Distanzfunktion <a class="reference internal" href="rst/index.html#brill2000improved" id="id17">[3]</a> und
der Python&ndash;Bibliothek <tt class="docutils literal"><span class="pre">pyxDamerauLevenshtein</span></tt>
<a class="reference internal" href="rst/index.html#pyxdameraulevenshtein" id="id18">[Link&ndash;11]</a>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[2]</a></td><td>Die Werte der Funktion können leicht unter 0 und über 1 gehen. Um den
Begriff der Distanz einzuhalten, werden die Werte auf den Bereich
<span class="math">\([0, 1]\)</span> zugeschnitten.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[3]</a></td><td>Eine Hashtabelle ist eine Datenstruktur, die eine effiziente Abbildung
von eindeutigen Schlüsselwerten auf beliebige Werte möglich macht.
Der Aufwand für den Zugriff auf einzelne Werte ist dabei konstant.</td></tr>
</tbody>
</table>
</div>
</div>
<span id="document-rst/3_graphops/index"></span><div class="section" id="graphenoperationen">
<h2>3 Graphenoperationen<a class="headerlink" href="#graphenoperationen" title="Permalink to this headline">¶</a></h2>
<div class="section" id="einleitung">
<h3>3.1 Einleitung<a class="headerlink" href="#einleitung" title="Permalink to this headline">¶</a></h3>
<p>Eine grobe Übersicht über die einzelnen Graphenoperationen und ihrer
Zuständigkeiten wurde bereits in der Projektarbeit (<a class="reference internal" href="rst/index.html#aaa-cpahl" id="id1">[1]</a>, S.15f)
gegeben.  Im Folgenden  wird detailliert auf ihre Funktionsweise und Internas
eingegangen.</p>
<div class="section" id="rebuild-aufbau-des-graphen">
<h4>3.1.1 rebuild: Aufbau des Graphen<a class="headerlink" href="#rebuild-aufbau-des-graphen" title="Permalink to this headline">¶</a></h4>
<p>Bevor irgendeine andere Operation ausgeführt werden kann, muss mittels der
<tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation der Graph aufgebaut werden.  Aufgrund einer Komplexität
von <span class="math">\(O(n^2)\)</span> kann der Aufbau des Graphen nicht einfach durch das
Vergleichen aller Songs untereinander erfolgen. Daher muss eine Lösung mit
subquadratischen Aufwand gefunden werden.  Vorzugsweise eine, bei der der
Rechenaufwand gegen die Qualität der Approximation abgewägt werden kann.  So
kann der Nutzer entscheiden, wie lange er <em>libmunin</em> rechnen lassen will.</p>
<p>Der Ausgangszustand der <tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operationen ist eine Liste von Songs, die
vom Nutzer bereitgestellt wird. Jeder Song darin soll nun so im Graphen
platziert werden, dass er im Bestfall die ähnlichsten Songs als Nachbarn hat.</p>
<p>Jeder Song speichert seine Nachbarn mit der dazugehörigen Distanz.  Soll ein
neuer Nachbar hinzugefügt werden, so wird geprüft ob die Distanz zu diesem neuen
Song kleiner ist, als die zum schlechtesten vorhandenen Nachbar.  Ist dies der
Fall, so wird die Entfernung zu diesem schlechtesten Nachbarn <em>in eine Richtung</em>
(die Gründe hierfür werden unter <a class="reference internal" href="rst/index.html#ref-distance-add">3.1.7</a> betrachtet) gekappt.
Als Ersatz wird zu dem neuen, besseren Song, eine bidirektionale Verbindung
aufgebaut. Da die Verbindung zum schlechtesten Song nur unidirektional abgebaut
wird, ist die Anzahl der Nachbarn eines Songs nicht auf ein Maximum begrenzt,
da das Hinzufügen neuer Songs <em>,,Einbahnstraßen&quot;</em> hinterlässt. Jedes neue
Einfügen kann schließlich Einbahnstraßen hinterlassen.</p>
<p>Vielmehr handelt es sich dabei um einen Richtwert, um den sich die tatsächliche
Anzahl der Songs einpendeln wird. Momentan ist dieser Richtwert standardmäßig
auf <span class="math">\(15\)</span> gesetzt &ndash;- der durchschnittlichen Länge eines heutigen Albums
plus eins <a class="footnote-reference" href="#f1" id="id2"><sup>1</sup></a>. Dieser Wert hat sich nach einigen Tests als passabel erwiesen.
Bei zu niedrigen Werten verbinden sich die einzelnen Songs eines Albums nur
untereinander, bei zu hohen entstehen zu viele qualitativ schlechte Verbindungen
quer über den ganzen Graphen.</p>
<p>Wenn im folgenden vom <em>,,Berechnen der Distanz&quot;</em> gesprochen wird, so ist damit
auch das Hinzufügen der Distanz zwischen beiden Songs gemeint.</p>
<div class="figure compound align-center" id="fig-windows">
<div style="width: 50%" class="subfigure align-center" id="fig-window-sliding">
<a class="reference internal image-reference" href="../../_images/sliding_window.svg"><img alt="Schematische Darstellung des sliding_window" src="../../_images/sliding_window.svg" width="100%" /></a>
<p class="caption">Darstellung des sliding_window.</p>
</div>
<div style="width: 50%" class="subfigure align-center" id="fig-window-centering">
<a class="reference internal image-reference" href="../../_images/centering_window.svg"><img alt="Schematische Darstellung des centering_window" src="../../_images/centering_window.svg" width="100%" /></a>
<p class="caption">Darstellung des centering_window.</p>
</div>
<div style="width: 50%" class="subfigure align-center" id="fig-window-anti-centering">
<a class="reference internal image-reference" href="../../_images/anti_centering_window.svg"><img alt="Schematische Darstellung des anti_centering_window" src="../../_images/anti_centering_window.svg" width="100%" /></a>
<p class="caption">Darstellung des anti_centering_window.</p>
</div>
<p class="caption">Schematische Darstellungen der einzelnen Basisiterationen. Es werden jeweils
drei Iterationen in einem Bild dargestellt. Das Fenster in der ersten
Iteration ist dabei jeweils grün, in der zweiten gelb und in der letzten rot
dargegestellt. Die Zahlen repräsentieren einzelne Songs.</p>
</div><p id="fig-windows">Im Folgenden werden die drei Schritte der <tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation genauer
beleuchtet:</p>
<ul>
<li><p class="first"><strong>Basisiteration:</strong> Für jeden Song wird nach willkürlich festgelegten
Prinzipien eine kleine Menge von möglicherweise ähnlichen Songs ausgewählt.
Diese Menge von Songs wird untereinander mit quadratischen Aufwand verglichen.
Diese Vorgehensweise wird mehrmals mit verschiedenen Methoden wiederholt. Das
Ziel jeder dieser Iterationen ist es, für einen Song zumindest eine kleine
Anzahl von ähnlichen Songs zu finden. Basierend auf diesen wird in den
nächsten Schritten versucht, die Anzahl ähnlicher Songs zu vergrößern.</p>
<p>Momentan sind drei verschiedene Iterationsstrategien implementiert. Jede
basiert auf gewissen heuristischen Annahmen, die über die Eingabemenge gemacht
werden (siehe auch Abbildung ):</p>
<blockquote>
<div><ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">sliding_window:</span></tt> Schiebt ein <em>,,Fenster&quot;</em> über die Liste der Songs.
Alle Songs innerhalb des Fensters werden untereinander verglichen.  Die
Fenstergröße ist dabei konfigurierbar und ist standardmäßig auf 60
eingestellt, da sich diese Größe nach einigen Tests als guter Kompromiss
zwischen Qualität und Geschwindigkeit herausgestellt hat.  Bei jeder
Iteration wird das Fenster um ein Drittel der Fenstergröße
weitergeschoben.  Dadurch entsteht eine <em>,,Kette&quot;</em> von zusammenhängenden
Songs.</p>
<p>Die heuristische Annahme ist dabei, dass der Nutzer der Bibliothek seine
Datenbank meist nach Alben sortiert eingibt. Durch diese Sortierung finden
sich innerhalb eines Fensters oft Lieder desselben Albums &ndash;- diese  sind
oft sehr ähnlich.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">centering_window:</span></tt> Basiert ebenfalls auf einem Fenster. Im Gegensatz
zum obigen <tt class="docutils literal"><span class="pre">sliding_window</span></tt> besteht das Fenster allerdings aus zwei
Hälften, wobei die eine vom Anfang an startet und die andere Hälfte von
der Mitte aus bis zum Ende geschoben wird. Die Songs in beiden Hälften
werden analog zu oben untereinander verglichen.
Auch hier wird das Fenster immer zu einem Drittel der Fenstergröße
weitergeschoben.</p>
<p>Die heuristische Annahme ist hier, dass in der bereits vorhandenen
<em>,,Kette&quot;</em> Querverbindungen hergestellt werden. Dies ist im folgenden
Verfeinerungsschritt vorteilhaft um Iterationen einzusparen.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">anti_centering_window:</span></tt> Sehr ähnlich zum <tt class="docutils literal"><span class="pre">centering_window</span></tt>. Statt
die zwei Hälften von der Mitte aus bis zum Ende weiter zu schieben,
wird diese vom Ende zur Mitte geschoben. So werden die beiden Hälften
solange weiter geschoben, bis sie sich in der Mitte treffen.
Auch hier sollen weitere Querverbindungen hergestellt werden.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Verfeinerung:</strong> Um den momentan sehr grob vernetzten Graphen benutzbar zu
machen, sollten einige Iterationen zur <em>,,Verfeinerung&quot;</em> durchgeführt werden
(eine Gegenüberstellung von Vorher und Nachher wird im Anhang unter Abb.
 gezeigt).
Dabei wird über jeden Song im Graphen iteriert und dessen <em>indirekte Nachbarn</em>
(also die Nachbarn der direkten Nachbarsongs) werden mit dem aktuellen Song
verglichen. Kommen dabei Distanzen zustande, die niedriger sind als die der
aktuellen Nachbarn, wird der indirekte Nachbar zum direkten Nachbarn. Auf
diese Weise nähern sich ähnliche Songs immer weiter an.
Diese Vorgehensweise wird solange wiederholt, bis nur noch eine geringe Anzahl
von Songs <em>,,bewegt&quot;</em> wird oder bis eine maximale Anzahl von Iterationen
erreicht ist. Die Begrenzung der Iterationen ist nötig, da es Fälle geben
kann, in denen einzelne Songs immer wieder zwischen zwei gleich guten
Zuständen hin- und herspringen können.</p>
<p>Als zusätzliche Optimierung werden nicht alle indirekten Nachbarn betrachtet,
sondern nur diese, zu denen der Weg eine <em>Mindestdistanz</em> nicht überschreitet.
Diese Mindestdistanz wird beim Start auf <span class="math">\(2,0\)</span> (da ja die Distanz über
zwei Kanten gemessen wird) gesetzt und während der folgenden Iterationen immer
weiter abgesenkt.</p>
<p>Die Gesetzmäßigkeit, nach der die Mindesdistanz immer weiter abgesenkt wird,
berechnet sich dabei aus dem arithmetischen Mittelwert der bis dahin
berechneten Distanzen. Ist der Mittelwert hoch, so ist die Absenkung klein.</p>
</li>
<li><p class="first"><strong>Aufräumarbeiten:</strong> Nach dem Verfeinerungsschritt wird der Graph von
Einbahnstraßen durch einen <tt class="docutils literal"><span class="pre">fixing</span></tt>&ndash;Schritt bereinigt und auf Konsistenz
geprüft.</p>
</li>
</ul>
<p>Wie bereits erwähnt, gibt es eine <tt class="docutils literal"><span class="pre">rebuild_stupid</span></tt>&ndash;Operation, die für
deutlich kleinere Mengen von Songs praktikabel einsetzbar ist. Die Algorithmik
ist hierbei bedeutend einfacher: Es wird einfach jeder Song mit jedem anderen
verglichen. Als Nachbarn erhält dabei jeder Song die Nachbarn, die global
betrachtet, die kleinste Distanz zu diesem besitzen. Es handelt sich also um
keine Approximation wie beim herkömmlichen <tt class="docutils literal"><span class="pre">rebuild</span></tt>.</p>
<p>Auf die Betrachtung der Komplexität der <tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation, wird an dieser
Stelle verzichtet. Keine der einzelnen Schritte erreicht dabei quadratische
Komplexität. Die einzige Ausnahme ist dabei, das Vergleichen der Songs
untereinander innerhalb eines Fensters, allerdings ist dabei  die Fenstergröße
stets auf ein verträgliches Limit begrenzt.</p>
<p>Unter Abbildung  findet sich eine Gegenüberstellung von den
Aufrufen der Distanzfunktion, die bei <tt class="docutils literal"><span class="pre">rebuild_stupid</span></tt> und beim normalen
<tt class="docutils literal"><span class="pre">rebuild</span></tt> (mit und ohne <em>Verfeinerungsschritt</em>) nötig sind.</p>
<p>Die einzelnen Schritte des Graphenaufbaus lassen sich in Abbildung
, sowie bei den darauf folgenden Abbildungen,
nachvollziehen.</p>
<div class="figure align-center" id="fig-speed-cmp">
<a class="reference internal image-reference" href="../../_images/graph_speed.svg"><img alt="Vergleich der Distanzberechnungen für rebuild_stupid und rebuild" src="../../_images/graph_speed.svg" width="100%" /></a>
<p class="caption">Gegenüberstellung von verschiedenen Arten der rebuild&ndash;Operation. Auf der
Y&ndash;Achse ist logarithmisch die Anzahl der Distanzberechnungen aufgetragen,
auf der X&ndash;Achse die lineare Anazhl der Eingabesongs. Die blaue Kurve
repräsentiert dabei die Vergleiche die für rebuild_stupid notwendig sind.
Wie man sieht, übersteigen diese, bis auf dem Gleichheitsbereich am Anfang,
die anderen zwei Kurven deutlich.</p>
</div>
</div>
<div class="section" id="fixing-umbauen-von-einbahnstraszen">
<h4>3.1.2 fixing: Umbauen von Einbahnstraßen<a class="headerlink" href="#fixing-umbauen-von-einbahnstraszen" title="Permalink to this headline">¶</a></h4>
<p>Diese Operation dient dem Entfernen von Einbahnstraßen innerhalb des Graphen.
Einbahnstraßen können, wie bereits erwähnt, beim Hinzufügen neuer Distanzen
entstehen.</p>
<p>Beim Entfernen wird folgendermaßen vorgegangen: Im ersten Schritt werden alle
unidirektionalen Kanten gefunden und abgespeichert. Für jede dieser Kanten wird
überprüft, ob die Songs an beiden Enden, den Richtwert für die Anzahl der Nachbarn
überschreiten. Sollte das nicht der Fall sein, so wird die Kante in eine
bidirektionale Kante umgebaut. Andernfalls wird die Kante gelöscht.</p>
<p>Dieses Vorgehen wurde gewählt, weil es nach einigen Versuchen schwierig erschien,
den Graphen ohne Einbahnstraßen aufzubauen, ohne dass dieser zur Inselbildung
neigt. Durch den nachgelagerten <tt class="docutils literal"><span class="pre">fixing</span></tt>&ndash;Schritt werden Songs, die nur wenige
Nachbarn besitzen, durch die vorher als zu schlecht bewerteten Kanten verbunden.
Als zusätzliche Konsistenzprüfung wird nach dem Bereinigen geprüft, ob alle
Verbindungen im Graphen bidirektional sind. Sollten unidirektionale Kanten
gefunden werden, so wird eine Warnung auf der Konsole ausgegeben. Eine weiterführende
Fehlerbehandlung ist momentan noch nicht implementiert. Unidirektionale Kanten
können bei der Traversierung zu Ausnahmefehlern führen.</p>
</div>
<div class="section" id="add-hinzufugen-von-songs-vor-dem-rebuild">
<h4>3.1.3 add: Hinzufügen von Songs vor dem <tt class="docutils literal"><span class="pre">rebuild</span></tt><a class="headerlink" href="#add-hinzufugen-von-songs-vor-dem-rebuild" title="Permalink to this headline">¶</a></h4>
<p>Diese Operation benötigt als Argument eine Hashtabelle mit einer Abbildung von
Attributen auf Werte. Diese Werte werden dann durch verschiedene Provider
normalisiert. Mit diesen normalisierten Informationen, wird dann eine neue
Song&ndash;Instanz erzeugt, welcher beim Erzeugen, ein eindeutiger Identifier
zugewiesen wird. Dieser Identifier dient dann als Index in der internen
Songliste.  Statt wie <tt class="docutils literal"><span class="pre">insert</span></tt>, bereits Verbindungen zu anderen Songs
herzustellen, fügt diese Operation lediglich einen Song der internen Songliste
hinzu. Die eigentlichen Verbindungen werden in einem Rutsch von <tt class="docutils literal"><span class="pre">rebuild</span></tt>
aufgebaut.</p>
<div class="figure compound align-center" id="fig-mini-graph-remove">
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-remove-before">
<a class="reference internal image-reference" href="../../_images/mini_graph_remove_before.png"><img alt="../../_images/mini_graph_remove_before.png" src="../../_images/mini_graph_remove_before.png" style="width: 50%;" /></a>
<p class="caption">Vor der remove&ndash;Operation.</p>
</div>
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-remove-after">
<a class="reference internal image-reference" href="../../_images/mini_graph_remove_after.png"><img alt="../../_images/mini_graph_remove_after.png" src="../../_images/mini_graph_remove_after.png" style="width: 50%;" /></a>
<p class="caption">Nach der remove&ndash;Operation.</p>
</div>
<p class="caption">Vor () und nach
() der remove&ndash;Operation.
Es wurde der mittlere Punkt in  gelöscht.
Daher haben sicht alle anderen Knoten einen anderen Nachbarn gesucht.</p>
<span class="target" id="fig-mini-graph-remove"></span></div><div class="figure compound align-center" id="fig-mini-graph-insert">
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-insert-before">
<a class="reference internal image-reference" href="../../_images/mini_graph_insert_before.png"><img alt="../../_images/mini_graph_insert_before.png" src="../../_images/mini_graph_insert_before.png" style="width: 50%;" /></a>
<p class="caption">Vor der insert&ndash;Operation.</p>
</div>
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-insert-after">
<a class="reference internal image-reference" href="../../_images/mini_graph_insert_after.png"><img alt="../../_images/mini_graph_insert_after.png" src="../../_images/mini_graph_insert_after.png" style="width: 50%;" /></a>
<p class="caption">Nach der insert&ndash;Operation.</p>
</div>
<p class="caption">Vor () und nach
() der insert&ndash;Operation. Es wurde
einfach ein weiterer Punkt in den Graphen eingefügt. Dieser hat sich mit
allen anderen verbunden.</p>
<span class="target" id="fig-mini-graph-insert"></span></div><div class="figure compound align-center" id="fig-mini-graph-modify">
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-modify-before">
<a class="reference internal image-reference" href="../../_images/mini_graph_modify_before.png"><img alt="../../_images/mini_graph_modify_before.png" src="../../_images/mini_graph_modify_before.png" style="width: 60%;" /></a>
<p class="caption">Vor der modify&ndash;Operation.</p>
</div>
<div style="width: 49%" class="subfigure align-center" id="fig-mini-graph-modify-after">
<a class="reference internal image-reference" href="../../_images/mini_graph_modify_after.png"><img alt="../../_images/mini_graph_modify_after.png" src="../../_images/mini_graph_modify_after.png" style="width: 60%;" /></a>
<p class="caption">Nach der modify&ndash;Operation.</p>
</div>
<p class="caption">Vor () und nach
() der modify&ndash;Operation.
Es wurden jeweils die Mittelknoten der beiden Inseln mit einem höhren Rating
,,modifiziert”. Dadurch verbinden sich beide und verlieren dafür eine andere
Verbindung jeweils.</p>
<span class="target" id="fig-mini-graph-modify"></span></div></div>
<div class="section" id="remove-loschen-von-songs-zur-laufzeit">
<h4>3.1.4 remove: Löschen von Songs zur Laufzeit<a class="headerlink" href="#remove-loschen-von-songs-zur-laufzeit" title="Permalink to this headline">¶</a></h4>
<p>Um nach einer <tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation einen Song aus dem Graphen zu löschen,
müssen alle Verbindungen zu diesem entfernt werden.  Um dabei eine Bildung von
Inseln (durch das Entfernen von Verbindungen) zu vermeiden, werden alle
ursprünglichen Nachbarn des zu entfernenden Songs untereinander verbunden. Dabei
wird nach folgendem Schema vorgegangen: Zuerst wird temporär für jeden Nachbarn,
der Richtwert für die Anzahl der Nachbarn um eins erhöht. Im Anschluss wird die
Menge aller Nachbarn untereinander mit quadratischem Aufwand verglichen. Dadurch
bekommt jeder Nachbar, im besten Fall, eine neue Verbindung.  Abschließend
werden alle Verbindungen zum zu löschenden Song entfernt und der Richtwert wird
wieder um eins dekrementiert.</p>
<p>Da <em>libmunin</em> alle Songs in einer linearen Liste hält, muss auch dort der Song
gelöscht werden. Da der Index des Songs in der Liste gleich des <em>Identifiers</em>
des Songs ist, wird an dessen Stelle ein leerer Wert geschrieben. Damit dieser
möglichst bald wieder besetzt werden kann, wird der gelöschte
<em>Identifier&ndash;Index</em> in einer sogenannten <em>Revocation</em>&ndash;Liste gespeichert. Beim
nächsten <tt class="docutils literal"><span class="pre">add</span></tt> oder <tt class="docutils literal"><span class="pre">insert</span></tt> wird dieser <em>Identifier</em> dann wiederverwendet.
Dieses Verfahren soll eine Fragmentierung der Song&ndash;Liste nach vielen
<tt class="docutils literal"><span class="pre">remove</span></tt>&ndash;Operation vermeiden.</p>
</div>
<div class="section" id="insert-hinzufugen-von-songs-zur-laufzeit">
<span id="ref-graphop-insert"></span><h4>3.1.5 insert: Hinzufügen von Songs zur Laufzeit<a class="headerlink" href="#insert-hinzufugen-von-songs-zur-laufzeit" title="Permalink to this headline">¶</a></h4>
<p>Diese Operation ist äquivalent zur <tt class="docutils literal"><span class="pre">add</span></tt>&ndash;Operation. Als Erweiterung fügt
<tt class="docutils literal"><span class="pre">insert</span></tt> allerdings den, durch <tt class="docutils literal"><span class="pre">add</span></tt> erzeugten Song auch in den Graphen ein
und verbindet ihn dort. Dazu muss zuerst ein Punkt gefunden werden, an dem der
Song passend zu seinen Attributen <em>eingepasst</em> werden kann.</p>
<p>Diese Einpassung geschieht dabei folgendermaßen:</p>
<ul>
<li><p class="first"><strong>Basisiteration:</strong> Es wird mit einer gewissen <em>Schrittweite</em> über die
Songliste iteriert. Dabei werden die Distanzen vom momentan aktuellen Song zum
einzufügenden Song berechnet. Dadurch wird der Song bereits mit einigen
anderen Songs verknüpft.  Die Größe der Schrittweite ist dabei abhängig von
der Länge der Songliste.  Je länger die Liste ist, desto größer ist die
Schrittweite.  Exakt ist sie dabei folgendermaßen definiert:</p>
<div class="math">
\[Schrittweite = \lceil\log_{10}songlist\_length\rceil\]</div>
</li>
<li><p class="first"><strong>Verfeinerung:</strong> Songs, zu denen im vorigen Schritt eine geringe Distanz
gefunden wurde, werden nun detaillierter betrachtet. Dazu wird die Distanz zu
den Nachbarn dieser <em>guten</em> Songs berechnet. Dies geschieht unter der
Annahme, dass die indirekten Nachbarn des einzufügenden Songs auch
als potenzielle direkte Nachbarn geeignet sind.</p>
</li>
</ul>
</div>
<div class="section" id="modify-verandern-der-songattribute-zur-laufzeit">
<h4>3.1.6 modify: Verändern der Songattribute zur Laufzeit<a class="headerlink" href="#modify-verandern-der-songattribute-zur-laufzeit" title="Permalink to this headline">¶</a></h4>
<p>Diese Operation dient als Komfortfunktion. Sie ermöglicht das Verändern der
Attribute, beziehungsweise deren zugeordneten Werte eines einzelnen Songs.
Würde man die Werte eines Songs manuell verändern, so müsste man alle Distanzen
zu diesem Song neu berechnen. Da dies wiederum Veränderungen im ganzen Graphen
hervorrufen könnte, wurden die Song&ndash;Instanzen unveränderbar <em>(,,Immutable&quot;)</em>
gemacht.</p>
<p>Die <tt class="docutils literal"><span class="pre">modify</span></tt>&ndash;Operation umgeht dieses Problem, indem es den Song erst durch ein
<tt class="docutils literal"><span class="pre">remove</span></tt> entfernt und eine Kopie des ursprünglichen Songs herstellt. In dieser
werden die neuen Werte gesetzt. Dieser neue, noch unverbundene Song, wird dann
mittels einer <tt class="docutils literal"><span class="pre">insert</span></tt>&ndash;Operation in den Graphen eingepasst.</p>
<p>Aufgrund dieser Abfolge unterschiedlicher Operation, ist <tt class="docutils literal"><span class="pre">modify</span></tt> um ein
Vielfaches aufwendiger (siehe dazu auch Tabelle ).  Es wird
empfohlen, diese Operation nur für einzelne Song jeweils einzusetzen. Sollte ein
bestimmtes Attribut in allen Songs geändert werden, so ist eher eine
<tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation zu empfehlen.</p>
</div>
<div class="section" id="ablauf-beim-hinzufugen-einer-distanz">
<span id="ref-distance-add"></span><h4>3.1.7 Ablauf beim Hinzufügen einer Distanz<a class="headerlink" href="#ablauf-beim-hinzufugen-einer-distanz" title="Permalink to this headline">¶</a></h4>
<p>Wie bereits erwähnt, speichert jeder Song eine Hashtabelle mit den jeweiligen
Songs, zu denen er eine Verbindung hält, als Schlüssel und der Distanz als Wert.
Um diese Hashtabelle zu füllen, ist eine Methodik nötig, die sich nach näherer
Betrachtung als schwierig zu implementieren erwies. Tatsächlich
wurden an die zwei Wochen mit unterschiedlichen Herangehensweisen verbracht.</p>
<p>Die Anzahl von Nachbarn pro Song sollte sich um einen gewissen <em>Richtwert</em>
einpendeln, den man konfigurieren kann. Daraus folgt, dass bei zu vielen
Nachbarn der schlechteste Nachbar entfernt werden muss. Der anfängliche
Versuch, die Verbindung zwischen den beiden Songs komplett zu löschen hatte aber
ein gewichtiges Problem: Die Inseln im Graphen, die jeweils ein Album
repräsentierten, haben sich nur untereinander verbunden. Verbindungen dazwischen
wurden immer wieder als der <em>schlechteste Nachbar</em> erkannt und entfernt. Daher
neigt der entstehende Graph stark zur Inselbildung und Bildung von starken
Clustern.</p>
<p>Die momentane Lösung ist dabei, dass der schlechteste Nachbar eine
unidirektionale Verbindung zu seinem ursprünglichen Partner aufrecht erhält. Die
Verbindung wird nicht bidirektional gelöscht. Der Trick ist dabei: Bei der
<tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation werden diese <em>Einbahnstraßen</em> immer noch von einer Seite
als Nachbarn erkannt. So kann insbesondere der <em>Verfeinerungsschritt</em> gut
zueinander passende Songs näher aneinander ziehen. Nach dem <tt class="docutils literal"><span class="pre">rebuild</span></tt> werden
übrig gebliebene Einbahnstraßen in normale Verbindungen umgebaut oder, falls
beide Enden der Verbindung bereits <em>,,voll&quot;</em> sind, gelöscht. So bleiben Songs,
zu denen kein passender Partner gefunden wurde, mit dem Rest des Graphen
verbunden.</p>
<p>Dieses Vorgehen bringt aber einige algorithmische Probleme mit sich: Das
Finden des schlechtesten Nachbarn würde jeweils linearen Aufwand zum Iterieren
über die Hashtabelle erfordern.  Zwar kann dann die schlechteste Distanz und der
dazugehörige Song zwischengespeichert werden, doch nach einigen Tests stellte
sich heraus, dass in den meisten Fällen ein neuer, schlechtester Song gesucht
werden muss. Das ist damit zu erklären, dass gegen Ende der
<tt class="docutils literal"><span class="pre">rebuild</span></tt>&ndash;Operation tendenziell immer niedrigere Distanzen gefunden werden
&ndash;- womit immer wieder der schlechteste Song herausgelöscht werden muss.</p>
<p>Der momentane Ansatz speichert pro Song, neben der Hashtabelle mit den
Distanzen, auch einen Heap (vergleiche <a class="reference internal" href="rst/index.html#knuth2011art" id="id3">[4]</a>, S.144&ndash;155) als
<em>,,Lookup&ndash;Hilfe&quot;</em>.  In diesem werden, entgegen der prinzipbedingten Unordnung
in einer Hastabelle, die zuletzt hinzugefügten Paare aus Distanzen und Songs
partiell sortiert mit einem Aufwand von <span class="math">\(O(\log n)\)</span> abgelegt. Bei einem
Heaps ist dabei der Wurzelknoten immer das Element mit der größten
Distanz.  Ist es dann nötig, eine neue, schlechteste Distanz zu finden, so kann
mit einem Aufwand von <span class="math">\(O(\log n)\)</span> das oberste Paar herausgenommen werden.
Der Heap wird dann so umgebaut, dass das nächstschlechteste Paar zum neuen
Wurzelknoten wird.</p>
<p>Die <tt class="docutils literal"><span class="pre">distance_add()</span></tt>&ndash;Funktion nimmt drei Parameter. Die ersten zwei sind die
Songs (im Folgenden <em>self</em> und <em>other</em>), zwischen denen eine Verbindung hergestellt
werden soll. Der Letzte, ist die Distanz mit der diese Kante gewichtet wird.  Im
Folgenden ist der dazugehörige Python&ndash;Code in gekürzter, vereinfachter Form als
Referenz gegeben:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">distance_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">distance</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Füge eine Kante zwischen zwei Songs mit einer Distanz hinzu.</span>

<span class="sd">    self, other: Die beiden Songs zwischen denen die Kante hergestellt werden soll.</span>
<span class="sd">    distance: Die Distanz dieser Kante.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c"># Selbe Referenz! Kann Endlosschleifen verursachen.</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">worst_cache</span> <span class="o">&lt;</span> <span class="n">distance</span> <span class="ow">and</span> <span class="n">song</span><span class="o">.</span><span class="n">is_full</span><span class="p">():</span>
        <span class="k">return</span>  <span class="c"># worst_cache ist die gespeicherte schlechteste Distanz oder None.</span>

    <span class="k">if</span> <span class="n">other</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="n">other</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">distance</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c"># Distanz zu diesem Song war bereits vorhanden und besser.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">worst_cache</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="n">other</span><span class="p">]</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>
        <span class="k">return</span>  <span class="c">#  Da other bereits enthalten: Einfach updaten.</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_full</span><span class="p">():</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>  <span class="c"># Finde den schlechtesten Nachbarn der noch valide ist.</span>
            <span class="n">worst_dist</span><span class="p">,</span> <span class="n">worst_song</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">heap</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c"># Wurzelknoten</span>
            <span class="k">if</span> <span class="n">worst_song</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">heappop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heap</span><span class="p">)</span>  <span class="c"># Probiere nächstes Element.</span>

        <span class="k">if</span> <span class="n">worst_dist</span> <span class="o">&lt;</span> <span class="n">distance</span><span class="o">.</span><span class="n">distance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">worst_cache</span> <span class="o">=</span> <span class="n">worst_dist</span>
            <span class="k">return</span>

        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="n">worst_song</span><span class="p">]</span>
        <span class="n">heappop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heap</span><span class="p">)</span>

    <span class="c"># Füge neue Kante in die Hashtabellen ein:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="n">other</span><span class="p">]</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">dist_dict</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>

    <span class="c"># Speichere die Paare im Heap ab:</span>
    <span class="n">heappush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">heap</span><span class="p">,</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="n">other</span><span class="p">))</span>
    <span class="n">heappush</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">heap</span><span class="p">,</span> <span class="p">(</span><span class="n">distance</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">worst_cache</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c"># Hat sich möglicherweise geändert.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="graphentraversierung">
<h3>3.2 Graphentraversierung<a class="headerlink" href="#graphentraversierung" title="Permalink to this headline">¶</a></h3>
<p>Um nun tatsächlich Empfehlungen abzuleiten, muss der Graph traversiert werden.
Je nach Art der Anfrage werden ein oder mehrere <em>Zentren</em> für eine
Breitensuche, sogenannte <em>Seedsongs</em>, ausgewählt. Bei einfachen Anfragen
in der Art <em>,,Gib 10 ähnliche zu Song X aus&quot;</em>, kann einfach der Song <em>X</em> als
Seedsong angenommen werden.  Komplexere Anfragen benötigen allerdings mehr als
einen Seedsong:</p>
<ul class="simple">
<li><em>,,Gib 10 Songs aus, die ein Genre ähnlich Y haben&quot;</em></li>
<li><em>,,Empfiehl mir 10 Songs basierend auf dem Nutzerverhalten</em>&quot;</li>
</ul>
<div class="section" id="empfehlungsiteratoren">
<h4>3.2.1 Empfehlungsiteratoren<a class="headerlink" href="#empfehlungsiteratoren" title="Permalink to this headline">¶</a></h4>
<p>In allen Fällen wird jedoch von einem Seedsong aus eine Breitensuche gestartet.
Statt diese Breitensuche <em>sofort</em> auszuführen, wird jeweils nur ein
Iterator bereitgestellt, welcher immer nur eine Empfehlung generiert.
Als Iterator wird bei <em>libmunin</em> ein Objekt bezeichnet, der einen internen
Zustand besitzt und bei einer Anfrage immer einen neuen Wert liefert. Sind keine
weiteren Werte mehr zu erwarten, so wird ein spezieller leerer Wert
zurückgegeben.  In der Softwareentwicklung wird er oft dazu genutzt um über die
Elemente einer Menge zu traversieren. Hier werden Iteratoren dazu genutzt erst
beim jeweiligen Aufruf jeweils eine Empfehlung dynamisch zu generieren.</p>
<p>Dieses Konzept ist sehr nützlich beim Filtern der generierten Empfehlungen.
Denn man weiß im Vornherein nicht, wieviele Empfehlungen ausgefiltert werden. So
kann der Iterator einfach so lange bemüht werden, bis die gewünschte Anzahl an
Empfehlungen generiert worden ist.</p>
<p>Sollten mehrere Seedsongs vorhanden sein, so wird einfach für jeden ein
Breitensuche&ndash;Iterator erstellt. Dieser liefert erst den Seedsong, dann den
besten Nachbarn, dann den nächst schlechteren Nachbarn und später geht es mit den
indirekten Nachbarn weiter.  Diese Liste von Iteratoren wird dann im
Round&ndash;Robin&ndash;Verfahren ineinander verwebt. Dabei wird erst der erste Iterator
in der Liste genutzt, dann der nächste. Ist man am Ende der Liste, so wird von
vorne begonnen.
Der daraus entstehende Iterator wird dann dem Nutzer der Bibliothek
bereitgestellt. Wird ein Element aus diesem obersten Iterator genommen, so hat
das ein <em>,,Nachrutschen&quot;</em> von Iteratoren zur Folge. Diese Hierarchie von
Iteratoren ist in Abbildung  gezeigt.</p>
<div class="figure align-center" id="fig-iterator">
<a class="reference internal image-reference" href="../../_images/iterator.svg"><img alt="Traversierung durch verschachtelte Iteratoren" src="../../_images/iterator.svg" width="72%" /></a>
<p class="caption">Traversierung durch verschachtelte Iteratoren. Jedes Kästchen ist ein
Iterator.  Zieht der Nutzer einen Song aus dem obersten Iterator, so löst das
eine ,,Lawine” von Iterationsschritten aus. Dabei werden die einzelnen
Schritte ,,fair” via einem Round&ndash;Robin&ndash;Verfahren auf die einzelnen
Seed&ndash;Songs aufgeteilt.</p>
</div>
</div>
<div class="section" id="anwendung-von-regeln">
<span id="ref-graphops-rules"></span><h4>3.2.2 Anwendung von Regeln<a class="headerlink" href="#anwendung-von-regeln" title="Permalink to this headline">¶</a></h4>
<p>Die Assoziationsregeln, die beim impliziten Lernen entstehen, werden bei der
Traversierung als <em>,,Navigationshilfe&quot;</em> genutzt.  In Abbildung
 wird gezeigt, dass jedem Seedsong jeweils eine Breitensuche
und eine Menge von <em>Regeliteratoren</em> unterstellt sind.  <em>Libmunin</em> bietet einen
Mechanismus, um alle Regeln abzufragen, die einen bestimmten Song betreffen. Für
jeden Song, der auf der <em>anderen</em> Seite der Regel vorkommt (also die Seite, in
der nicht der Seedsong vorhanden ist), wird ein Breitensucheniterator erstellt.
<br /> Die einzelnen, den Regeln zugeordneten Iteratoren, werden wieder im
Round&ndash;Robin&ndash;Verfahren abgewechselt. Der dadurch entstehende Iterator wird
immer im Wechsel mit dem Breitensucheniterator, der vom Seedsong ausgeht,
abgefragt.  Daher besteht der Iterator für einen Seedsong aus vielen
Unteriteratoren.</p>
</div>
<div class="section" id="filtern-der-iteratoren">
<h4>3.2.3 Filtern der Iteratoren<a class="headerlink" href="#filtern-der-iteratoren" title="Permalink to this headline">¶</a></h4>
<p>Da Alben im Graphen eng beieinander gepackt sind, werden ohne zusätzliches
Filtern natürlich auch Songs vom gleichen Album oder vom gleichen Künstler
geliefert. Dies ist für gewöhnlich nicht erwünscht &ndash;- man möchte ja neue Musik
entdecken, die nicht immer vom selben Künstler kommt. Der optionale
Filterschritt (oder <em>Sieving</em>&ndash;Schritt), dient dazu diese unerwünschten Songs
herauszufiltern.</p>
<p>Um dieses Ziel zu erfüllen, werden die <span class="math">\(20\)</span> letzten Empfehlungen
gespeichert, die von <em>libmunin</em> ausgegeben werden. War der Künstler einer zu
überprüfenden Empfehlung in den, beispielsweise fünf letzten Empfehlungen
bereits vorhanden, so wird er ausgesiebt. Ähnlich wird mit dem Album
vorgegangen, nur hier ist die Schwelle standardmäßig bei drei. Die einzelnen
Schwellen können vom Nutzer, pro Attribut, konfiguriert werden. <br /> Auch das
<em>Sieving</em> ist als Iterator implementiert, welcher Songs von einem
Empfehlungsiterator entgegennimmt, aber nicht alle an den Nutzer weitergibt. Die
vom Iterator übergangenen Songs, werden für den nächsten Iterationsschritt
zwischengespeichert, um sie vorzuschlagen, sobald sie wieder erlaubt sind.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Bestimmt an der persönlichen Sammlung des Autors. Bei 1590 einzelnen
Alben ist dieser Wert etwa <span class="math">\(14,142\)</span>.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-rst/4_provider/index"></span><div class="section" id="algorithmen-bei-providern">
<h2>4 Algorithmen bei Providern<a class="headerlink" href="#algorithmen-bei-providern" title="Permalink to this headline">¶</a></h2>
<div class="section" id="einleitung">
<h3>4.1 Einleitung<a class="headerlink" href="#einleitung" title="Permalink to this headline">¶</a></h3>
<p>Im Folgenden werden einige ausgewählte Paare aus Providern und
Distanzfunktionen näher betrachtet. Nicht alle vorhandenen und in der
Projektarbeit (<a class="reference internal" href="rst/index.html#aaa-cpahl" id="id1">[1]</a>, S.28ff) vorgestellten Provider werden erläutert, dies
würde auch den Umfang dieser Arbeit übersteigen. Zudem sind die meisten Provider
eher einfacher Natur &ndash;- die Lektüre des jeweiligen Quelltextes sagt oft mehr
als ein separate Erklärung.  Daher werden im Folgenden nur die stark
erklärungsbedürftigen Paare näher betrachtet.</p>
</div>
<div class="section" id="genrenormalisierung-und-vergleich-von-genres">
<h3>4.2 Genrenormalisierung und Vergleich von Genres<a class="headerlink" href="#genrenormalisierung-und-vergleich-von-genres" title="Permalink to this headline">¶</a></h3>
<p>Der Vergleich einzelner Genres ist eine schwierige Angelegenheit, da es,
zumindest im Bereich der Musik, keine standardisierte Einteilung von Genres
gibt. Oft sind sich nicht mal Menschen untereinander einig, zu welchem Genre das
Album eines Künstlers zuzuteilen ist. Manchmal sind sich nicht mal die
Mitglieder einer Band untereinander einig.  Ein Computer könnte höchstens
erkennen, wie ähnlich zwei Genrebeschreibungen als Zeichenketten sind. Daher ist
es nötig, dass die einzelnen Genre&ndash;Eingaben anhand einer Sammlung, von
zusammengestellten geläufigen, Genres normalisiert werden.</p>
<div class="section" id="zusammenstellung-der-genredatenbank">
<h4>4.2.1 Zusammenstellung der Genredatenbank<a class="headerlink" href="#zusammenstellung-der-genredatenbank" title="Permalink to this headline">¶</a></h4>
<p>Musikrichtungen können, wie in einem Baum, in Genres (<em>rock</em>, <em>pop</em>), Untergenres
(<em>country</em> rock, <em>japanese</em> pop), Unteruntergenres (<em>western</em> country rock)
&ndash;- und so weiter &ndash;- aufgeteilt werden. So lassen sich alle Genres und ihre
jeweiligen Untergenres als Baum darstellen. Als imaginären Wurzelknoten nimmt
man das allumfassende Genre <em>Music</em> an &ndash;- einfach weil sich <em>Music</em> hinter fast
jedes Genre schreiben lässt, ohne den Sinn zu verändern.
Dieser Baum kann dann genutzt werden, um beliebige Genres als <em>Pfad</em> durch den
Baum normalisiert abzubilden.</p>
<p>Die eigentliche Schwierigkeit besteht nun darin, eine repräsentative Sammlung von
Genres in diesen Baum einzupflegen. Bei der hohen Anzahl der existierenden Genres,
kann man diese nur schwerlich manuell einpflegen.</p>
<p>Existierende Datenbanken wie, das sonst sehr vollständige <em>MusicBrainz</em>, liefern
laut ihren <em>FAQ</em> keine Genredaten:</p>
<blockquote class="epigraph">
<div><p><strong>Why Does Musicbrainz not support genre information?</strong></p>
<p><em>Because doing genres right is very hard.
We have thought about how to implement genres,
but we haven't completely settled on the right approach yet.</em></p>
<p class="attribution">&mdash;<a class="reference external" href="https://musicbrainz.org/doc/General_FAQ">https://musicbrainz.org/doc/General_FAQ</a> <a class="reference internal" href="rst/index.html#brainz-faq" id="id2">[Link&ndash;12]</a></p>
</div></blockquote>
<p>Also musste man sich nach anderen Quellen umschauen. Das vom
<tt class="docutils literal"><span class="pre">DiscogsGenreProvider</span></tt> verwendete <em>Discogs</em> bietet zwar detaillierte
Informationen, teilt aber die Genres hierarchisch in zwei Ebenen auf, dem
Genre (<em>,,Rock&quot;</em>) und dem Untergenre (<em>,,Blackened Death Metal&quot;</em>) &ndash;- eine zu
grobe Einteilung.</p>
<p>Dafür fallen zwei andere Quellen ins Auge: <em>Wikipedia</em> &ndash;- viele bekannte
Künstler sind dort mit detaillierter Genreinformation vertreten,
sowie <em>The Echonest</em> &ndash;- einem Unternehmen, welches verschiedene Dienste rund um
Musikmetadaten anbietet. Darunter auch eine Liste, von den ihnen bekannten
Genres.</p>
<p>Mit diesen zwei Quellen sollte man einen repräsentativen Durchschnitt aller
Genres bekommen. Zuerst muss man allerdings an die Daten herankommen. Bei <em>The
Echonest</em> ist dies, nachdem man sich einen <em>API&ndash;Key</em>  <a class="footnote-reference" href="#f1" id="id3"><sup>1</sup></a> registriert hat,
relativ einfach:</p>
<div class="highlight-bash"><div class="highlight"><pre>http://developer.echonest.com/api/v4/artist/list_genres?api_key<span class="o">=</span>ZSIUEIVVZGJVJVWIS
</pre></div>
</div>
<p>Die Liste enthält zum Zeitpunkt des Schreibens, <span class="math">\(898\)</span> konkrete Genres und
wird kontinuierlich vom Betreiber erweitert.</p>
<p>Die Suche bei Wikipedia gestaltet sich etwas schwieriger. Tatsächlich wurde
diese Quelle erst nachträglich, nach einer Analyse des Quelltextes von <em>beets</em>
(ein Musikmetadatenmanager, siehe <a class="reference internal" href="rst/index.html#beets-source" id="id4">[Link&ndash;13]</a>) eingebaut. <em>Beets</em> hat
ebenfalls das Problem, das Genre zu normalisieren. Daher muss dort ein
entsprechender Mechanismus eingebaut sein. Dieser beruht, ähnlich wie hier,
ebenfalls auf einem Baum <a class="footnote-reference" href="#f2" id="id5"><sup>2</sup></a>. Um diese Quelle in <em>libmunin</em> zu nutzen, wurde
lediglich der relevante Code von <em>beets</em> (MIT&ndash;Lizenz) nach <em>Python3</em> <a class="footnote-reference" href="#f3" id="id6"><sup>3</sup></a>
portiert.  Von der englischen Wikipedia werden folgende Seiten <em>gescraped,</em> also
der HTML&ndash;Seiteninhalt wird geparst, und die darin befindlichen Genres in eine
Datei geschrieben:</p>
<ul class="simple">
<li><em>List of popular music genres:</em> <a class="reference internal" href="rst/index.html#wiki-list-pop-music" id="id7">[Link&ndash;14]</a></li>
<li><em>List of styles of music: A&ndash;F, G&ndash;M, N&ndash;R, S&ndash;Z:</em> <a class="reference internal" href="rst/index.html#wiki-list-az-music" id="id8">[Link&ndash;15]</a></li>
</ul>
<p>Von Wikipedia kommen daher zusätzliche 1527 Einträge. Diese werden mit den
Einträgen von <em>The Echonest</em> verschmolzen. Nach einer Entfernung von Dubletten
ist die finale Genreliste 1876 Einträge lang.</p>
</div>
<div class="section" id="uberfuhrung-der-genreliste-in-einem-genrebaum">
<h4>4.2.2 Überführung der Genreliste in einem Genrebaum<a class="headerlink" href="#uberfuhrung-der-genreliste-in-einem-genrebaum" title="Permalink to this headline">¶</a></h4>
<div class="figure compound align-center" id="fig-tree">
<div style="width: 72%" class="subfigure align-center" id="fig-tree-input">
<a class="reference internal image-reference" href="../../_images/tree_input.svg"><img alt="Genreliste als Eingabe vor dem Prozessieren" src="../../_images/tree_input.svg" width="70%" /></a>
<p class="caption">Genreliste als Eingabe vor dem Prozessieren.</p>
</div>
<div style="width: 72%" class="subfigure align-center" id="fig-tree-init">
<a class="reference internal image-reference" href="../../_images/tree_init.svg"><img alt="Initialisierungsschritt" src="../../_images/tree_init.svg" width="100%" /></a>
<p class="caption">Initialisierungsschritt: Vergabe von Indizes und Zuordnung zum Wurzelknoten.</p>
</div>
<div style="width: 72%" class="subfigure align-center" id="fig-tree-first">
<a class="reference internal image-reference" href="../../_images/tree_first.svg"><img alt="Der Genrebaum nach der ersten Iteration" src="../../_images/tree_first.svg" width="100%" /></a>
<p class="caption">Der Genrebaum nach der ersten Iteration, ,,Swedish Alternative” wurde noch
nicht aufgebrochen.</p>
</div>
<div style="width: 72%" class="subfigure align-center" id="fig-tree-final">
<a class="reference internal image-reference" href="../../_images/tree_final.svg"><img alt="Der fertige Genrebaum als Ausgabe" src="../../_images/tree_final.svg" width="90%" /></a>
<p class="caption">Der nach zwei Iterationen fertige Genrebaum.</p>
</div>
<p class="caption">Der Baum wird aus der Eingabe unter  erzeugt indem erst
alle Genres dem Wurzelknoten ,,Music” unterstellt werden
(). Danach wird der Baum rekursiv (hier in zwei
Schritten,  und )
immer weiter vertieft.</p>
</div><p id="fig-tree">Nachdem eine Liste von Genres nun vorhanden ist, muss diese noch in einem Baum,
wie in  gezeigt, überführt werden.
Unter  wird eine Genreliste gezeigt, die im Folgenden als
Beispieleingabe benutzt wird.</p>
<p>Der Baum sollte dabei folgende Kriterien erfüllen:</p>
<ul class="simple">
<li>Der Pfad von einem Blattknoten (<em>,,Swedish&quot;</em>) zum Wurzelknoten (<em>,,Music&quot;</em>)
sollte dabei das ursprüngliche Genre, mit dem optionalen Suffix <em>Music</em>
ergeben <em>(,,Swedish&ndash;Pop&ndash;Music&quot;)</em>.</li>
<li>Jeder Knoten erhält einen Index, der für jede Tiefenstufe von null wieder anfängt.
So hat der Knoten <em>music</em> immer den Index null, bei der nächsten Ebene wird der
Index  nach alphabetischer Sortierung vergeben. <em>Pop</em> bekommt die Null,
<em>Reggae</em> die Eins, <em>Rock</em> die Zwei und so weiter.</li>
</ul>
<p>Das Umwandeln selbst geschieht folgendermaßen:</p>
<ul class="simple">
<li>Es wird manuell der Wurzelknoten <em>Music</em> angelegt.</li>
<li>Alle Genres in der Genreliste werden diesem Knoten als Kind hinzugefügt.
(siehe Abbildung )</li>
</ul>
<p>Nach dieser Vorarbeit wird rekursiv folgende Prozedur erledigt:</p>
<ol class="arabic simple">
<li>Gehe über alle Kinder des Wurzelknoten und breche dabei das <em>letzte
Element</em> des <em>Genres</em> ab (<em>Western Country Rock</em> wird zu <em>Western Country</em>
und <em>Rock</em>).</li>
<li>Der letzte Teil wird als Schlüssel in einer dem Knoten zugeordneten
Hashtabelle gespeichert, mit dem Rest als dazugehörigen Wert. Aufgrund der
Natur von Hashtabellen, entledigt sich dies eventueller Dupletten.</li>
<li>Die Liste der Kinder des Wurzelknotens, wird zu einer leeren Liste
zurückgesetzt.</li>
<li>Die Schlüssel der Hashtabelle, werden als neue Kinder gesetzt. Die
dazugehörigen Werte jeweils als deren Kinder. Dadurch vertieft sich der Baum.</li>
<li>Iteriere über die neuen Kinder, jedes Kind wird als neuer Wurzelknoten
angenommen und es wird bei Schrit 1. weitergemacht. Der Rekursionsstopp ist
erreicht, wenn keine Aufteilung des Genres in ein letztes Element und Rest
mehr möglich ist.</li>
</ol>
<p>In unserem Beispiel ist der Baum bereits nach zwei Iterationen fertig (siehe
Abbildung ). In Abbildung  ist der
Baum nach der ersten Iteration zu sehen. <br />
Bei der momentanen Datenquelle entstehen einige kleine Fehler im
Baum.  Daher werden mach dem manuellen Aufbau, noch einige halbautomatische
Aufräumarbeiten erledigt.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Die fehlenden <em>,,Musik&quot;</em>&ndash;Genres <em>,,Vocal&quot;</em> und <em>,,Speech&quot;</em> werden
manuell eingefügt.</li>
<li>Bei dem momentanen Vorgehen landen unter Umständen weitere
<em>,,Music&quot;</em>&ndash;Knoten auf der ersten Ebene. Diese werden entfernt.</li>
<li>Alle Genres die auf <em>,,core&quot;</em> enden, werden aufgebrochen und dem Knoten
<em>,,core&quot;</em> auf erster Ebene hinzugefügt. Damit werden meist ähnliche Genres
wie <em>,,Metalcore&quot;</em> und <em>,,Grindcore&quot;</em>  zusammengefasst.</li>
</ol>
</div></blockquote>
<p>Der resultierende Baum ist im Anhang <a class="reference internal" href="rst/index.html#genre-graph-vis"><em>Bilder des Genregraphen</em></a> in verschiedenen
Detailstufen visualisiert.  Er besitzt auf der ersten Ebene 1044 Untergenres.
Die tiefste Verschachtelung erreicht das Genre <em>,,New Wave of new Wave&quot;</em> mit
einer Tiefe von fünf.</p>
</div>
<div class="section" id="zuordnung-von-genres">
<h4>4.2.3 Zuordnung von Genres<a class="headerlink" href="#zuordnung-von-genres" title="Permalink to this headline">¶</a></h4>
<p>Die Normalisierung des Genres ist nun mit dem aufgebauten Baum effizient
möglich.  Zuerst muss das Eingabegenre in Untergenres aufgeteilt werden, denn
oft sind mehrere Genres in einem einzelnen String zusammengefasst, die durch
bestimmte Zeichen getrennt sind. Ein Beispiel:</p>
<blockquote>
<div><em>,,Rock, Reggae / Alternative Rock, Ska, Punk&quot;</em></div></blockquote>
<p>Jedes dieser Untergenres wird dann mittels eines regulären Ausdrucks in einzelne
Wörter aufgeteilt. Die Wörter werden noch in die kleingeschriebene Form
gebracht.</p>
<div class="math">
\[\left\{\left\{rock\right\}, \left\{reggae\right\}, \left\{alternative, rock\right\}, \left\{ska\right\}, \left\{punk\right\} \right\}\]</div>
<p>Die einzelnen Wortlisten können in <em>Pfade</em> umgewandelt werden.
Dazu werden zuerst folgende Variablen initialisiert:</p>
<div class="figure align-center">
<center><blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>Variable</em></th>
<th class="head"><em>Beschreibung</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">words</span></tt></td>
<td>Eine Liste von Wörtern die im Genre vorkommen.  <br /></td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Beispiel: <span class="math">\(\{alternative, rock\}\)</span></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">root</span></tt></td>
<td>Der momentane Wurzelknoten. Anfangs initialisiert auf <em>,,Music&quot;</em>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">paths</span></tt></td>
<td>Eine leere Liste mit Pfaden. Dient als Speicher für Resultate.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mask</span></tt></td>
<td>Eine Liste mit Wahrheitswerten. Genauso lang wie <tt class="docutils literal"><span class="pre">words</span></tt> <br /></td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Die Wahrheitswerte werden mit <em>False</em> initialisiert. <br /></td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Die Liste wird genutzt, um gefundene Wörter an  <br /></td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>dem entsprechenden Index <em>,,abzuhaken&quot;</em>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">path_result</span></tt></td>
<td>Eine Liste, die an die nächste Rekursionsstufe weitergegeben wird. <br /></td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Sie speichert die Indizes des momentan aufgebauten Pfades. <br /></td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Anfangs initialisiert auf ein leere Liste.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</center></div><p>Nach diesen Vorbereitungen wird eine rekursive Backtracking&ndash;Suche gestartet:</p>
<ol class="arabic simple">
<li>Finde alle Kinder von <tt class="docutils literal"><span class="pre">root</span></tt>, deren Untergenres in <tt class="docutils literal"><span class="pre">words</span></tt> vorkommen.
Wenn das entsprechende Untergenre noch nicht in <tt class="docutils literal"><span class="pre">mask</span></tt> abgehakt wurde, wird
es in einer temporären Liste vermerkt.</li>
<li>Ist diese temporäre Liste dann  leer und die <tt class="docutils literal"><span class="pre">path_result</span></tt>&ndash;Liste nicht
leer, so wird die <tt class="docutils literal"><span class="pre">path_result</span></tt>&ndash;Liste zur <tt class="docutils literal"><span class="pre">paths</span></tt>&ndash;Liste hinzugefügt.
Trifft dieser Fall ein, so ist in diesem Zweig der Rekursionsstopp erreicht.</li>
<li>Es wird über jedes Kindelement in der temporären Liste iteriert. Bei jeder
Iteration wird folgendes durchgeführt.<ol class="upperalpha">
<li>Eine Kopie der <tt class="docutils literal"><span class="pre">path_result</span></tt>&ndash;Liste wird erstellt, bei der der Index des
aktuellen Kindelements am Ende hinzugefügt wird.</li>
<li>Eine Kopie der <tt class="docutils literal"><span class="pre">mask</span></tt>&ndash;Liste wird erstellt, in der das vom Kind
repräsentierte Wort <em>,,abgehakt&quot;</em> wird (der entsprechende Index wird auf
<em>True</em> gesetzt).</li>
<li>Das Kind wird als neuer Wurzelknoten angenommen und es wird wie bei
Schritt 1) weitergemacht.</li>
</ol>
</li>
<li>Nachdem alle Zweige der Rekursion beim Rekursionsstopp angekommen sin,
stehen alle validen Pfade, als Tupel von Indizes, in <tt class="docutils literal"><span class="pre">paths</span></tt>.</li>
</ol>
<div class="figure align-center" id="fig-match-example">
<a class="reference internal image-reference" href="../../_images/tree_match_example.svg"><img alt="Beispielablauf des Zuordnungs--Algorithmus" src="../../_images/tree_match_example.svg" width="100%" /></a>
<p class="caption">Beispiel-Ablauf des Zuordnungs&ndash;Algorithmus an der Eingabe ,,Alternative
Rock / Reggae”. In den Knoten ist die jeweils die momentante Maske eingetragen, an
den Kanten jeweils die aktuelle mask und der bisher gebildete Pfad.</p>
</div>
<p>In Abbildung  wird ein Beispiel dieses Verfahrens mit
dem Genre <em>,,Alternative Rock / Reggae&quot;</em> gegeben.  <br /> Die passenden Pfade sind
in diesem Fall also <tt class="docutils literal"><span class="pre">Reggae</span></tt> (<span class="math">\(\{0\}\)</span>) und <tt class="docutils literal"><span class="pre">Alternative</span> <span class="pre">Rock</span></tt>
(<span class="math">\(\{2, 0\}\)</span>).  Es ist zu bemerken, dass <tt class="docutils literal"><span class="pre">Rock</span></tt> (<span class="math">\(\{2\}\)</span>) allein zwar
ebenfalls ein valider Pfad ist, aber als eine Untermenge von <tt class="docutils literal"><span class="pre">Alternative</span>
<span class="pre">Rock</span></tt> (<span class="math">\(\{2, 0\}\)</span>) nicht in der Ergebnismenge enthalten ist.</p>
</div>
<div class="section" id="vergleichen-der-unterschiedlichen-genrepfad-mengen">
<span id="single-dist"></span><h4>4.2.4 Vergleichen der unterschiedlichen Genrepfad&ndash;Mengen<a class="headerlink" href="#vergleichen-der-unterschiedlichen-genrepfad-mengen" title="Permalink to this headline">¶</a></h4>
<p>Um zwei einzelne Pfade miteinander zu vergleichen, wird folgendermaßen vorgegangen:</p>
<ul class="simple">
<li>Zähle die Anzahl an Punkten, in denen sich der Pfad überdeckt.  Beispiel: Für
die Pfade <span class="math">\(\left\{2, 1, 0\right\}\)</span> und <span class="math">\(\left\{2, 1, 2, 0\right\}\)</span> wäre dies
<span class="math">\(2\)</span>.</li>
<li>Teile die Anzahl der Überdeckungen durch die Länge des längeren beider Pfade.</li>
<li>Die daraus gewonnene Ähnlichkeit wird von <span class="math">\(1,0\)</span> abgezogen um die Distanz
zu erhalten.</li>
</ul>
<p>In <em>libmunin</em> sind zwei Distanzfunktionen enthalten, welche diese Methode nutzt, um
zwei Mengen mit Genrepfaden zu vergleichen.</p>
<p><tt class="docutils literal"><span class="pre">GenreTree</span></tt>: Vergleicht jeden Genrepfad der Mengen <em>A</em> und <em>B</em>, mittels oben
genannter Methode, miteinander. Die minimale Distanz wird zurückgegeben.  Als
Optimierung wird frühzeitig abgebrochen, wenn eine Distanz von <span class="math">\(0,0\)</span>
erreicht wird.</p>
<p>Diese Distanzfunktion eignet sich für kurze Genre&ndash;Beschreibungen, wie sie
in vielen Musiksammlungen vorkommen. Oft ist ein Lied als <em>Rock</em> oder
<em>Metal</em> eingetragen, ohne Unterscheidung von Untergenres. Deshalb geht diese
Distanzfunktion davon aus, wenige Übereinstimmungen zu finden &ndash;- sollten welche
vorkommen, so werden diese gut bewertet.</p>
<p>Setzt man voraus, dass <em>d</em> die unter <a class="reference internal" href="rst/index.html#single-dist">4.2.4</a> erwähnte Distanzunktion
ist,  so berechnet sich die finale Distanz durch:</p>
<div class="math">
\[D_{min}(A, B) = min\!\left\{d(a, b) \colon a, b \in A \times B, a \neq b\right\}\]</div>
<p><tt class="docutils literal"><span class="pre">GenreTreeAvg</span></tt>: Seien <em>A</em> und <em>B</em> zwei Mengen mit Genrepfaden. <em>A</em> ist dabei
die größere Menge und <em>B</em> die kleinere, falls die Mengen eine unterschiedliche
Mächtigkeit besitzen. Dann gilt hier:</p>
<div class="math">
\[D_{avg}(A, B) = \frac{1}{\vert A\vert} \times \displaystyle\sum\limits_{a \in A} min\!\left\{ d(a, b) \colon b \in B, a \neq b\right\}\]</div>
<p>Diese Distanzfunktion eignet sich für <em>,,reichhaltig&quot;</em> befüllte
Genrebeschreibungen, bei denen auch ein oder mehrere Untergenres vorhanden sind.
Ein Beispiel dafür wäre: <em>,,Country Rock/Folk/Rockabilly&quot;</em>. Die
Distanzfunktion geht also davon aus, zumindest teilweise Überdeckungen in den
Daten vorzufinden. <br />
Je nach Daten, die es zu verarbeiten gilt, kann der Nutzer der Bibliothek eine
passende Distanzunktion auswählen.</p>
</div>
<div class="section" id="probleme">
<h4>4.2.5 Probleme<a class="headerlink" href="#probleme" title="Permalink to this headline">¶</a></h4>
<p>Insgesamt funktioniert dieser Ansatz gut. Die meisten Genres werden
zufriedenstellend in Pfade normalisiert, die performant verglichen werden können.</p>
<p>Folgendes Problem wird allerdings noch nicht zufriedenstellend gelöst:
Es wird davon ausgegangen, dass Genres die ähnlich sind auch ähnlich heißen.
Eine Annahme, die zwar oft, aber nicht immer wahr ist. So sind die Genres
<em>Alternative Rock</em> und <em>Grunge</em> sehr ähnlich &ndash;- der obige Ansatz würde hier
allerdings eine Distanz von <span class="math">\(1\)</span> liefern. Auch Genres wie <em>,,Rock'n'Roll</em>
würde ähnlich schlechte Resultate liefern, da sie kaum sinnvoll aufgebrochen
werden können.</p>
<p>Eine mögliche Lösung, wäre eine Liste von <em>,,synonymen&quot;</em> Genres, die
Querverbindungen im Baum erlauben würden.  Allerdings wäre eine solche Liste von
Synonymen schwer automatisch zu erstellen.</p>
</div>
</div>
<div class="section" id="schlusselwortextraktion">
<h3>4.3 Schlüsselwortextraktion<a class="headerlink" href="#schlusselwortextraktion" title="Permalink to this headline">¶</a></h3>
<p>Eine Idee bei <em>libmunin</em>, ist es auch die Liedtexte eines Liedes einzubeziehen,
um Lieder mit ähnlicher <em>Thematik</em> näher beieinander im Graphen zu
gruppieren. Sollten zwei Lieder nicht die selben Themen behandeln, so soll sich
zumindest die gleiche Sprache sich positiv auf die Distanz auswirken.</p>
<p>Um die Themen effizient zu vergleichen, extrahiert <em>libmunin</em> aus den Liedtexten
die wichtigsten <em>Schlüsselwörter</em> mittels des <tt class="docutils literal"><span class="pre">KeywordProviders</span></tt>. Diese
Phrasen sollen den eigentlichen Inhalt möglichst gut approximieren, ohne dabei
schwer vergleichbar zu sein.</p>
<p><em>Anmerkung:</em> Im Folgenden ist von <em>Schlüsselwörtern</em> die Rede. Ein einzelnes
<em>Schlüsselwort</em>, wie <em>,,dunkle Schwingen&quot;</em>, kann aber aus mehreren Wörtern
bestehen.</p>
<div class="section" id="der-rake-algorithmus">
<h4>4.3.1 Der RAKE&ndash;Algorithmus<a class="headerlink" href="#der-rake-algorithmus" title="Permalink to this headline">¶</a></h4>
<p>Zur Extraktion von Schlüsselwörtern aus Texten gibt es eine Vielzahl von
Algorithmen <a class="reference internal" href="rst/index.html#steinautomatische" id="id9">[5]</a>.  Der verwendete Algorithmus zur
Schlüsselwortextraktion ist bei <em>libmunin</em> der relativ einfach zu
implementierende RAKE&ndash;Algorithmus (vorgestellt in <a class="reference internal" href="rst/index.html#berry2010text" id="id10">[6]</a>). Zwar
könnte man mit anderen Algorithmen bessere Ergebnisse erreichen, diese sind aber
schwerer zu implementieren (was die Anpassbarkeit verschlechtert) und sind in
den meisten Fällen von sprachabhängigen Corpora (Wortdatenbanken) abhängig.</p>
<p><em>Beschreibung des RAKE&ndash;Algorithmus:</em></p>
<ol class="arabic">
<li><p class="first">Aufteilung des Eingabetextes in Sätze, anhand von Interpunktion und
Zeilenumbrüchen.</p>
</li>
<li><p class="first">Extraktion der <em>Phrasen</em> aus den Sätzen.  Eine <em>Phrase</em> ist hier definiert
als eine Sequenz von Nichtstoppwörtern.  Um Stoppwörter zu erkennen, muss
eine von der Sprache abhängige Stoppwortliste geladen werden. Zu diesem Zweck
hat <em>libmunin</em> 17 Stoppwortlisten in verschiedenen Sprachen eingebaut. Die
Sprache selbst wird durch das Python&ndash;Modul <tt class="docutils literal"><span class="pre">guess-language-spirit</span></tt>
<a class="reference internal" href="rst/index.html#guess-language" id="id11">[Link&ndash;16]</a> anhand verschiedener Sprachcharakteristiken
automatisch erraten. Zudem werden lange Wörter mittels <tt class="docutils literal"><span class="pre">PyEnchant</span></tt>
<a class="reference internal" href="rst/index.html#pyenchant" id="id12">[Link&ndash;17]</a> in einem Wörterbuch nachgeschlagen, um die Sprache
herauszufinden, sofern die <tt class="docutils literal"><span class="pre">Enchant</span></tt>&ndash;Bibliothek samt Wörterbuch für die
entsprechende Sprache <a class="reference internal" href="rst/index.html#enchant" id="id13">[Link&ndash;18]</a> installiert ist.</p>
</li>
<li><p class="first">Berechnung eines <em>Scores</em> für jedes Wort in einer Phrase aus dem <em>Degree</em> und
der <em>Frequenz</em> eines Wortes (<span class="math">\(P\)</span> ist dabei die Menge aller Phrasen,
<span class="math">\(\vert p\vert\)</span> ist die Anzahl von Wörtern in einem Phrase):</p>
<div class="math">
\[\begin{split}degree(word) = \sum_{p \in P} \left\{\begin{array}{cl} \vert p\vert, &amp; \mbox{falls } word \in p\\ 0, &amp; \mbox{sonst} \end{array}\right.\end{split}\]</div>
<div class="math">
\[\begin{split}freq(word) = \sum_{p \in P} \left\{\begin{array}{cl} 1, &amp; \mbox{falls } word \in p\\ 0, &amp; \mbox{sonst} \end{array}\right.\end{split}\]</div>
<div class="math">
\[score(word) = \frac{degree(word)}{freq(word)}\]</div>
</li>
<li><p class="first">Für jede Phrase wird nun ein <em>Score</em> berechnet. Dieser ist definiert als die
Summe aller Wörter&ndash;<em>Scores</em> innerhalb einer Phrase. Die derart bewerteten
Phrasen werden absteigend sortiert als Schlüsselwörter ausgegeben.
Schlüsselwörter mit einem <em>Score</em> kleiner <span class="math">\(2,0\)</span> werden ausgesiebt.</p>
</li>
</ol>
<p>Es wurden zudem einige Änderungen, zum in <a class="reference internal" href="rst/index.html#berry2010text" id="id14">[6]</a> vorgestellten
Algorithmus, vorgenommen, um diesen besser auf kleine Dokumente wie Liedtexte
abzustimmen:</p>
<ul class="simple">
<li>Im Original werden Sätze nicht anhand von Zeilenumbrüchen aufgebrochen.  Die
meisten Liedtexte bestehen aber aus einzelnen Versen, die nicht durch Punkte
getrennt sind, sondern durch eine neue Zeile abgegrenzt werden.</li>
<li>Um die Ergebnisse leichter vergleichen zu können, werden die einzelnen Wörter
nach dem Extrahieren auf ihren Wortstamm reduziert. Dabei wird der
sprachsensitive <em>Snowball&ndash;Stemmer</em> <a class="reference internal" href="rst/index.html#porter2001snowball" id="id15">[7]</a> verwendet.</li>
<li>Da sich viele Ausdrücke in einem Liedtext wiederholen, kamen während der
Entwicklung viele Schlüsselwörter in verschiedenen Variationen mehrmals vor.
Oft waren diese dann eine Untermenge eines anderen Schlüsselwortes (Beispiel:
<em>Yellow</em> und <em>Submarine</em> sind ein Teil von <em>Yellow Submarine</em>). Daher werden
in einem nachgelagerten Schritt diese redundanten Phrasen entfernt.</li>
</ul>
<p><strong>Vergleich der einzelnen Schlüsselwortmengen:</strong></p>
<p>Die einzelnen Mengen von Schlüsselwörtern werden unter der Prämisse verglichen,
dass exakte Übereinstimmungen, durch den riesigen Wortschatz, selten sind.</p>
<ul>
<li><p class="first">Zu einem Drittel geht der Vergleich der Sprache in die Distanz ein. Ist die
Sprache gleich, so wird hier eine Teildistanz von <span class="math">\(0\)</span> angenommen,
andernfalls ist die Gesamtdistanz <span class="math">\(1\)</span>, da dann auch ein Vergleich der
einzelnen Schlüsselwörter nicht mehr sinnvoll ist.</p>
</li>
<li><p class="first">Die restlichen zwei Drittel errechnen sich aus der Übereinstimmung der
Schlüsselwörter. Für zwei Schlüsselwörter (eine Menge von Wörtern) <em>A</em> und <em>B</em>
errechnet sich die Distanz folgendermaßen:</p>
<div class="math">
\[d_{kwd}(A, B) = 1 - \frac{\vert A\cap B\vert}{max\left\{\vert A\vert, \vert B\vert\right\}}\]</div>
<p>Alle Schlüsselwörter werden damit untereinander verglichen. Die minimale
dabei gefundene Distanz ist die finale Gesamtdistanz.</p>
</li>
</ul>
</div>
<div class="section" id="ergebnisse">
<h4>4.3.2 Ergebnisse<a class="headerlink" href="#ergebnisse" title="Permalink to this headline">¶</a></h4>
<div class="figure align-center" id="table-keywords">
<center><table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="30%" />
<col width="15%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Score</th>
<th class="head">Schlüsselwörter <em>(Wandern)</em></th>
<th class="head">Score</th>
<th class="head">Schlüsselwörter <em>(Yellow Submarine)</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math">\(9,333\)</span></td>
<td><em>gerne  stille  stehn</em></td>
<td><span class="math">\(22,558\)</span></td>
<td><em>yellow  submarin</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(5,778\)</span></td>
<td><em>wandern</em></td>
<td><span class="math">\(20,835\)</span></td>
<td><em>full  speed  ahead  mr</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(5,442\)</span></td>
<td><em>müllers  lust</em></td>
<td><span class="math">\(8,343\)</span></td>
<td><em>live  beneath</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(5,247\)</span></td>
<td><em>müde  drehn</em></td>
<td><span class="math">\(5,247\)</span></td>
<td><em>band  begin</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(5,204\)</span></td>
<td><em>niemals  fiel</em></td>
<td><span class="math">\(3,297\)</span></td>
<td><em>sea</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(5,204\)</span></td>
<td><em>herr  meister</em></td>
<td><span class="math">\(3,227\)</span></td>
<td><em>green</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(5,204\)</span></td>
<td><em>frau  meisterin</em></td>
<td><span class="math">\(2,797\)</span></td>
<td><em>captain</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(5,074\)</span></td>
<td><em>muntern  reihn</em></td>
<td><span class="math">\(2,551\)</span></td>
<td><em>sail</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(5,031\)</span></td>
<td><em>schlechter  müller</em></td>
<td><span class="math">\(2,551\)</span></td>
<td><em>blue</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(5,031\)</span></td>
<td><em>wanderschaft  bedacht</em></td>
<td><span class="math">\(2,551\)</span></td>
<td><em>cabl</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(3,430\)</span></td>
<td><em>wasser</em></td>
<td><span class="math">\(2,551\)</span></td>
<td><em>life</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(3,430\)</span></td>
<td><em>steine</em></td>
<td><span class="math">\(2,516\)</span></td>
<td><em>sky</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(2,016\)</span></td>
<td><em>tanzen</em></td>
<td><span class="math">\(2,516\)</span></td>
<td><em>aye</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(2,016\)</span></td>
<td><em>frieden</em></td>
<td><span class="math">\(2,016\)</span></td>
<td><em>friend</em></td>
</tr>
<tr class="row-even"><td><span class="math">\(2,016\)</span></td>
<td><em>gelernt</em></td>
<td><span class="math">\(2,016\)</span></td>
<td><em>aboard</em></td>
</tr>
<tr class="row-odd"><td><span class="math">\(2,016\)</span></td>
<td><em>schwer</em></td>
<td><span class="math">\(2,016\)</span></td>
<td><em>boatswain</em></td>
</tr>
</tbody>
</table>
<p class="caption">Extrahierte Schlüsselwörter aus dem Volkslied
,,Das Wandern ist des Müllers Lust“ (links) und dem
Beatles&ndash;Song ,,Yellow Submarine“ (rechts). Für jedes Schlüsselwort
wird der Score angezeigt. Dieser hat keine Begrenzung nach oben.
Rechts wurden die Schlüsselwörter zusätzlich auf den Wortstamm
gebracht.</p>
</center></div><div class="figure align-center" id="table-lyrics-wandern">
<span id="table-keywords"></span><center><table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Das Wandern ist des Müllers Lust,</td>
<td>Das sehn wir auch den Rädern ab,</td>
</tr>
<tr class="row-even"><td>Das Wandern!</td>
<td>Den Rädern!</td>
</tr>
<tr class="row-odd"><td>Das muß ein schlechter Müller sein,</td>
<td><br /></td>
</tr>
<tr class="row-even"><td>Dem niemals fiel das Wandern ein,</td>
<td>Die gar nicht gerne stille stehn,</td>
</tr>
<tr class="row-odd"><td>Das Wandern.</td>
<td>Die Steine selbst, so schwer sie sind,</td>
</tr>
<tr class="row-even"><td><br /></td>
<td>Die Steine!</td>
</tr>
<tr class="row-odd"><td>Vom Wasser haben wir’s gelernt,</td>
<td>Sie tanzen mit den muntern Reihn</td>
</tr>
<tr class="row-even"><td>Vom Wasser!</td>
<td>Und wollen gar noch schneller sein,</td>
</tr>
<tr class="row-odd"><td>Das hat nicht Rast bei Tag und Nacht,</td>
<td>Die Steine.</td>
</tr>
<tr class="row-even"><td>Ist stets auf Wanderschaft bedacht,</td>
<td><br /></td>
</tr>
<tr class="row-odd"><td>Das Wasser.</td>
<td>O Wandern, Wandern, meine Lust,</td>
</tr>
<tr class="row-even"><td><br /></td>
<td>O Wandern!</td>
</tr>
<tr class="row-odd"><td>Die sich mein Tag nicht müde drehn,</td>
<td>Herr Meister und Frau Meisterin,</td>
</tr>
<tr class="row-even"><td>Die Räder.</td>
<td>Laßt mich in Frieden weiter ziehn</td>
</tr>
<tr class="row-odd"><td><em>(oben rechts weiter)</em></td>
<td>Und wandern.</td>
</tr>
</tbody>
</table>
<p class="caption">Liedtext des Volksliedes ,,Das Wandern ist des Müllers Lust“.</p>
</center></div><p id="table-lyrics-wandern">In Abbildung  sind die extrahierten Schlüsselwörter aus zwei
Liedern aufgelistet.</p>
<p>Zur Referenz ist unter Abbildung  der Liedtextes des
Volkliedes <em>,,Das Wandern ist des Müllers Lust&quot;</em> abgedruckt. Der Text von
<em>,,Yellow Submarine&quot;</em> wird aus lizenzrechtlichen Gründen hier nicht
abgedruckt.</p>
<p>Wie man in Abbildung  sieht, werden längere Phrasen automatisch
besser bewertet &ndash;- deren <em>Score</em> berechnet sich aus der Summe ihrer Wörter.
Auch sieht man, dass viele unwichtige Wörter wie <em>aboard</em> trotz Stoppwortlisten
noch in das Ergebnis aufgenommen werden.</p>
</div>
<div class="section" id="id16">
<h4>4.3.3 Probleme<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>Teilweise liefert diese Provider&ndash;Distanzfunktions&ndash;Kombination bereits
interessante Ergebnisse. So werden die beiden staatskritischen, deutschen Texte
<em>,,Hey Staat&quot;</em> von <em>Hans Söllner</em> und <em>,,Lieber Staat&quot;</em> von <em>Farin Urlaub</em> mit
einer relativ niedrigen Distanz von gerundet <span class="math">\(0,4\)</span> bewertet.</p>
<p>Doch nicht bei allen Texten funktioniert die Extraktion so gut. Nimmt man den
Ausdruck <em>,,God save the Queen!&quot;</em>, so wird <em>RAKE</em> diesen nicht als gesamtes
Schlüsselwort erkennen. Stattdessen werden zwei einzelne Phrasen generiert:
<em>,,God save&quot;</em> und <em>,,Queen&quot;</em>, da <em>,,the&quot;</em> ein englisches Stoppwort ist.</p>
<p>Andererseits entstehen auch oft Schlüsselwörter, die entweder unwichtig <em>(,,mal
echt&quot;)</em>, sinnentfremdet (<em>,,gerne still stehen&quot;</em> obwohl im Text oben <em>,,nicht&quot;</em>
davor steht) oder stark kontextspezifisch <em>(,,schlechter Müller&quot;)</em> sind. Da ein
Computer den Text nicht verstehen kann, lässt sich das kaum vermeiden.</p>
<p>Auch gemischtsprachige Liedtexte lassen sich nur schwer untersuchen, da immer
nur eine Stoppwortliste geladen werden kann. Für Liedtexte mit starkem Dialekt
(wie von <em>Hans Söllner</em>) greift auch die normale hochdeutsche Stoppowortliste
nicht.</p>
</div>
</div>
<div class="section" id="moodbar-analyse">
<h3>4.4 Moodbar&ndash;Analyse<a class="headerlink" href="#moodbar-analyse" title="Permalink to this headline">¶</a></h3>
<p>Die ursprünglich als Navigationshilfe in Audioplayern gedachte Moodbar (siehe
<a class="reference internal" href="rst/index.html#wood2005techniques" id="id17">[8]</a> für genauere Informationen) wird in <em>libmunin</em> neben
der BPM&ndash;Bestimmung als einfache Form der Audioanalyse eingesetzt.
Kurz zusammengefasst, wird dabei ein beliebiges Audiostück zeitlich in 1000
Blöcke unterteilt. Für jeden dieser Blöcke wird ein Farbwert (als RGB&ndash;Tripel)
bestimmt. Der Rotanteil bestimmt dabei den Anteil niedriger Frequenzen, der
Grünanteil den Anteil mittlerer Frequenzen und der Blauanteil den Anteil von
hohen Frequenzen. Die Farbe Türkis deutet daher auf hohe und mittlere Frequenzen
in einem Block hin &ndash;- E&ndash;Gitarren haben häufig diese Farbe in der Moodbar.
Akustikgitarren erscheinen dafür meist in einem dunklem Rot (siehe Abbildung
).</p>
<p>Die Namensgebung des Verfahrens ist ein wenig irreführend. Man kann hier
keineswegs die subjektive Stimmung in einem Lied herauslesen. Lediglich die
Bestimmung einzelner Instrumente ist als Annäherung möglich. Nach Meinung des
Autors sollte man das Verfahren daher eher <em>,,frequencebar&quot;</em> oder Ähnliches
nennen. Um aber auf die Einführung eines neuen Begriffes zu verzichten, wird die
Namensgebung des Originalautors verwendet.</p>
<div class="figure align-center" id="fig-mood-avril">
<a class="reference internal image-reference" href="../../_images/mood_avril.svg"><img alt="Beispiel--Moodbar von ,,Avril Lavigne --- Knockin' on Heaven's Door“" src="../../_images/mood_avril.svg" width="100%" /></a>
<p class="caption">Beispiel&ndash;Moodbar von ,,Avril Lavigne &ndash;- Knockin' on Heaven's Door“.  Ein
Lied bei dem hauptsächlich eine Akustikgitarre (rot) und Gesang (grünlich)
im Vordergrund steht. Der Gesang setzt etwa bei 10% ein. Die Grafik wurde
durch ein eigens zu diesem Zwecke geschriebenes Script gerendert. Deutlich
sichtbar sind die einzelnen Pausen zwischen den Akkorden.</p>
</div>
<div class="section" id="vergleich-von-moodbars">
<h4>4.4.1 Vergleich von Moodbars<a class="headerlink" href="#vergleich-von-moodbars" title="Permalink to this headline">¶</a></h4>
<p>Das Vergleichen verschiedener Moodbars gestaltet sich aufgrund der hohen
Länge der einzelnen RGB&ndash;Vektoren als schwierig. In einem vorgelagerten
Analyseschritt wird daher versucht, die markanten Merkmale der einzelnen
Vektoren zu extrahieren. Dieser Analyseschritt wird dabei durch den
<tt class="docutils literal"><span class="pre">MoodbarProvider</span></tt> getätigt.</p>
<p>Vor der eigentlichen Verarbeitung wird jeder Farbkanal in einzelne Blöcke
aufgeteilt <em>(Diskretisierung)</em>, von der jeweils das arithmetische Mittel
gebildet wird. So wird der ursprüngliche 1000 Werte lange Vektor in (momentan)
20 einzelne, handlichere Werte aufgeteilt. Bei einer durchschnittlichen
Liedlänge von vier Minuten entspricht das immerhin zwölf Sekunden pro Block, was
für gewöhnliche Lieder ausreichend sein sollte.
Nach einigen subjektiven Tests haben sich folgende Merkmale als vergleichbar
erwiesen:</p>
<ul>
<li><p class="first"><strong>Differenzsumme:</strong> Für jeden Farbkanal wird die Summe der Differenzen zu den
jeweiligen vorherigen Blockwert gebildet (C ist der jeweilige Farbkanal):</p>
<div class="math">
\[\sum_{i=1}^{\vert C\vert} \vert C_{i} - C_{i-1}\vert\]</div>
<p>Dieser Wert soll die grobe <em>,,Sprunghaftigkeit&quot;</em> des Liedes beschreiben.
Ändern sich die Werte für diesen Farbkanal kaum, so ist der Wert niedrig.
Liegen hohe Änderungen zwischen jedem Block vor, so steigt dieser Wert bis zu
seinem maximalen Wert von <span class="math">\((20 - 1) \times 255 = 4845\)</span>.</p>
</li>
<li><p class="first"><strong>Histogramm:</strong> Für jeden Farbkanal wird eine Häufigkeitsverteilung, also ein
Histogramm, abgespeichert. Jeder einzelne Farbwert wird dabei auf einen von
fünf möglichen Bereichen, die jeweils 51 Werte umfassen, aufgeteilt.  So wird
für jeden Farbkanal eine einfach zu vergleichende Verteilung der
Frequenzen abgespeichert.</p>
</li>
<li><p class="first"><strong>Dominante Farben:</strong> Wie bereits erwähnt, ist es manchmal möglich bestimmte
Instrumente visuell anhand deren charakteristischen Farbe in der Moodbar zu
erkennen. Das kann man sich beim Vergleichen zu Nutze machen, denn ähnliche
Instrumente (ergo bestimmte, charakteristische Farben) deuten auf ähnliche
Musikstile hin.  Der <tt class="docutils literal"><span class="pre">MoodbarProvider</span></tt> teilt daher jeden Farbkanal in
15er&ndash;Schritten in einzelne Bereiche auf. Jede Farbkombination wird dann einem
dieser Bereiche zugeordnet. Die 15 am häufigsten zusammen vorkommenden Tripel
werden abgespeichert.</p>
</li>
<li><p class="first"><strong>Schwarzanteil:</strong> Gesondert werden sehr dunklen Farben behandelt. Haben alle
Farbkanäle eines RGB&ndash;Tripels einen Wert kleiner 30, so wird die Farbe nicht
gezählt, sondern auf einen <em>Schwarzanteil</em>&ndash;Zähler aufaddiert.  Geteilt durch
1000 ergibt sich daraus der Anteil des Liedes, der ganz oder beinahe still ist.</p>
</li>
<li><p class="first"><strong>Durchschnittliches Minimun/Maximum:</strong> Von jedem Block wird das
Minimum/Maximum der drei Farbkanäle bestimmt.  Die Summe über jeden so
bestimmten Wert, geteilt durch die Anzahl der Blöcke, ergibt das
durchschnittliche Minimun/Maximum. Für jeden Farbkanal ergibt sich so ein Wert,
der zwischen <span class="math">\(0\)</span> und <span class="math">\(255\)</span> liegt. Dieser sagt aus, in welchem
Bereich sich die <em>,,Frequenzen&quot;</em> im jeweiligen Farbkanal bewegen.</p>
</li>
</ul>
<div class="figure align-center" id="table-moodbar-list">
<center><table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="16%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Gewichtung</th>
<th class="head">ungewichtete Distanzfunktion <span class="math">\(d(a, b)\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>Differenzsumme</em></td>
<td><span class="math">\(13,5\%\)</span></td>
<td><span class="math">\(1 - \sqrt{\frac{\vert a - b\vert}{50}}\)</span></td>
</tr>
<tr class="row-odd"><td><em>Histogramm</em></td>
<td><span class="math">\(13,5\%\)</span></td>
<td><span class="math">\(1 - \frac{\sum_{x \in \vv{a} - \vv{b}}\vert x\vert}{5 \times 255}\)</span></td>
</tr>
<tr class="row-even"><td><em>Dominante Farben</em></td>
<td><span class="math">\(63,0\%\)</span></td>
<td><span class="math">\(\frac{\vert a \cap b\vert}{max\left\{\vert a \vert, \vert b \vert\right\}}\)</span></td>
</tr>
<tr class="row-odd"><td><em>Schwarzanteil</em></td>
<td><span class="math">\(5,0\%\)</span></td>
<td><span class="math">\(1 - \sqrt{\frac{\vert a - b\vert}{50}}\)</span></td>
</tr>
<tr class="row-even"><td><em>Durchschnittliches Minimum/Maximum</em></td>
<td><span class="math">\(5,0\%\)</span></td>
<td><span class="math">\(1 - \sqrt{\frac{\vert a - b\vert}{255}}\)</span></td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td><span class="math">\(\sum 100\%\)</span></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="caption">Auflistung der einzelnen Werte, die der Moodbar&ndash;Provider ausliest
und deren dazugehörige Distanzfunktion, sowie deren Gewichtung in
der Gesamtdistanz. ,,a“ und ,,b“ sind Skalare, mit Ausnahme der
Histogramm&ndash;Eingabewerte und der dominanten Farben. Dort sind ,,a“
und ,,b“ die einzelnen Farbkanäle als Vektor, bzw. eine Menge von
Farben. Zur Bildung der Gesamtdistanz werden die einzelnen Werte
über einen gewichteten Mittelwert verschmolzen. Die Werte im
Nenner der meisten Formeln geben den maximalen Wert an, der für
dieses Attribut erwartet wird.</p>
</center></div><p id="table-moodbar-list">In Tabelle  wird eine Auflistung der einzelnen Werte gegeben,
die der <tt class="docutils literal"><span class="pre">Moodbar-Provider</span></tt> generiert. Daneben werden auch die entsprechenden
Gewichtungen und Distanzfunktionen gegeben, mit dem die
Moodbar&ndash;Distanzfunktion die einzelnen Werte verrechnet.
Die enstehende gewichtete Distanz wird mittels der in Abbildung
 gezeigten Funktion noch skaliert um hohe Werte
anzuheben und niedrige weiter abzusenken.</p>
<p>Am subjektiv vergleichbarsten erwiesen sich die dominanten Farben in einem
Lied. Die zwischenzeitlich aufgekommene Idee, bestimmte markante Farbwertbereiche
bestimmten Instrumenten automatisch zuzuordnen erwies sich, mangels exakter
Zuordnungstabellen, als unpraktikabel und ungenau.</p>
</div>
<div class="section" id="id18">
<h4>4.4.2 Probleme<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<div class="figure align-center" id="fig-mood-yellow-submarine">
<a class="reference internal image-reference" href="../../_images/mood_yellow_submarine.svg"><img alt="Die selbe Moodbar bei unterschiedlichen Encoding der Audiodaten" src="../../_images/mood_yellow_submarine.svg" width="100%" /></a>
<p class="caption">Die selbe Moodbar bei unterschiedlichen Encoding der Audiodaten. Oben das
Beatles&ndash;Lied ,,Yellow Submarine“ als FLAC enkodiert, darunter dasselbe Lied
mit stark komprimierter MP3&ndash;Enkodierung. Die von libmunin
berechnete Moodbar&ndash;Distanz ist hier etwa 0,01.</p>
</div>
<div class="figure align-center" id="fig-mood-rammstein-tier">
<a class="reference internal image-reference" href="../../_images/mood_rammstein_tier.svg"><img alt="Moodbar einer Live und einer Studioversion von ,,Rammstein --- Tier“" src="../../_images/mood_rammstein_tier.svg" width="100%" /></a>
<p class="caption">Moodbar einer Live und einer Studioversion von ,,Rammstein &ndash;- Tier“. Oben
die Studioversion, unten die Liveversion.  Hier ist die von libmunin
errechnete Moodbar&ndash;Distanz immerhin bei 0,32.</p>
</div>
<p>Das Hauptproblem ist, dass das Verfahren ursprünglich nicht zum <em>Vergleichen</em>
von Audiodaten ausgelegt war und vom Autor lediglich dafür ,,missbraucht&quot;
wurde. Ursprünglich war das Verfahren dazu gedacht, um mittels der Farben eine
Navigationshilfe für den Hörer des Liedes zu geben. So konnte dieser stille
Bereiche schnell erkennen und zu bestimmten Stellen im Lied springen.</p>
<p>Wichtige Informationen, wie die eigentliche Stimmung in dem Lied (von <em>dunkel</em>
bis <em>positiv)</em> bis hin zum Rhythmus des Liedes, lassen sich aber nicht davon
ablesen.  Lediglich die durchschnittliche Geschwindigkeit wird vom
<tt class="docutils literal"><span class="pre">BPMProvider</span></tt> erfasst. Dieser muss aber die ganze Datei noch einmal zusätzlich
dekodieren.  Daher ist der <tt class="docutils literal"><span class="pre">MoodbarProvider</span></tt> momentan eher als <em>Notbehelf</em> zu
sehen.</p>
<p>Zudem ist die Geschwindigkeit der Audioanalyse eher dürftig. Geht das
Analysieren des RGB&ndash;Vektors an sich vergleichsweise schnell, so ist die
Generierung desselben zeitlich aufwendig. Bei MP3&ndash;enkodierten Dateien dauert
dies auf dem Entwicklungsrechners des Autors, je nach Größe, bis zu vier
Sekunden. Die Dauer variiert dabei je nach Format.  FLAC&ndash;enkodierte Dateien
brauchen oft lediglich die Hälfte dieser Zeit.
In beiden Fällen ist die Anwendung, bei einer mehreren zehntausend Lieder
umfassenden Sammlung sehr aufwendig. Neben der Liedtextsuche, ist dies der
größte Posten beim <em>Kaltstart</em>.</p>
<p>Vorteile:</p>
<ul class="simple">
<li><strong>Robustheit:</strong> Wie man in  sieht, ist das
Verfahren unempfindlich gegen verschiedene Enkodierungen. Selbst Live-
und Studioversionen zeigen gut vergleichbare Resultate (siehe Abbildung
).</li>
<li><strong>Geringer Speicherverbrauch:</strong> Obwohl für die Implementierung die relativ
speicherhungrige Sprache Python benutzt wurde, nutzt der <tt class="docutils literal"><span class="pre">MoodbarProvider</span></tt>
lediglich etwa <span class="math">\(540\)</span> Bytes pro Analysedatensatz. Da Python die Zahlen
<span class="math">\(-10\)</span> bis <span class="math">\(255\)</span> im Speicher hält und der <tt class="docutils literal"><span class="pre">MoodbarProvider</span></tt> nur
Zahlen in diesem Bereich erzeugt, reichen hier <span class="math">\(8\)</span> Byte für eine
Referenz auf ein Integer&ndash;Objekt aus.</li>
</ul>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[1]</a></td><td>Ein <em>API-Key</em> ist zum nutzerabhängigen Zugriff auf den Webdienst nötig.
Der in der URL gezeigte <em>API Key</em> ist auf <em>libmunin</em> registriert. Er sollte
nicht für andere Zwecke verwendet werden.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[2]</a></td><td><em>Anmerkung:</em> Die Idee entstand allerdings ohne Kenntnis von <em>beets</em>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[3]</a></td><td>Sollte <em>beets</em> je nach Python <span class="math">\(\ge 3,0\)</span> portiert werden, so wird
der Autor den <em>beets</em>&ndash;Autoren gern einen Patch zusenden.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="f4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td>Ein Stoppwort ist ein Wort, das nur grammatikalische Bedeutung hat,
aber keinen eigenen Relevanz besitzt. Beispiel sind die deutschen
Artikel <em>der, die das</em>.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-rst/5_learning/index"></span><div class="section" id="implizites-lernen-vom-nutzer">
<h2>5 Implizites Lernen vom Nutzer<a class="headerlink" href="#implizites-lernen-vom-nutzer" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generierung-von-regeln">
<h3>5.1 Generierung von Regeln<a class="headerlink" href="#generierung-von-regeln" title="Permalink to this headline">¶</a></h3>
<p>In vorangegangen Kapiteln wurde schon oft davon gesprochen, dass
<em>libmunin</em> den Nutzer <em>,,beobachtet&quot;</em>. Dies geschieht, indem der
Anwendungsentwickler, die vom Nutzer gehörten Titel an <em>libmunin</em> zurückmeldet.</p>
<div class="section" id="finden-von-wiederkehrenden-mustern">
<h4>5.1.1 Finden von wiederkehrenden Mustern<a class="headerlink" href="#finden-von-wiederkehrenden-mustern" title="Permalink to this headline">¶</a></h4>
<p>Um eine <em>,,Warenkorbanalyse&quot;</em> durchzuführen, braucht man erstmal <em>Warenkörbe</em>.
Diese entstehen, indem man die einzelnen Songs in der Historie zeitlich
gruppiert. Wächst eine Gruppe über eine Grenze (momentan <span class="math">\(5\)</span>), so wird
eine neue Gruppe begonnen.</p>
<p>Diese einzelnen Gruppen von Songs fungieren dann als <em>Warenkörbe.</em> Aus diesen
gilt es zuerst eine Menge an Songs (im Folgenden <em>Muster</em> <a class="footnote-reference" href="#f1" id="id1"><sup>1</sup></a> genannt) zu
finden, die jeweils oft zusammen in den einzelnen Warenkörben vorkommen. Der
naive Ansatz wäre, für jede Kombination der Eingabesongs das Vorkommen derselben
im Warenkorb zu zählen. Wie man sich bereits denken kann, ist
hierfür der algorithmische Aufwand enorm, denn bereits bei einer Menge von
<span class="math">\(1000\)</span> unterschiedlichen Songs in der Historie müssten bereits
<span class="math">\(2^{n}-1\)</span> Kombinationen gebildet werden. Denn ein Warenkorb kann man als
einer Menge von sich nicht wiederholender Songs sehen, bei der auch die
Reihenfolge keine Rolle spielt.</p>
<p>Für die Lösung dieses Problems gibt es einige etablierte Algorithmen.  Der
bekannteste ist vermutlich der <em>Apriori&ndash;Algorithmus</em> (vergleiche
<a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id2">[9]</a>, S. 248&ndash;253). Statt alle
Kombinationen zu betrachten, werden erst alle <em>,,Einer&ndash;Kombinationen&quot;</em> gebildet
und die ausgefiltert, welche einen zu niedrigen <em>Support&ndash;Count</em> besitzen. Die
Grenze legt man vorher fest. Der <em>Support&ndash;Count</em> <span class="math">\(support(A)\)</span> ist die
Anzahl der <em>Warenkörbe</em> in denen die Menge von Songs <span class="math">\(A\)</span> vorkommt, geteilt
durch die absolute Anzahl der Warenkörbe. Danach werden mit den Verbliebenen
2er&ndash;Kombination gebildet, wieder gefiltert, dann die noch relevanten
3er&ndash;Kombinationen und so weiter. Dadurch wird eine große Menge von
Kombinationen vermieden.</p>
<p>Seit einiger Zeit haben sich jedoch eine Gruppe effizienterer Algorithmen
etabliert. Dazu gehören der FP&ndash;Growth (siehe
<a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id3">[9]</a> S. 257&ndash;259, 272), Eclat (siehe
<a class="reference internal" href="rst/index.html#eclat" id="id4">[10]</a>), sowie der hier verwendete <tt class="docutils literal"><span class="pre">RELIM</span></tt>&ndash;Algorithmus, der in
<a class="reference internal" href="rst/index.html#relim" id="id5">[11]</a> vorgestellt wurde.</p>
<div class="figure align-center" id="table-itemsets">
<center><table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="9%" />
<col width="24%" />
<col width="9%" />
<col width="24%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Kombination (1er)</th>
<th class="head">Menge</th>
<th class="head">Kombination (2er)</th>
<th class="head">Menge</th>
<th class="head">Kombination (3er)</th>
<th class="head">Menge</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>A</em></td>
<td>1 <span class="math">\(\times\)</span></td>
<td><em>A, B</em></td>
<td>1 <span class="math">\(\times\)</span></td>
<td><em>A, B, C</em></td>
<td>1 <span class="math">\(\times\)</span></td>
</tr>
<tr class="row-odd"><td><em>B</em></td>
<td>3 <span class="math">\(\times\)</span></td>
<td><em>B, C</em></td>
<td>3 <span class="math">\(\times\)</span></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><em>C</em></td>
<td>3 <span class="math">\(\times\)</span></td>
<td><em>C, A</em></td>
<td>1 <span class="math">\(\times\)</span></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p class="caption">Die Muster, welche aus den drei Warenkörben {{A, B, C} {B, B, C},
{C, C, B}} generiert worden sind, mit der jeweiligen Anzahl von
Vorkommnissen in den Warenkörben.</p>
</center></div><p id="table-itemsets">In Tabelle  sieht man ein Beispiel aus drei Warenkörben,
aus denen per Hand mit der naiven Herangehensweise alle möglichen Kombinationen
samt deren Support&ndash;Count aufgelistet worden sind.</p>
</div>
<div class="section" id="der-relim-algorithmus">
<h4>5.1.2 Der <tt class="docutils literal"><span class="pre">RELIM</span></tt>&ndash;Algorithmus<a class="headerlink" href="#der-relim-algorithmus" title="Permalink to this headline">¶</a></h4>
<p>Generell gilt FP&ndash;Growth als der neue Standard&ndash;Algorithmus, der laut mehrerer
Quellen andere Algorithmen wie Eclat und <tt class="docutils literal"><span class="pre">RELIM</span></tt> (<tt class="docutils literal"><span class="pre">RE</span></tt>&ndash;<em>cursive</em> <tt class="docutils literal"><span class="pre">ELIM</span></tt>&ndash;<em>ination</em>)
aussticht <a class="reference internal" href="rst/index.html#gyhorodi2004comparative" id="id6">[12]</a> <a class="reference internal" href="rst/index.html#santhosh2010implementation" id="id7">[13]</a>.
In diesem Fall wird trotzdem auf <tt class="docutils literal"><span class="pre">RELIM</span></tt> zurückgegriffen, da dieser für die
Zwecke des Autors ausreichend schnell ist und die Datenmenge nie mehr als wenige
tausend Songs übersteigen wird. Zudem gibt es mit dem Python&ndash;Paket <em>pymining</em>
(siehe <a class="reference internal" href="rst/index.html#pymining" id="id8">[Link&ndash;19]</a>) bereits eine freie, qualitativ hochwertige
Implementierung, während es für FP&ndash;Growth nur qualitativ schlechte
Implementierungen zu geben scheint, oder welche, die nur für Python&ndash;Versionen
<span class="math">\(\leq 2,7\)</span> funktionieren.</p>
</div>
<div class="section" id="ableitung-von-regeln-aus-mustern">
<h4>5.1.3 Ableitung von Regeln aus Mustern<a class="headerlink" href="#ableitung-von-regeln-aus-mustern" title="Permalink to this headline">¶</a></h4>
<p>Hat man erstmal eine Gruppe von häufig zusammen auftretenden
Song&ndash;Kombinationen, so können daraus Assoziationsregeln abgeleitet werden.
Eine Assoziationsregel verbindet zwei Mengen <em>A</em> und <em>B</em> von Songs mit
einer gewissen Wahrscheinlichkeit miteinander. Sie besagen, dass wenn eine
der beiden Mengen miteinander gehört wird, dann ist es wahrscheinlich,
dass auch die andere Menge daraufhin angehört wird.  Regeln werden aus dem
Verhalten des Nutzers abgeleitet. Dazu wird jedes Lied, das der Nutzer
anhört, in einer <em>Historie</em> zwischengespeichert.
Um die generelle Anwendbarkeit der Regel zu beschreiben, wird für jede
Regel ein <em>Rating</em> berechnet.</p>
<p><em>Anmerkung:</em> Im allgemeinen Gebrauch sind Assoziationsregeln nur in eine
Richtung definiert.  In <em>libmunin</em> sind die Regeln aus Gründen der
Einfacheit allerdings bidirektional. So gilt nicht nur, dass man
wahrscheinlich die Menge <em>B</em> hört, wenn man <em>A</em> gehört hat (<span class="math">\(A
\rightarrow B\)</span>), sondern auch umgekehrt (<span class="math">\(A \leftrightarrow B\)</span>).
Ein natürlichsprachliches Beispiel hierfür: <span class="math">\(\frac{2}{3}\)</span> der
Basketballspieler essen Cornflakes (<span class="math">\(Basketball \Rightarrow Cornflakes\)</span>).
Diese Regel besagt, dass der größere Teil der Basketballspieler Cornflakes isst,
aber nicht, dass die meisten Cornflakes&ndash;Esser Basketballspieler sind. Da bei
<em>libmunin</em> auf beiden Seiten der Regel immer der gleiche Typ (ein oder mehrere
Songs) steht und die Beziehung immer <em>,,werden miteinander gehört&quot;</em> ist, ist
hier eine bidirektionale
Assoziation möglich.</p>
<p>Um nun aus einem Muster Regeln abzuleiten, teilt man es in alle möglichen
verschiedenen, disjunkten Teilmengen auf. Allerdings in maximal zwei Teilmengen.
Diese beiden Teilmengen nimmt man als die beiden Mengen einer Assoziationsregel
an und testet, mittels verschiedener Metriken, wie zutreffend diese ist.</p>
<div class="figure align-center" id="table-rules">
<center><table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="14%" />
<col width="15%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>Assoziationsregel</em></th>
<th class="head"><em>Support</em></th>
<th class="head"><em>Imbalance Ratio</em></th>
<th class="head"><em>Kulczynski</em></th>
<th class="head"><em>Lift</em></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math">\(\left\{A\right\} \leftrightarrow \left\{B\right\}\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\left\{B\right\} \leftrightarrow \left\{C\right\}\)</span></td>
<td><span class="math">\(1,0\)</span></td>
<td><span class="math">\(0\)</span></td>
<td><span class="math">\(1\)</span></td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math">\(\left\{C\right\} \leftrightarrow \left\{A\right\}\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td>0</td>
</tr>
<tr class="row-odd"><td> <span class="math">\(\left\{A\right\} \leftrightarrow \left\{B, C\right\}\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td>0</td>
</tr>
<tr class="row-even"><td><span class="math">\(\left\{B\right\} \leftrightarrow \left\{A, C\right\}\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td><span class="math">\(0\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td>0</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\left\{C\right\} \leftrightarrow \left\{A, B\right\}\)</span></td>
<td><span class="math">\(0,\overline{3}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td><span class="math">\(0,\overline{6}\)</span></td>
<td><span class="math">\(0,\overline{8}\)</span></td>
</tr>
</tbody>
</table>
<p class="caption">Mögliche Regeln, die aus den drei Warenkörben erstellt werden können.
Zusätzlich wird der dazugehörige Gesamt&ndash;Support&ndash;Count, sowie die
beiden Metriken Imbalance&ndash;Ratio und Kulczynski abgebildet.</p>
</center></div><p id="table-rules">Als Beispiel kann man wieder die Warenkörbe aus Tabelle  nehmen.
Muster mit nur einem Song können nicht weiter aufgeteilt werden, daher müssen
diese nicht weiter betrachtet werden. Die Zweier&ndash;Kombination sind leicht in zwei
disjunkte Teilmengen aufteilbar. Für die Dreier&ndash;Kombinationen können mehrere
mögliche Teilmengen erstellt werden. Die einzelnen möglichen Regeln werden in
Tabelle  aufgelistet.</p>
<div class="figure align-center" id="table-cornflakes">
<center><blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="21%" />
<col width="32%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Eigenschaft</strong></th>
<th class="head"><span class="math">\(Basketball\)</span></th>
<th class="head"><span class="math">\(\overline{Basketball}\)</span></th>
<th class="head"><span class="math">\(\sum\)</span></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math">\(Cornflakes\)</span></td>
<td>400</td>
<td>350</td>
<td>750</td>
</tr>
<tr class="row-odd"><td><span class="math">\(\overline{Cornflakes}\)</span></td>
<td>200</td>
<td>50</td>
<td>250</td>
</tr>
<tr class="row-even"><td><span class="math">\(\sum\)</span></td>
<td>600</td>
<td>400</td>
<td>1000</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="caption">Vierfeldertafel mit erfundenen Beispieldaten. Es werden 1000
Studenten untersucht, bei denen die Eigenschaften ,,Spielt
Basketball” und ,,Isst Cornflakes” festgestellt worden sind.</p>
</center></div><p id="table-cornflakes">Nicht jede Regel ist automatisch eine gute Regel.  Ein gängiges Lehrbeispiel
wäre hier die Regel <span class="math">\(Basketball \Rightarrow Cornflakes\)</span>, also eine Regel,
die laut Tabelle  besagt, dass <span class="math">\(\frac{2}{3}\)</span> aller
<em>Basketballspieler</em> zum Frühstück <em>Cornflakes</em> essen.  Der Anteil der Menschen
die aber insgesamt Cornflakes essen liegt aber bei <span class="math">\(75\%\)</span> &ndash;- daher ist
die Eigenschaft <em>,,Basketballspieler&quot;</em> sogar im Vergleich, zum durchschnittlichen
Anteil von Cornflake&ndash;Essern, ein Gegenindiz für diese Eigenschaft.</p>
<p>Um solche kontraproduktiven Assoziationsregeln zu vermeiden, werden für jede
Regel zwei Metriken errechnet. Die von <em>libmunin</em> genutzten Metriken wurden dem
Buch <em>Datamining Concepts and Techniques</em>
(<a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id9">[9]</a>, S. 268&ndash;271) entnommen: Die
<em>Kulczynski&ndash;Metrik</em> und der <em>Imbalance&ndash;Ratio</em>.</p>
<p>Die <em>Kulczynski&ndash;Metrik</em> drückt die Güte der Regel als eine reelle Zahl im
Bereich <span class="math">\(\lbrack 0, 1\rbrack\)</span> aus, wobei <span class="math">\(1\)</span> die beste Wertung ist.
Grob ausgedrückt besagt die Metrik, wie zutreffend die Regel im Durchschnitt
ist. <tt class="docutils literal"><span class="pre">A</span></tt> und <tt class="docutils literal"><span class="pre">B</span></tt> sind im Folgenden die beiden nicht&ndash;leeren Teilmengen der
Regel:</p>
<div class="math">
\[Kulczynski(A, B) =  \frac{1}{2} \times \big(P(A \mid B) + P(B \mid A)\big)\]</div>
<p>Diese Metrik ist der Durchschnitt aus zwei Variationen einer anderen Metrik: Dem
<em>confidence</em>&ndash;Measure (vergleiche <a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id10">[9]</a>, S. 254f.):</p>
<div class="math">
\[confidence(A \rightarrow B) = P(A\mid B) = \frac{P(A\cap B)}{P(B)} = \frac{support(A \cap B)}{support(B)}\]</div>
<p>Diese Metrik gibt an, zu welchem Prozentsatz die Regel zutrifft. Ist der Quotient
<span class="math">\(1\)</span>, so trifft die Regel bei jedem bekannten Warenkorb zu.  Der Zähler
<span class="math">\(support(A\cap B)\)</span> beschreibt hier, wie oft sowohl <em>A</em> und <em>B</em>
gleichzeitig in einem Warenkorb vorkommen.
Bereits allein ist diese Metrik ein
gutes Indiz für die Korrektheit einer Regel, die Kulczynski&ndash;Metrik prüft
zusätzlich beide Seiten der Regel.  Um zu zeigen wie sich die Kulczynski&ndash;Metrik
berechnen lässt, können wir die obige Definition umstellen:</p>
<div class="math">
\[Kulczynski(A, B) = \frac{1}{2} \times \left(\frac{support(A\cap B)}{support(B)} + \frac{support(A\cap B)}{support(A)}\right)\]</div>
<p>Diese Metrik allein reicht allerdings nicht für eine qualitative Einschätzung
einer Regel. Zwar kann die Regel oft zutreffen, doch kann sie, wie im obigen
Beispiel mit den <em>Cornflakes</em>, trotzdem kontraproduktiv sein.
Daher wird mit dem <em>Imbalance Ratio</em> eine weitere Metrik
eingeführt. Der <em>Imbalance Ratio</em> gibt im Bereich <span class="math">\(\lbrack 0, 1\rbrack\)</span>
an, wie unterschiedlich beide Seiten der Regel sind. Treten die Muster
unterschiedlich oft auf, so steigt diese Metrik. Hier ist der beste Wert die
<span class="math">\(0\)</span>, der Schlechteste eine <span class="math">\(1\)</span>.   Er ist gegeben durch:</p>
<div class="math">
\[ImbalanceRatio(A, B) = \frac{\vert support(A) - support(B)\vert}{support(A) + support(B) - support(A \cap B)}\]</div>
<p>Sollte die <em>Kulczynski&ndash;Metrik</em> kleiner als <span class="math">\(0,\overline{6}\)</span> sein oder der
<em>Imbalance&ndash;Ratio</em> größer als <span class="math">\(0,35\)</span>, so wird die Regel fallen gelassen.
Diese Grenzwerte wurden, mehr oder minder willkürlich, nach einigen Tests
festgelegt.  Sollte die Regel akzeptabel sein, dann werden beide Metriken in
eine einzelne, leichter zu handhabende <em>Rating&ndash;Metrik</em> verschmolzen:</p>
<div class="math">
\[Rating(A, B) = \left(1 - ImbalanceRatio(A, B)\right) \times Kulczynski(A, B)\]</div>
<p>Dieses <em>Rating</em> wird genutzt, um die einzelnen Assoziationsregeln zu sortieren.
Das finale Rating bewegt sich im Bereich <span class="math">\(\lbrack 0, 1\rbrack\)</span>, wobei
<span class="math">\(1\)</span> das höchste vergebene Rating ist.</p>
<p>Nach einigen Tests erwiesen sich beide Metriken aber nicht als ausreichend.
Daher wurde noch zusätzlich die <em>Lift&ndash;Metrik</em> eingeführt (vergleiche
<a class="reference internal" href="rst/index.html#datamining-concepts-and-techniques" id="id11">[9]</a>, S.266). Diese ist definiert als:</p>
<div class="math">
\[Lift(A, B) = P(A \mid B) - (P(A) \times P(B)) = support(A \cap B) - \left(support(A) \times support(B)\right)\]</div>
<p>Ist der berechnete Wert <span class="math">\(&lt; 0\)</span>, so wird die Regel ignoriert.  Für die
unter Tabelle  gezeigten Werte können nun die einzelnen
Metriken angewandt werden:</p>
<div class="math">
\[Kulczynski(Basketball, Cornflakes) = \frac{1}{2} \times \left(\frac{400}{600} + \frac{400}{750}\right) = 0,6\]</div>
<p>Dieses Ergebnis würde zum Ausschluss der Regel führen, da <span class="math">\(0,6 &lt;
0.\overline{6}\)</span> ist.  Allerdings ist dies, für diese kontraproduktive Regel, ein
knappes Ergebnis, da die Grenze von <span class="math">\(\overline{0,6}`\)</span> willkürlich
gewählt wurde.</p>
<div class="math">
\[ImbalanceRatio(Basketball, Cornflakes) = \frac{\vert 750 - 600 \vert}{750 + 600  - 400} = \;\;\approx{0,16}\]</div>
<p>Beim <em>ImbalanceRatio</em> war <span class="math">\(0\)</span> der beste anzunehmende Wert. Laut dem
Ergebnis von <span class="math">\(0,16\)</span> wäre diese Regel also sogar gut balanciert.</p>
<div class="math">
\[Lift(Basketball, Cornflakes) = \frac{400}{1000} - \left( \frac{750}{1000} \times \frac{600}{1000} \right) = -0,05\]</div>
<p>Der <em>Lift</em> führt mit einem Ergebnis <span class="math">\(&lt; 0\)</span> zu einer definitiven Filterung
der Regel.</p>
</div>
</div>
<div class="section" id="anwendung-von-regeln">
<h3>5.2 Anwendung von Regeln<a class="headerlink" href="#anwendung-von-regeln" title="Permalink to this headline">¶</a></h3>
<p>Wie bereits unter Kapitel <a class="reference internal" href="rst/index.html#ref-graphops-rules">3.2.2</a> erklärt, werden Assoziationsregel
als Navigationshilfe beim Traversieren genutzt.  Zu diesem Zwecke müssen die
entstandenen Regeln irgendwo sortiert abgelegt werden.  Diese Ablage ist der
<tt class="docutils literal"><span class="pre">RuleIndex</span></tt>. Beim Einfügen wird jeweils überprüft, ob die Maximalanzahl an
Regeln (momentan maximal <span class="math">\(1000\)</span>) übertroffen wird. Sollte dem so sein,
wird die älteste (ergo, zu erst eingefügte) Regel gelöscht um Platz zu machen.
Der Anwendungsentwickler kann mittels der <tt class="docutils literal"><span class="pre">lookup(song)</span></tt>&ndash;Methode eine Liste
von Regeln abfragen, die diesen Song in irgendeiner Weise betreffen. Um diese
Operation zu beschleunigen, wird intern eine Hashtabelle gehalten, mit dem Song
als Schlüssel und der entsprechende Regel&ndash;Liste als zugehöriger Wert.
Bei jeder Operation auf dem <tt class="docutils literal"><span class="pre">RuleIndex</span></tt> wird dieser automatisch bereinigt.
Dabei werden Regeln entfernt, die Songs erwähnen, welche nicht mehr in der
Historie vertreten sind.</p>
</div>
<div class="section" id="lernerfolg">
<h3>5.3 Lernerfolg<a class="headerlink" href="#lernerfolg" title="Permalink to this headline">¶</a></h3>
<p>Noch sind keine Aussagen darüber möglich, wie gut die momentane Lernstrategie
funktioniert. Einerseits ist es schwer festzustellen was <em>,,gut&quot;</em> bedeutet,
andererseits wurde eine <em>libmunin&ndash;Session</em> noch nie lange genug benutzt,
um Aussagen über die Langzeitfunktionalität zu geben.</p>
<p>Daher ist die oben genannte Vorgehensweise als ,,Hypothese&quot; zu sehen, die sich
erst noch in der Praxis bewähren muss. Änderungen sind wahrscheinlich.
Zudem muss auch auf Seite der Implementierung noch ein Detail verbessert werden:
Momentan wird nur die Historie aufgezeichnet, wenn die Demonanwendung läuft. Da
die Anwendung lediglich eine Fernbedienung für den MPD ist, läuft diese nicht
die ganze Zeit über. Abhilfe würde ein separater MPD&ndash;Client, der nur dafür
dient im Hintergrund die Historie&ndash;Daten mitzuloggen.</p>
</div>
<div class="section" id="explizites-lernen">
<h3>5.4 Explizites Lernen<a class="headerlink" href="#explizites-lernen" title="Permalink to this headline">¶</a></h3>
<div class="figure compound align-center" id="fig-modify-moves">
<div style="width: 75%" class="subfigure align-center" id="fig-move-before">
<a class="reference internal image-reference" href="../../_images/big_move_before_edit.png"><img alt="Graph vor dem Vergeben eines hohen Ratings." src="../../_images/big_move_before_edit.png" style="width: 95%;" /></a>
<p class="caption">Vor dem Vergeben der Ratings.</p>
</div>
<div style="width: 75%" class="subfigure align-center" id="fig-move-after">
<a class="reference internal image-reference" href="../../_images/big_move_after_edit.png"><img alt="Graph nach dem Vergeben eines hohen Ratings" src="../../_images/big_move_after_edit.png" style="width: 95%;" /></a>
<p class="caption">Nach dem Vergeben der Ratings. Die Bewegung wird durch Pfeile angedeutet.</p>
</div>
<p class="caption">Vor und nach dem Vergeben von einem hohen Rating an drei Lieder
(,,Rachsucht”, ,,Nagelfar”, ,,Meine Brille”, jeweils rot eingekreist).
Die dazugehörigen Alben sind in rötlich, grünlich und bläulich
hervorgehoben. Nach dem Vergeben sieht man, dass die entsprechenden Songs
sich von den einzelnen Alben&ndash;Clustern räumlich entfernt haben und
Verbindungen zu anderen Alben bekommen haben. Zudem haben sich die beiden
erstgenannten Songs miteinander verbunden.</p>
</div><p id="fig-modify-moves">Bei einer <tt class="docutils literal"><span class="pre">insert</span></tt>&ndash;Operation lässt sich beobachten, dass die eingefügten
Songs deutlich deutlich weitläufiger verbunden sind, als regulär per <tt class="docutils literal"><span class="pre">add</span></tt>
hinzugefügte. Diese Eigenschaft macht sich die in der Projektarbeit
(<a class="reference internal" href="rst/index.html#aaa-cpahl" id="id12">[1]</a>, S.37ff) gezeigte Demonanwendung zu Nutze: Ändert man das Rating eines
Songs, so wird der Song mittels <tt class="docutils literal"><span class="pre">remove</span></tt> gelöscht und mittels  <tt class="docutils literal"><span class="pre">insert</span></tt> an
anderer Stelle wieder eingefügt. Meist verbindet sich dabei der Song, dann mit
anderen ähnlich bewerteten Songs. Diese bilden ein <em>zusätzliches Netz</em> über dem
Graphen, welches weitläufigere Sprünge ermöglicht.  Dadurch hat der Nutzer eine
Möglichkeit den Graphen seinen Vorstellungen nach umzubauen.</p>
<p>Unter Abbildung  soll dieses ,,explizite Lernen&quot; nochmal
visualisiert werden. Die dort abgebildete Verschiebung ist dadurch zu erklären,
dass die <tt class="docutils literal"><span class="pre">insert</span></tt>&ndash;Operation meist einen anderen Punkt zum Wiedereinfügen
findet.  Durch Ändern des Ratings in der Demonanwendung können daher einzelne
Knoten gezielt im Graphen bewegt werden. Knoten mit ähnlichem Rating wandern
näher zusammen und stellen <em>,,Brücken&quot;</em> zu anderen Alben&ndash;Clustern her. Man kann
dieses <em>Feature</em> einerseits dazu nutzen, um seine Favoriten nahe im Graphen
zusammenzupacken, andererseits, um unpassende Empfehlungen mit einem schlechten
Rating abzustrafen, was eine <tt class="docutils literal"><span class="pre">insert</span></tt>&ndash;Operation auf diesen Song zur Folge
hätte.  Dadurch wird er möglicherweise an anderer Stelle besser eingepasst.</p>
<p>Der <em>,,Mechanismus&quot;</em> des <em>expliziten Lernens</em> ist war mehr ein Nebeneffekt der
Entwicklung. Zukünftige Versionen könnten leichter steuerbar und intuitiver
verständliche Mechanismen anbieten.  Ein Ansatz wäre der Weg, den <em>Intelligente
Playlisten</em> bei vielen Music&ndash;Playern gehen: Der Nutzer stellt Beziehungen
zwischen Attributen und Werten her. Ein Attribut wäre beispielsweise <tt class="docutils literal"><span class="pre">date</span></tt>,
ein Wert <tt class="docutils literal"><span class="pre">2010</span></tt> und eine Beziehung <span class="math">\(\ge\)</span>.  Weitere Beziehungen wären
<span class="math">\(=\)</span>, <span class="math">\(\neq\)</span>, <span class="math">\(&lt;\)</span> oder <span class="math">\(\le\)</span>.
Mit den unterschiedlichen Attributen, wären dann automatisch erstellte
Playlisten wie  <em>,,Favouriten&quot;</em> (<span class="math">\(rating &gt; 3\)</span>), <em>,,Ungehörte&quot;</em>
(<span class="math">\(Playcount = 0\)</span>) und <em>,,Neu Hinzugefügte&quot;</em> (<span class="math">\(date &gt; (today - 7
\times days)\)</span>) möglich.  Für Letzere könnten hilfreiche Konstanten wie <span class="math">\(today\)</span>
eingeführt werden.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>In englischer Lektüre werden die <em>Wiederkehrenden Muster</em> als <em>Frequent
Itemsets</em> bezeichnet.</td></tr>
</tbody>
</table>
</div>
</div>
<span id="document-rst/6_outro/index"></span><div class="section" id="ausblick">
<h2>6 Ausblick<a class="headerlink" href="#ausblick" title="Permalink to this headline">¶</a></h2>
<div class="section" id="verbesserung-der-algorithmik">
<h3>6.1 Verbesserung der Algorithmik<a class="headerlink" href="#verbesserung-der-algorithmik" title="Permalink to this headline">¶</a></h3>
<p>Im Folgenden werden einige Ideen für mögliche Weiterenwicklungen an
den vorgestellten Algorithmen gegeben.  Einige davon sind vergleichsweise
einfach umsetzbar. Andere könnten die Grundlage für fortführende Arbeiten sein.</p>
<div class="section" id="audioanalyse">
<h4>6.1.1 Audioanalyse<a class="headerlink" href="#audioanalyse" title="Permalink to this headline">¶</a></h4>
<p>Wie bereits erwähnt ist <em>libmunin's</em> momentane <em>,,Audioanalyse&quot;</em> eher simpler
Natur.  Als konkrete Vorlage für eine verbesserte Audioanalyse könnte <em>Mirage</em>
dienen. In seiner Arbeit stellt der Mirage&ndash;Autor <a class="reference internal" href="rst/index.html#schnitzer2007high" id="id1">[2]</a>
Dominik Schnitzer einige Herangehensweisen zum performanten Vergleich von
Audiodaten vor.</p>
<p>Angesichts der hohen Entwicklungsgeschwindigkeit in der Informatik und dem
<em>,,hohem&quot;</em> Alter der Arbeit (<span class="math">\(2007\)</span>) sollte allerdings beachtet werden,
dass es bereits neuere Methoden geben könnte. Beispielsweise arbeitet Schnitzer
<em>nur</em> mit MP3&ndash;Audiodaten <a class="footnote-reference" href="#f1" id="id2"><sup>1</sup></a>. Eine Abhilfe wäre die relativ neue Bibliothek
<em>libaubio</em>, die von <em>Paul Brossier</em> <a class="reference internal" href="rst/index.html#aubio" id="id3">[Link&ndash;20]</a> entwickelt wird. Zum
Dekodieren der Audiodaten (<em>libaubio</em> erwartet PCM&ndash;Daten) könnte das weit
verbreitete Audio&ndash;Framework <em>GStreamer</em> <a class="reference internal" href="rst/index.html#gstreamer" id="id4">[Link&ndash;21]</a> verwendet werden.</p>
<p><em>Aubio</em> könnte folgendes leisten:</p>
<ul class="simple">
<li>Exaktere Bestimmung des <em>BPM&ndash;Wertes</em>. Beziehungsweise könnte man auch einen
Verlauf des <em>BPM&ndash;Wertes</em>, über das Musikstück, aufzeichnen um exaktere
Vergleiche ziehen zu können.</li>
<li><em>Onset&ndash;Detection</em>, also das Erkennen einzelner Noten beziehungsweise
<em>Sounds</em> innerhalb des Musikstücks.</li>
<li>Eine direkte Möglichkeit, die Stimmung in einem Lied zu analysieren, wird
momentan zwar noch nicht geboten, aber die dazu benötigten Informationen, wie
die Erkennung der Tonlage zu einem bestimmten Zeitpunkt werden angeboten.
Die technischen Details dazu werden in <a class="reference internal" href="rst/index.html#schnitzer2007high" id="id5">[2]</a> diskutiert.</li>
</ul>
<p>Die Bibliothek selber ist in <cite>C</cite> geschrieben, bietet aber eine komfortable
Python&ndash;Schnitstelle.</p>
<p>Eine weiter Idee, wäre der Versuch, möglichst intelligent reine Sprachdateien
(wie <em>Hörbücher),</em> Instrumental&ndash;Lieder ohne Stimme (wie <em>Intros)</em> und normale
Musik zu unterscheiden. Oft werden zu bestimmten Titeln unpassenderweise
<em>Intros</em> vorgeschlagen, die man für gewöhnlich nur hören möchte, wenn man das
gesamte Album von vorn bis hinten anhört. Auch hier wäre ein Einsatz von
<em>libaubio</em> denkbar.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>Mirage verlässt sich dabei auf bestimmte Eigenschaften von MP3,
um die Daten schneller in seine interne Datenrepräsentation zu
konvertieren.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="andere-provider">
<h4>6.1.2 Andere Provider<a class="headerlink" href="#andere-provider" title="Permalink to this headline">¶</a></h4>
<p>Wie man im Playlistenvergleich unter Kapitel <a class="reference internal" href="rst/index.html#ref-playlist-compare">2.5</a> gesehen
hat, ist momentan der Vergleich der Metadaten die Stärke von <em>libmunin</em>. Diese
Fähigkeit könnte noch weiter ausgebaut werden, indem die Sprache der einzelnen
Titel (denn nicht immer sind Liedtexte vorhanden) erkannt wird. Dann könnte man
mittels eines Thesaurus synonyme Titel finden. Für Python existiert mit
<em>TextBlob</em> <a class="reference internal" href="rst/index.html#textblob" id="id6">[Link&ndash;22]</a> hierfür eine passende Bibliothek. <br /> Kommt
beispielsweise in einem Liedtitel das Wort <em>,,Sofa&quot;</em> vor, so könnte ein Titel
mit dem synonymen Wort ,,Couch&quot; darin vorgeschlagen werden.  Auch Taxonomien,
also ähnliche Klassifikationen, sind denkbar. Man denke hier an einem Lied
welches das Wort <em>,,Katze&quot;</em> enthält und ein anderes das <em>,,Tier&quot;</em> beinhaltet.
<br /> In der momentanen Implementierung wird jedes Wort im Titel auf seinen
Wortstamm gebracht und mittels der Levenshtein&ndash;Distanzfunktion verglichen.
Diese Lösung war zwar leicht zu implementieren, ist aber algorithmisch teuer und
ungenau.</p>
<p>Auch interessant zu sehen wäre es, ob die Länge der einzelnen Stücke in
irgendeiner Form mit der Ähnlichkeit korrelieren. Hier müssten statistische
Auswertungen gemacht werden, um diesen Zusammenhang zu überprüfen. Falls sich
ein Zusammenhang zeigen sollte, ließe sich eine einfache
<tt class="docutils literal"><span class="pre">DurationDistanceFunction</span></tt> schreiben welche ähnlich lange Stücke gut bewertet.</p>
</div>
<div class="section" id="empfehlungen">
<h4>6.1.3 Empfehlungen<a class="headerlink" href="#empfehlungen" title="Permalink to this headline">¶</a></h4>
<div class="figure align-center" id="fig-traverse-areas">
<a class="reference internal image-reference" href="../../_images/traverse_areas.svg"><img alt="Schematische Darstellung der idealen Traversierungsreihenfolge" src="../../_images/traverse_areas.svg" width="75%" /></a>
<p class="caption">Schematische Darstellung der idealen Traversierungsreihenfolge.
Die roten Knoten stelln die Seedsongs dar, die gelben und orangen Knoten sind
direkte Nachbarn. Die grünen Knoten sind ,,irgendwo” dazwischen. Die
Traversierungsreihenfolge sollte hier sein: Orange, Gelb, Grün.</p>
</div>
<p>Oft kommt es vor, dass es mehr als einen <em>Seedsong</em> gibt. Die momentane, simple
Herangehensweise, ist für jeden einen Iterator zu erstellen und die einzelnen
Iteratoren im Reißverschlussverfahren zu verweben. Das ist durchaus valide, wenn
man annimmt, dass die <em>Seedsongs</em> im Graphen verteilt und alle gleich
wichtig sind. Oft ballen sich Seedsongs aber auf einem bestimmten Gebiet.
Schematisch ist das in Abbildung  dargestellt. Besitzen zwei
<em>Seedsongs</em> gemeinsame Nachbarn, dann sollten diese zuerst besucht werden.</p>
<p>Auch ist das Ausgabeformat von <em>libmunin</em> noch auf einzelne Songs als
Empfehlung beschränkt. Nicht selten möchte man jedoch eine allgemeinere
Auskunft wie <em>,,Gib mir einen ähnlichen Künstler/Album/Genre&quot;</em>. Momentan wäre
dies nur durch Auslesen der jeweiligen Attribute aus den einzelnen Empfehlungen
möglich. Allerdings könnten hier von <em>libmunin</em> optimierte
Traversierungsstrategien implementiert werden.</p>
</div>
</div>
<div class="section" id="erweiterungen">
<h3>6.2 Erweiterungen<a class="headerlink" href="#erweiterungen" title="Permalink to this headline">¶</a></h3>
<p>Die verwendeten Metadaten könnten ebenfalls erweitert werden. Für die
Ähnlichkeit sind unter Umständen auch Attribute wie der <em>Producer</em>, die
<em>Band&ndash;Mitglieder</em> oder die <em>Herkunft der Band</em> relevant. Einfache Beispiele
hier wären ,,Wer Songs von den Ärzten hört, der hört vermutlich auch gern Farin
Urlaub Racing Team&quot; &ndash;- natürlich unter der Annahme, dass derselbe Künstler auch
immer ähnliche Musik produziert.</p>
<p>Was das Lernen von <em>libmunin</em> angeht, so sollten auch <em>,,negative Impulse&quot;</em>
behandelt werden. Wird beispielsweise ein bestimmtes Lied oder gar ein Künstler
sehr oft übersprungen, könnte <em>libmunin</em> dies berücksichtigen,
indem es bei der Traversierung diesen Knoten umgeht. Alternativ wäre auch ein
nachträgliches Filtern der entsprechenden Lieder möglich.</p>
<p>Allgemein wäre auch eine Erweiterung von Assoziationsregeln denkbar. Momentan
verbindet eine Regel immer zwei Mengen von Songs miteinander. Alternativ könnten
aber auch verschiedene Genres, Künstler oder auch Alben in einer
Regel miteinander verbunden werden. Das Erstellen solcher  Regeln wäre relativ
einfach mit der existierenden Implementierung. Was problematisch ist, ist diese neuen
Regeln als <em>Traversierungshilfe</em> zu nutzen.</p>
<p>Ein weiterer Punkt, den man beim Lernen verbessern könnte, sind die
Gewichtungen, die manuell für jedes Attribut festgelegt werden. Man könnte den
Nutzer detaillierter beobachten und sehen nach welchem Attribut er bevorzugt
seine Lieder auswählt (beispielsweise nach Genre). Das entsprechende Attribut
könnte dann höher gewertet werden.</p>
<p>Auch wäre ein zusätzliches Modul möglich, das <em>libmunin</em> nutzt, um Suchanfragen
basierend auf natürlicher Sprache zu ermöglichen. So könnten Anfragen wie
<em>,,Happy Indie Pop&quot;</em> aufgelöst werden. Im Beispiel würde sich <em>Happy</em> auf die
Stimmung beziehen, <em>Pop</em> auf das Genre und <em>Indie</em> auf einen
Independent&ndash;Künstler. Letztere Information könnte man aus der Künstlerbiografie
extrahieren. Die Biografie kann automatisch von Tools wie <em>libglyr</em>
besorgt werden oder man greift alternativ auf Amazon&ndash;Rezensionen zurück. So
gesehen bietet sich hier ein Erweiterungspotenzial in Richtung
<em>,,Social&ndash;based&ndash;Recommendations&quot;</em>. Also nutzt man das Wissen von vielen
Menschen, um bestimmte Attribute zu bestimmen, anstatt diese mithilfe von Metriken
zu errechnen.
Die eigentliche Schwierigkeit bestünde aber darin, die einzelnen Wörter
bestimmten Attributen zuzuordnen. Diese Idee basiert auf der Musiksuchmaschine
von <em>Peter Knees</em> <a class="reference internal" href="rst/index.html#knees2007music" id="id7">[14]</a>.</p>
</div>
<div class="section" id="fazit">
<h3>6.3 Fazit<a class="headerlink" href="#fazit" title="Permalink to this headline">¶</a></h3>
<p>Momentan ist <em>libmunin</em> vor allem eine Spielwiese für verschiedene Ideen rund um
die Frage, wie man einem Computer die Ähnlichkeit von zwei Musikstücken
feststellen lässt. Trotzdem erstellt <em>libmunin</em> selbst als Prototyp in seiner
Standardeinstellung bereits durchaus nützliche Playlisten. Aufgrund der
kurzen Implementierungszeit für ein solches System, von etwas mehr als 3
Monaten, ist dies nach Meinung des Autors durchaus als Erfolg zu werten.</p>
<p>Die größte Schwäche ist aus Sicht des Autors der langsame Kaltstart, der einen
produktiven Einsatz der Bibliothek verhindert. In punkto Weiterentwicklung,
sollte dies die höchstpriosierte Aufgabe sein.</p>
<p>Die Neuerung dieser Arbeit ist weniger die vorgestellte Algorithmik. Der
allergrößte Teil dieser existiert natürlich bereits in ähnlicher Form. Die
eigentliche Neuerung ist, dass diese Funktionalität erstmals in einer allgemein
nutzbaren, freien Bibliothek vorhanden ist.</p>
</div>
</div>
</div>
<p><strong>Abkürzungsverzeichnis</strong></p>
<div class="figure align-center">
<center><table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head align-top">Abkürzung</th>
<th class="head align-top">Bedeutung</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="align-top">API</td>
<td class="align-top"><em>Application Programming Interface</em></td>
</tr>
<tr class="row-odd"><td class="align-top">BPM</td>
<td class="align-top"><em>Beats per Minute</em></td>
</tr>
<tr class="row-even"><td class="align-top">FAQ</td>
<td class="align-top"><em>Frequently Asked Questions</em></td>
</tr>
<tr class="row-odd"><td class="align-top">URL</td>
<td class="align-top"><em>Uniform Resource Locator</em></td>
</tr>
<tr class="row-even"><td class="align-top">MP3</td>
<td class="align-top"><em>MPEG-2 Audio Layer III</em></td>
</tr>
<tr class="row-odd"><td class="align-top">FLAC</td>
<td class="align-top"><em>Free Lossless Audio Codec</em></td>
</tr>
</tbody>
</table>
</center></div><div class="toctree-wrapper compound">
<span id="document-rst/appendix"></span><div class="section" id="bilder-des-song-graphen">
<span id="song-graph-vis"></span><h2>Bilder des Song&ndash;Graphen<a class="headerlink" href="#bilder-des-song-graphen" title="Permalink to this headline">¶</a></h2>
<p><strong>Allgemeine Hinweise</strong></p>
<p>Folgende visuelle Aspekte sind mit Informationen besetzt:</p>
<ul class="simple">
<li><em>Kantenfarbe:</em> Rote Farbe indiziert eine hohe Distanz. Grün eine mittlere
Distanz (etwa <span class="math">\(0,5\)</span>). Blau bis violett eine gute bis sehr gute
(<span class="math">\(0,1\)</span> bis <span class="math">\(0,0\)</span>). Rote Kanten sieht man in der Praxis selten, da
in den meisten Fällen immer ein guter Nachbar gefunden werden kann.</li>
<li><em>Kantendicke:</em> Zur optischen Untermalung variiert die Dicke der Kanten je nach
Distanz. Hohe Distanzen bekommen eine dünnere Kante.</li>
<li><em>Knotenfarbe:</em> Zeigt grob die <em>,,Zentralität&quot;</em> des Knotens an. Bietet
lediglich eine optische Navigationshilfe um auf Cluster hinzuweisen.</li>
<li>Der visuelle Abstand zwischen zwei Knoten hat <em>keine</em> Aussagekraft, auch wenn
ähnliche Knoten oft nah beieinander liegen.</li>
</ul>
<p>Die Abbildungen  bis 
und  bis  zeigen den
Aufbau des Graphen anhand von linearen und pseudozufälligen generierten
Testdaten mit jeweils 100, beziehungsweise <span class="math">\(200\)</span> Knoten.  Abbildung
 zeigt einen realen, praktischen Graphen mittlerer Größe
mit <span class="math">\(666\)</span> Knoten. Die Liedtitel wurden jeweils an die Knoten geschrieben.</p>
<p>Bei den linearen Testdaten werden die Zahlen von <span class="math">\(100\)</span> bis <span class="math">\(1\)</span>
absteigend jedem neuen Knoten gegeben. Das Resultat sollte im optimalen Fall
daher eine Kette von Knoten zeigen, deren Knotennummer von einem Ende zum
Anderen immer weiter steigt.  Die pseudozufälligen Testdaten mischen die
erwähnten linearen Daten mit zusätzlichen zufällig erscheinenden Daten gleicher
Anzahl.  Diese sind zum größten Teil auf den Bereich 25&ndash;75 aufgeteilt. Es
sollte ein Graph entstehen, der ähnlich linear ist, aber in der Mitte eine
<em>,,Verdichtung&quot;</em> aufweist.  Beides sind Testdaten, die häufig zum Testen von
<em>libmunin</em> genutzt worden sind, da sie spezielle Extremfälle gut testen. Die linearen
Testdaten sind bereits nach der Basisiteration einsetzbar. Die linearen Enden
der pseudozufälligen Daten werden mit jeder Iteration klarer. Im Vergleich zu
<tt class="docutils literal"><span class="pre">rebuild_stupid</span></tt> fällt hier auf, dass <tt class="docutils literal"><span class="pre">rebuild</span></tt> zur Bildung von mehr Kanten
neigt.</p>
<p><strong>Plotting der Graphen</strong></p>
<p>Alle Graphen in diesem Teil des Anhangs sind mithilfe des freien
Python&ndash;Graphenframeworks <tt class="docutils literal"><span class="pre">igraph</span></tt> <a class="reference internal" href="rst/index.html#igraph" id="id1">[Link&ndash;23]</a> entstanden. Als
Zeichenbibliothek nutzt <tt class="docutils literal"><span class="pre">igraph</span></tt> die freie 2D&ndash;Zeichenbibliothek <tt class="docutils literal"><span class="pre">cairo</span></tt>
<a class="reference internal" href="rst/index.html#cairo" id="id2">[Link&ndash;24]</a>.  Der verwendete Layouting&ndash;Algorithmus ist
<em>,,Fruchtermann&ndash;Reingold&quot;</em>.</p>
<div class="figure compound align-center" id="fig-graph-linear">
<div style="width: 47.5%" class="subfigure align-center" id="fig-graph-linear-basic">
<a class="reference internal image-reference" href="../../_images/graph_linear_basic.png"><img alt="Nur mit ``sliding_window`` behandelte Eingabe" src="../../_images/graph_linear_basic.png" style="width: 100%;" /></a>
<p class="caption">Nur mit <tt class="docutils literal"><span class="pre">sliding_window</span></tt> behandelte Eingabe.</p>
</div>
<div style="width: 47.5%" class="subfigure align-center" id="fig-graph-linear-all">
<a class="reference internal image-reference" href="../../_images/graph_linear_all.png"><img alt="Zusätzlich mit dem ``centering_window`` und ``anti_centering_window`` behandelt" src="../../_images/graph_linear_all.png" style="width: 100%;" /></a>
<p class="caption">Zusätzlich mit dem <tt class="docutils literal"><span class="pre">centering_window</span></tt> und <tt class="docutils literal"><span class="pre">anti_centering_window</span></tt> behandelt.</p>
</div>
<div style="width: 47.5%" class="subfigure align-center" id="fig-graph-linear-refine">
<a class="reference internal image-reference" href="../../_images/graph_linear_refine.png"><img alt="Zusätzliche Verfeinerungsphase" src="../../_images/graph_linear_refine.png" style="width: 100%;" /></a>
<p class="caption">Zusätzliche Verfeinerungsphase.</p>
</div>
<div style="width: 47.5%" class="subfigure align-center" id="fig-graph-linear-stupid">
<a class="reference internal image-reference" href="../../_images/graph_linear_stupid.png"><img alt="Mittels ``rebuild_stupid`` generierter Vergleichsgraph" src="../../_images/graph_linear_stupid.png" style="width: 100%;" /></a>
<p class="caption">Mittels <tt class="docutils literal"><span class="pre">rebuild_stupid</span></tt> generierter Vergleichsgraph.</p>
</div>
<p class="caption">Verschiedene Stufen beim Aufbau eines Graphen aus linearen Testdaten. Die
Testdaten bestehen aus den Integern 1 bis 100.  Erwartet wird dabei als
Ausgabe eine lineare Kette von Knoten, wobei jeder Knoten ca. 7 Nachbarn
haben sollte. Bei rebuild_stupid ist dies fast immer der Fall, beim normalen
rebuild liegt der Durchschnitt etwa bei 9. Ansonsten sind bei diesem Test
kaum Unterschiede zwischen den Varianten festzustellen.</p>
<span class="target" id="fig-graph-linear"></span></div><div class="figure align-center" id="fig-graph-euler-basic">
<a class="reference internal image-reference" href="../../_images/graph_euler_basic.png"><img alt="Graph aus Zufallsdaten nach erster Basisiteration" src="../../_images/graph_euler_basic.png" style="width: 100%;" /></a>
<p class="caption">Graph aus Zufallsdaten nach erster Basisiteration. Die Zahlen 75&ndash;100
bilden einen ,,Schwanz”, während die Zahlen 0&ndash;25 noch nicht stark abgrenzen.
Die restlichen Zahlen dazwischen bilden die erwartete Verdickung.</p>
</div>
<div class="figure align-center" id="fig-graph-euler-all">
<a class="reference internal image-reference" href="../../_images/graph_euler_all.png"><img alt="Graph aus Zufallsdaten nach allen Basisiterationen" src="../../_images/graph_euler_all.png" style="width: 100%;" /></a>
<p class="caption">Graph aus Zufallsdaten nach allen Basisiterationen. Die Zahlen 0&ndash;25 sind nun
stärker abgegrenzt.</p>
</div>
<div class="figure align-center" id="fig-graph-euler-refine">
<a class="reference internal image-reference" href="../../_images/graph_euler_refine.png"><img alt="Graph aus Zufallsdaten nach einem Verfeinerungsschritt" src="../../_images/graph_euler_refine.png" style="width: 100%;" /></a>
<p class="caption">Graph aus Zufallsdaten nach einem Verfeinerungsschritt. Im Vergleich zum
vorigen Graph hat die Verkettungsdichte deutlich zugenommen. Die Zahlen
75&ndash;100 sind nun sehr deutlich abgegrenzt. Der Mittelteil ist insgesamt
stärker zusammengewachsen.</p>
</div>
<div class="figure align-center" id="fig-graph-euler-stupid">
<a class="reference internal image-reference" href="../../_images/graph_euler_stupid.png"><img alt="Der ,,korrekte“, mittels rebuild_stupid erstellte Graph" src="../../_images/graph_euler_stupid.png" style="width: 100%;" /></a>
<p class="caption">Der ,,korrekte“, mittels rebuild_stupid erstellte, Graph. Er bildet eine
vergleichsweise dünne Kette, die in der Mitte nur kleine Ausbuchtungen hat.
Zudem gibt es nur einige wenige Querverbindungen zu weiter entfernten Knoten.
Anmerkung: Durch das Layout bedingt, überlagert sich die Kette in der
Bildmitte.</p>
</div>
<div class="figure align-center" id="fig-graph-full">
<a class="reference internal image-reference" href="../../_images/full_graph_small.png"><img alt="Vollständiger Graph aus 666 Knoten (aus der Demonanwendung)" src="../../_images/full_graph_small.png" style="width: 70%;" /></a>
<p class="caption">Auschnitt aus dem vollständigen Graph, der hinter den Empfehlungen der
Demonanwendungen steckt. Auf der beiliegenden CD ist der vollständige Graph
in A0&ndash;Größe enthalten. Klar erkennbar sind die einzelnen Alben im Graphen.</p>
</div>
</div>
<div class="section" id="bilder-des-genregraphen">
<span id="genre-graph-vis"></span><h2>Bilder des Genregraphen<a class="headerlink" href="#bilder-des-genregraphen" title="Permalink to this headline">¶</a></h2>
<p>Der Vollständigkeit halber wird hier auch eine Visualisierung des Genrebaums
gezeigt. Daraus kann man zwar keine <em>,,neuen Erkenntnisse&quot;</em> ziehen, doch kann er
in der weniger detaillierten Version zumindest als Überblick über die einzelnen
Genres dienen. Die detailliertere Version führt einem vor Auge wieviel einzelne
Musikgenres mit der Zeit entstanden sind.  Die Graphen wurden mit dem freien
Graphenvisualisierungspaket <tt class="docutils literal"><span class="pre">Graphviz</span></tt> <a class="reference internal" href="rst/index.html#graphviz" id="id3">[Link&ndash;25]</a> generiert. Das
Vorgehen soll hier dokumentiert werden.</p>
<p>Folgendes erstellt die <tt class="docutils literal"><span class="pre">Graphviz</span></tt>&ndash;Eingabedatei.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">pwd</span>
~/dev/libmunin
<span class="nv">$ </span><span class="nb">export </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$PYTHONPATH</span>:.
<span class="nv">$ </span>python <span class="s2">&quot;munin/provider/genre.py&quot;</span> --cli --plot 0,0  <span class="c"># Detailstufe: 0,0 = max.</span>
<span class="nv">$ </span>head -n8 <span class="s2">&quot;/tmp/genre.graph&quot;</span>
  graph <span class="o">{</span>
      <span class="nv">overlap</span><span class="o">=</span>prism3000; <span class="nv">overlap_scale</span><span class="o">=</span>-7; <span class="nv">splines</span><span class="o">=</span>curved
      edge <span class="o">[</span><span class="nv">color</span><span class="o">=</span><span class="s2">&quot;#666666&quot;</span><span class="o">]</span>
      node <span class="o">[</span><span class="nv">shape</span><span class="o">=</span><span class="s2">&quot;none&quot;</span>, <span class="nv">style</span><span class="o">=</span><span class="s2">&quot;rounded, filled&quot;</span>, <span class="nv">fillcolor</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="o">]</span>
      <span class="s2">&quot;music&quot;</span> -- <span class="s2">&quot;rock&quot;</span>
      <span class="s2">&quot;music&quot;</span> -- <span class="s2">&quot;pop&quot;</span>
      // ...
  <span class="o">}</span>
</pre></div>
</div>
<p>Daraus kann dann mittels <tt class="docutils literal"><span class="pre">Graphviz</span></tt>&ndash;Bordmitteln den Graphen in verschiedenen
Formaten rendern. Hier die Prozedur für ein <em>PDF</em>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sfdp /tmp/genre.graph           | <span class="se">\ </span> <span class="c"># Layoutting der einzelnen Nodes.</span>
  gvmap -e                        | <span class="se">\ </span> <span class="c"># Einzeichnen der &quot;Länderflächen&quot;.</span>
  neato                             <span class="se">\ </span> <span class="c"># Eigentliches Zeichnen.</span>
     -Ecolor<span class="o">=</span><span class="s2">&quot;#55555555&quot;</span>            <span class="se">\ </span> <span class="c"># Farbe der Kanten.</span>
     -Nfontname<span class="o">=</span><span class="s2">&quot;TeX Gyre Adventor&quot;</span> <span class="se">\ </span> <span class="c"># Font für die Nodelabels.</span>
     -Tpdf                          <span class="se">\ </span> <span class="c"># Ausgabeformat.</span>
  &gt; graph.pdf                          <span class="c"># Ausgabedatei.</span>
<span class="nv">$ </span>pdf-viewer graph.pdf                 <span class="c"># Fertiges Bild.</span>
</pre></div>
</div>
<p><em>Anmerkung:</em> Die einzelnen <em>,,Länder&quot;</em> beziehungsweise Cluster im Graphen dienen
lediglich der optischen Trennung. Die Farbsättigung der Knoten und die
verwendete Größe der Schrift weist auf die Menge der Kinder hin, die der Knoten
hat. Je weiter weg der Knoten vom Wurzelknoten entfernt ist, desto oranger wird
er (von rot beginnend).</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/genre_graph_big.svg"><img alt="Übersicht über alle 1876 Musikgenres. (Detailstufe: 0,0)" src="../../_images/genre_graph_big.svg" width="89%" /></a>
<p class="caption">Übersicht über alle 1876 Musikgenres. (Detailstufe: 0,0)</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/genre_graph_mid.svg"><img alt="Übersicht über die gebräuchlichsten Musikgenres. (Detailstufe: 0,1)" src="../../_images/genre_graph_mid.svg" width="95%" /></a>
<p class="caption">Übersicht über die gebräuchlichsten Musikgenres. (Detailstufe: 0,1)</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/genre_graph_min.svg"><img alt="Übersicht über die wichtisten Musikgenres. (Detailstufe: 0,5)" src="../../_images/genre_graph_min.svg" width="100%" /></a>
<p class="caption">Übersicht über die wichtisten Musikgenres. (Detailstufe: 0,5)
Als ,,wichtig” gelten dabei Genres, die viele Untergenres hervorgebracht
haben.</p>
</div>
</div>
<div class="section" id="medien">
<h2>Medien<a class="headerlink" href="#medien" title="Permalink to this headline">¶</a></h2>
<p>Der Vollständigkeit halber werden hier noch die für <em>libmunin</em> erstellten Logos
abgedruckt. Abbildung  dient dabei eher als Logo für eigene
Zwecke, während das <em>Emblem</em> unter  von
Anwendungsentwicklern genutzt werden kann, um auf den Gebrauch von <em>libmunin</em> in
ihren Anwendungen hinzuweisen.</p>
<p>Die Grafiken wurden mit dem freien Vektorzeichenprogramm <tt class="docutils literal"><span class="pre">Inkscape</span></tt>
<a class="reference internal" href="rst/index.html#inkscape" id="id4">[Link&ndash;26]</a> erstellt und können auf der API&ndash;Dokumentation heruntergeladen
werden: <a class="reference internal" href="rst/index.html#logos" id="id5">[Link&ndash;27]</a>.</p>
<div class="figure compound align-center" id="fig-logos">
<div style="width: 100%" class="subfigure align-center" id="fig-logo">
<a class="reference internal image-reference" href="../../_images/logo.svg"><img alt="Logo im quadratischen Format" src="../../_images/logo.svg" width="40%" /></a>
<p class="caption">Logo im quadratischen Format.</p>
</div>
<div style="width: 100%" class="subfigure align-center" id="fig-logo-emblem">
<a class="reference internal image-reference" href="../../_images/logo_emblem.svg"><img alt="Logo im breiten Format." src="../../_images/logo_emblem.svg" width="80%" /></a>
<p class="caption">Logo im breiten Format.</p>
</div>
<p class="caption">Logos für libmunin. Der dargestellte Vogel stellt Odin's Rabe ,,Munin“ dar.</p>
<span class="target" id="fig-logos"></span></div></div>
<span id="document-rst/zzz_bibliography"></span><div class="section" id="bibliographie">
<h2>Bibliographie<a class="headerlink" href="#bibliographie" title="Permalink to this headline">¶</a></h2>
</div>
<p id="bibtex-bibliography-rst/zzz_bibliography-0"><table class="docutils citation" frame="void" id="aaa-cpahl" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Christopher Pahl. <em>Design und Implementierung eines Musikempfehlungssystems basierend auf Datamining–-Algorithmen</em>. Hof University of Applied Sciences, 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="schnitzer2007high" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>Dominik Schnitzer. High-performance music similarity computation and automatic playlist generation. 2007.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="brill2000improved" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>Eric Brill and Robert&nbsp;C Moore. An improved error model for noisy channel spelling correction. In <em>Proceedings of the 38th Annual Meeting on Association for Computational Linguistics</em>, 286–293. Association for Computational Linguistics, 2000.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="knuth2011art" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td>Donald&nbsp;E Knuth. <em>The Art of Computer Programming: Volume 3 Sorting and Searching</em>. Addison-Wesley, 1997.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="steinautomatische" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[5]</td><td>Benno Stein. <em>Automatische Extraktion von Schlüsselwörtern aus Text</em>. Bauhaus&ndash;Universität Weimar, 2006.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="berry2010text" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[6]</td><td>Michael&nbsp;W Berry and Jacob Kogan. <em>Text mining: applications and theory</em>. John Wiley &amp; Sons, 2010.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="porter2001snowball" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[7]</td><td>Martin&nbsp;F Porter. Snowball stemmer. <span><a class="reference external" href="http://snowball.tartarus.org/">http://snowball.tartarus.org/</a></span>, 2001.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wood2005techniques" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[8]</td><td>Gavin Wood and Simon O'Keefe. On techniques for content-based visual annotation to aid intra-track music navigation. In <em>ISMIR</em>, 58–65. 2005.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="datamining-concepts-and-techniques" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[9]</td><td>Jian&nbsp;Pei Jiawei&nbsp;Han, Micheline&nbsp;Kamber. Datamining — concepts and techniques, (3rd edition). In <em>Datamining - Concepts and Techniques</em>. 2012.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="eclat" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[10]</td><td>Mohammed&nbsp;Javeed Zaki, Srinivasan Parthasarathy, Ogihara, and others. New algorithms for fast discovery of association rules. In <em>KDD</em>, volume 97, 283–286. 1997.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="relim" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[11]</td><td>Christian Borgelt. Keeping things simple: finding frequent item sets by recursive elimination. In <em>Proceedings of the 1st international workshop on open source data mining: frequent pattern mining implementations</em>, 66–70. ACM, 2005.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="gyhorodi2004comparative" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[12]</td><td>Cornelia Győrödi, Robert Győrödi, and Stefan Holban. A comparative study of association rules mining algorithms. In <em>SACI 2004, 1st Romanian-Hungarian Joint Symposium on Applied Computational Intelligence</em>, 213–222. 2004.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="santhosh2010implementation" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[13]</td><td>B&nbsp;Santhosh&nbsp;Kumar and KV&nbsp;Rukmani. Implementation of web usage mining using apriori and fp growth algorithms. <em>International Journal of Advanced Networking</em>, 2010.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="knees2007music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[14]</td><td>Peter Knees, Tim Pohle, Markus Schedl, and Gerhard Widmer. A music search engine built upon audio-based and web-based similarity measures. In <em>Proceedings of the 30th annual international ACM SIGIR conference on Research and development in information retrieval</em>, 447–454. ACM, 2007.</td></tr>
</tbody>
</table>
</p>
<div class="section" id="weblink-verzeichnis">
<h2>Weblink Verzeichnis<a class="headerlink" href="#weblink-verzeichnis" title="Permalink to this headline">¶</a></h2>
</div>
<p id="bibtex-bibliography-rst/zzz_bibliography-1"><table class="docutils citation" frame="void" id="lx" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;1]</td><td><span><a class="reference external" href="https://libmunin.rtfd.org">https://libmunin.rtfd.org</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="gplv3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;2]</td><td><span><a class="reference external" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a></span>. [Stand: 5.5.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="picard" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;3]</td><td><span><a class="reference external" href="http://musicbrainz.org/doc/MusicBrainz_Picard">http://musicbrainz.org/doc/MusicBrainz_Picard</a></span>. [Stand: 15.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="a3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;4]</td><td><span><a class="reference external" href="http://musicbrainz.org/">http://musicbrainz.org/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xu" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;5]</td><td><span><a class="reference external" href="https://github.com/sahib/glyr">https://github.com/sahib/glyr</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="xaj" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;6]</td><td><span><a class="reference external" href="http://beets.radbox.org/">http://beets.radbox.org/</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="discogs" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;7]</td><td><span><a class="reference external" href="http://www.discogs.com">http://www.discogs.com</a></span>. [Stand: 11.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wiki-fusion" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;8]</td><td><span><a class="reference external" href="http://de.wikipedia.org/wiki/Hierarchische_Clusteranalyse">http://de.wikipedia.org/wiki/Hierarchische_Clusteranalyse</a></span>. [Stand 12.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="bidict" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;9]</td><td><span><a class="reference external" href="https://pypi.python.org/pypi/bidict">https://pypi.python.org/pypi/bidict</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="nt" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;10]</td><td><span><a class="reference external" href="http://www.last.fm">http://www.last.fm</a></span>. [Stand: 11.2.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="pyxdameraulevenshtein" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;11]</td><td><span><a class="reference external" href="https://github.com/gfairchild/pyxDamerauLevenshtein">https://github.com/gfairchild/pyxDamerauLevenshtein</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="brainz-faq" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;12]</td><td><span><a class="reference external" href="https://musicbrainz.org/doc/General_FAQ">https://musicbrainz.org/doc/General_FAQ</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="beets-source" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;13]</td><td><span><a class="reference external" href="https://gist.github.com/sampsyo/1241307">https://gist.github.com/sampsyo/1241307</a></span>. [Stand: 12.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wiki-list-pop-music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;14]</td><td><span><a class="reference external" href="http://en.wikipedia.org/wiki/List_of_popular_music_genres">http://en.wikipedia.org/wiki/List_of_popular_music_genres</a></span>. [Stand: 15.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="wiki-list-az-music" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;15]</td><td><span><a class="reference external" href="http://en.wikipedia.org/wiki/List_of_music_styles">http://en.wikipedia.org/wiki/List_of_music_styles</a></span>. [Stand: 15.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="guess-language" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;16]</td><td><span><a class="reference external" href="https://bitbucket.org/spirit/guess_language">https://bitbucket.org/spirit/guess_language</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="pyenchant" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;17]</td><td><span><a class="reference external" href="http://pythonhosted.org/pyenchant/">http://pythonhosted.org/pyenchant/</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="enchant" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;18]</td><td><span><a class="reference external" href="http://www.abisource.com/projects/enchant/">http://www.abisource.com/projects/enchant/</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="pymining" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;19]</td><td><span><a class="reference external" href="https://github.com/bartdag/pymining">https://github.com/bartdag/pymining</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="aubio" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;20]</td><td><span><a class="reference external" href="https://github.com/piem/aubio">https://github.com/piem/aubio</a></span>. [Stand: 10.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="gstreamer" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;21]</td><td><span><a class="reference external" href="http://gstreamer.freedesktop.org/">http://gstreamer.freedesktop.org/</a></span>. [Stand: 18.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="textblob" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;22]</td><td><span><a class="reference external" href="https://github.com/sloria/TextBlob">https://github.com/sloria/TextBlob</a></span>. [Stand: 10.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="igraph" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;23]</td><td><span><a class="reference external" href="http://igraph.sourceforge.net/">http://igraph.sourceforge.net/</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="cairo" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;24]</td><td><span><a class="reference external" href="http://cairographics.org/">http://cairographics.org/</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="graphviz" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;25]</td><td><span><a class="reference external" href="http://www.graphviz.org/">http://www.graphviz.org/</a></span>. [Stand: 13.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="inkscape" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;26]</td><td><span><a class="reference external" href="http://www.inkscape.org">http://www.inkscape.org</a></span>. [Stand: 15.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="logos" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;27]</td><td><span><a class="reference external" href="http://libmunin.readthedocs.org/en/latest/media.html">http://libmunin.readthedocs.org/en/latest/media.html</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="html-variant" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[Link&ndash;28]</td><td><span><a class="reference external" href="http://libmunin.readthedocs.org/en/latest/docs.html">http://libmunin.readthedocs.org/en/latest/docs.html</a></span>. [Stand: 14.4.2014].</td></tr>
</tbody>
</table>
</p>
</div>
<div class="section" id="lizenz">
<h2>Lizenz<a class="headerlink" href="#lizenz" title="Permalink to this headline">¶</a></h2>
<p>Diese Arbeit ist unter den Bedingungen der <em>Creative Commons Attribution-3,0</em>
lizensiert:</p>
<blockquote>
<div><a class="reference external" href="http://creativecommons.org/licenses/by/3,0/de/">http://creativecommons.org/licenses/by/3,0/de/</a></div></blockquote>
<a class="reference internal image-reference" href="../../_images/cclogo.svg"><div align="center" class="align-center"><img alt="Creative Commons License" src="../../_images/cclogo.svg" width="50%" /></div>
</a>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright by Christopher Pahl, 2013-2014..
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>